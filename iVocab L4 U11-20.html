<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>U11-20 å–®å­—æŒ‘æˆ°ç„¡æ¥µé™ - è¬è–ç¯€ç‰¹åˆ¥ç‰ˆ</title>
    <style>
        /* åŸºç¤æ¨£å¼é‡ç½® */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            font-family: 'Comic Sans MS', cursive, sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            background-size: cover;
            background-attachment: fixed;
            overflow-x: hidden;
            touch-action: manipulation;
        }

        .device-info {
            position: fixed;
            top: 10px;
            left: 10px;
            background: rgba(0,0,0,0.7);
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 12px;
            z-index: 1000;
        }
        
        .game-container {
            background-color: rgba(255, 255, 255, 0.9);
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
            padding: 20px;
            width: 95%;
            max-width: 800px;
            text-align: center;
            position: relative;
            border: 5px solid #f05454;
            overflow: hidden;
            margin: 10px;
        }
        
        h1 {
            color: #f05454;
            margin-bottom: 15px;
            font-size: 1.8rem;
            text-shadow: 2px 2px 0px #fff, 0 0 5px #ff9f43;
            line-height: 1.3;
        }
        
        .word-display {
            font-size: 2rem;
            margin: 15px 0;
            color: #f05454;
            font-weight: bold;
            text-shadow: 2px 2px 0px #fff;
            transition: opacity 0.3s ease;
            line-height: 1.2;
        }
        
        .pos-display {
            font-size: 1.2rem;
            color: #f05454;
            margin-bottom: 10px;
            font-style: italic;
            text-shadow: 1px 1px 0px #fff;
            transition: opacity 0.3s ease;
        }

        .countdown {
            font-size: 1.3rem;
            font-weight: bold;
            color: #f05454;
            margin-bottom: 8px;
            text-shadow: 1px 1px 0px #fff;
        }

        .countdown.pulse {
            animation: pulseText 0.5s;
        }

        @keyframes pulseText {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }
        
        .options-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            margin: 15px 0 10px;
            gap: 10px;
        }
        
        .pumpkin-option {
            width: 45%;
            max-width: 160px;
            height: 140px;
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            margin: 5px;
            filter: drop-shadow(0 5px 5px rgba(0,0,0,0.3));
            touch-action: manipulation;
        }
        
        .pumpkin-option:active {
            transform: translateY(-5px) scale(1.05);
        }
        
        .pumpkin-text {
            position: absolute;
            bottom: 15px;
            left: 0;
            right: 0;
            text-align: center;
            font-size: 0.9rem;
            color: #fff;
            font-weight: bold;
            padding: 8px;
            background-color: rgba(0,0,0,0.8);
            border-radius: 10px;
            margin: 0 10px;
            text-shadow: 1px 1px 0 #000;
            min-height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.5);
            line-height: 1.3;
            overflow: hidden;
            text-overflow: ellipsis;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
        }
        
        .timer-container {
            width: 100%;
            height: 15px;
            background-color: #f0f0f0;
            border-radius: 10px;
            margin: 10px 0 15px;
            overflow: hidden;
            border: 2px solid #f05454;
        }
        
        .timer-bar {
            height: 100%;
            width: 100%;
            background: linear-gradient(to right, #f05454, #ff9f43);
            transition: width 0.1s linear;
            border-radius: 8px;
        }

        .timer-warning {
            animation: pulse 0.5s infinite alternate;
        }
        
        @keyframes pulse {
            from { opacity: 1; }
            to { opacity: 0.5; }
        }
        
        .ghost {
            position: absolute;
            width: 60px;
            height: 60px;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path fill="%23f0f0f0" d="M40.1 467.1l-11.2 9c-3.2 2.5-7.1 3.9-11.1 3.9-8.3 0-15.8-6-15.8-16.1c0-5.5 2.5-10.5 6.9-14.1C40.5 439.8 76.6 384 76.6 256c0-168.3-17.7-208-76.6-208C0 48 0 48 0 32C0 14.3 14.3 0 32 0h320c17.7 0 32 14.3 32 32c0 16 0 16-76.6 0c-58.9 0-76.6 39.7-76.6 208c0 128 36.1 183.8 66.3 209.8c4.4 3.6 6.9 8.6 6.9 14.1c0 10.1-7.5 16.1-15.8 16.1c-4 0-7.9-1.4-11.1-3.9l-11.2-9c-6.9-5.5-17.1-5.5-24 0c-6.9 5.5-17.1 5.5-24 0l-11.2-9c-6.9-5.5-17.1-5.5-24 0c-6.9 5.5-17.1 5.5-24 0l-11.2-9c-6.9-5.5-17.1-5.5-24 0c-6.9 5.5-17.1 5.5-24 0l-11.2-9c-6.9-5.5-17.1-5.5-24 0c-6.9 5.5-17.1 5.5-24 0zM128 128c-17.7 0-32 14.3-32 32s14.3 32 32 32s32-14.3 32-32s-14.3-32-32-32zm128 0c-17.7 0-32 14.3-32 32s14.3 32 32 32s32-14.3 32-32s-14.3-32-32-32z"/></svg>');
            background-size: contain;
            background-repeat: no-repeat;
            bottom: 15px;
            left: 50%;
            transform: translateX(-50%);
            animation: float 2s infinite alternate ease-in-out;
            z-index: 10;
            filter: drop-shadow(0 0 10px rgba(255,255,255,0.5));
        }
        
        @keyframes float {
            0% { transform: translate(-50%, 0); }
            100% { transform: translate(-50%, -15px); }
        }
        
        .score-display {
            font-size: 1.2rem;
            color: #f05454;
            margin: 8px 0 10px;
            font-weight: bold;
            text-shadow: 1px 1px 0px #fff;
        }
        
        .game-over {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 100;
            flex-direction: column;
            color: white;
            font-size: 1.5rem;
            text-shadow: 2px 2px 0px #000;
            padding: 20px;
            text-align: center;
        }

        .game-over.active {
            display: flex;
        }
        
        .game-over h2 {
            font-size: 2.2rem;
            margin-bottom: 15px;
            color: #f05454;
        }
        
        .restart-btn, .start-btn {
            padding: 14px 28px;
            background-color: #f05454;
            color: white;
            border: none;
            border-radius: 50px;
            font-size: 1.2rem;
            cursor: pointer;
            margin-top: 20px;
            transition: all 0.3s;
            text-shadow: 1px 1px 0px #000;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            touch-action: manipulation;
            min-width: 180px;
        }
        
        .restart-btn:active, .start-btn:active {
            background-color: #ff9f43;
            transform: scale(0.98);
        }
        
        .bats {
            position: absolute;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 5;
        }
        
        .bat {
            position: absolute;
            width: 25px;
            height: 25px;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path fill="%23f05454" d="M320 160c28.7 0 54.9 10 75.4 26.6 5.1 4.2 11.3 5.3 17 3.1 18.8-7.2 39.7-10.6 60.9-10.6 8.3 0 16.8.7 25.1 2.1 5.9.9 11.6-2 14.3-7.3 9.5-19 15.3-40.6 15.3-63.9 0-61.9-50.1-112-112-112-16.7 0-32.8 3.7-47.4 10.5-4.5 2.1-9.8 1.3-13.8-1.9-11.1-8.9-24.6-14.6-39.2-14.6s-28.1 5.7-39.2 14.6c-4 3.2-9.3 4-13.8 1.9-14.6-6.8-30.7-10.5-47.4-10.5-61.9 0-112 50.1-112 112 0 23.3 5.8 44.9 15.3 63.9 2.7 5.3 8.4 8.2 14.3 7.3 8.3-1.4 16.8-2.1 25.1-2.1 21.2 0 42.1 3.4 60.9 10.6 5.7 2.2 11.9 1.1 17-3.1C265.1 170 291.3 160 320 160zm0-48c13.2 0 24 10.8 24 24s-10.8 24-24 24-24-10.8-24-24 10.8-24 24-24zm-144 56c-28.7 0-54.9 10-75.4 26.6-5.1 4.2-11.3 5.3-17 3.1-18.8-7.2-39.7-10.6-60.9-10.6-8.3 0-16.8.7-25.1 2.1-5.9.9-11.6-2-14.3-7.3C2.8 172.9 0 150.7 0 128 0 66.1 50.1 16 112 16c16.7 0 32.8 3.7 47.4 10.5 4.5 2.1 9.8 1.3 13.8-1.9 11.1-8.9 24.6-14.6 39.2-14.6s28.1 5.7 39.2 14.6c4 3.2 9.3 4 13.8 1.9 14.6-6.8 30.7-10.5 47.4-10.5 61.9 0 112 50.1 112 112 0 22.7-2.8 44.9-8.3 65.5-2.7 5.3-8.4 8.2-14.3 7.3-8.3-1.4-16.8-2.1-25.1-2.1-21.2 0-42.1 3.4-60.9 10.6-5.7 2.2-11.9 1.1-17-3.1-20.5-16.6-46.7-26.6-75.4-26.6zm-24 80c-13.2 0-24-10.8-24-24s10.8-24 24-24 24 10.8 24 24-10.8 24-24 24zm256 0c-13.2 0-24-10.8-24-24s10.8-24 24-24 24 10.8 24 24-10.8 24-24 24zm-224 32c-119 0-216 96.9-216 216 0 57.3 22.5 109.4 59 148 3.1 3.3 7.9 4.1 11.9 2 17.8-9.2 37.6-14 58.1-14 8.3 0 16.5.7 24.6 1.9 5.1.8 10-1.9 12-6.7 7.1-17.3 20.6-31.8 37.9-38.9 1.3-.5 2.7-.8 4-1.1V320c0-52.9 43.1-96 96-96s96 43.1 96 96v56.2c1.3.4 2.7.7 4 1.1 17.3 7.1 30.8 21.6 37.9 38.9 2 4.8 6.9 7.5 12 6.7 8.1-1.2 16.3-1.9 24.6-1.9 20.5 0 40.3 4.8 58.1 14 4 2.1 8.8 1.3 11.9-2 36.5-38.6 59-90.7 59-148 0-119.1-97-216-216-216z"/></svg>');
            background-size: contain;
            background-repeat: no-repeat;
            opacity: 0;
        }
        
        /* å››ç¨®ä¸åŒé¡è‰²çš„å—ç“œç‡ˆ */
        .pumpkin-1 { background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="%23f05454" d="M352 0c-27.8 0-53.3 8.6-74.5 23.1C256.5 8.6 231 0 203.2 0 91 0 0 91 0 203.2c0 132.4 125.8 200.5 203.4 308.8 11 15.4 28.4 25.6 48.4 25.6h8.4c20 0 37.4-10.2 48.4-25.6C386.2 403.7 512 335.6 512 203.2 512 91 421 0 352 0zm-96 480c-3.5 0-6.8-1.8-9.1-4.8-4.1-5.8-102.3-145.7-102.3-272 0-81.9 66.6-148.5 148.5-148.5S441 121.3 441 203.2c0 126.3-98.2 266.2-102.3 272-2.3 3-5.6 4.8-9.1 4.8h-83.2z"/><path fill="%23ff9f43" d="M203.4 308.8C125.8 200.5 0 132.4 0 203.2 0 91 91 0 203.2 0c27.8 0 53.3 8.6 74.5 23.1 21.2-14.5 46.7-23.1 74.5-23.1 69 0 160 91 160 203.2 0 132.4-125.8 200.5-203.4 308.8-11 15.4-28.4 25.6-48.4 25.6h-8.4c-20 0-37.4-10.2-48.4-25.6zM352 56c-16.5 0-32.3 3.3-46.8 9.2 5.3 5.1 10.4 10.4 15.2 16.1C338.3 70.8 345 68 352 68c74.9 0 136 61.1 136 136 0 28.9-9.3 56.3-25.4 78.9 5.8-16.5 9.4-34.2 9.4-52.6C472 121.3 405.4 56 352 56zM203.2 56c-16.5 0-32.3 3.3-46.8 9.2 5.3 5.1 10.4 10.4 15.2 16.1 19.9-10.3 42.4-16.1 66.4-16.1 53.4 0 99.5 30.7 120.9 75.4 10.1-16.4 16.2-35.1 16.2-55.4 0-16.5-3.3-32.3-9.2-46.8C293.5 59.3 268 56 240.2 56h-37z"/><circle fill="%23000" cx="160" cy="160" r="16"/><circle fill="%23000" cx="352" cy="160" r="16"/><path fill="%23000" d="M256 240c-35.3 0-64 28.7-64 64s28.7 64 64 64 64-28.7 64-64-28.7-64-64-64zm0 96c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"/></svg>'); }
        .pumpkin-2 { background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="%23ff9f43" d="M352 0c-27.8 0-53.3 8.6-74.5 23.1C256.5 8.6 231 0 203.2 0 91 0 0 91 0 203.2c0 132.4 125.8 200.5 203.4 308.8 11 15.4 28.4 25.6 48.4 25.6h8.4c20 0 37.4-10.2 48.4-25.6C386.2 403.7 512 335.6 512 203.2 512 91 421 0 352 0zm-96 480c-3.5 0-6.8-1.8-9.1-4.8-4.1-5.8-102.3-145.7-102.3-272 0-81.9 66.6-148.5 148.5-148.5S441 121.3 441 203.2c0 126.3-98.2 266.2-102.3 272-2.3 3-5.6 4.8-9.1 4.8h-83.2z"/><path fill="%23f05454" d="M203.4 308.8C125.8 200.5 0 132.4 0 203.2 0 91 91 0 203.2 0c27.8 0 53.3 8.6 74.5 23.1 21.2-14.5 46.7-23.1 74.5-23.1 69 0 160 91 160 203.2 0 132.4-125.8 200.5-203.4 308.8-11 15.4-28.4 25.6-48.4 25.6h-8.4c-20 0-37.4-10.2-48.4-25.6zM352 56c-16.5 0-32.3 3.3-46.8 9.2 5.3 5.1 10.4 10.4 15.2 16.1C338.3 70.8 345 68 352 68c74.9 0 136 61.1 136 136 0 28.9-9.3 56.3-25.4 78.9 5.8-16.5 9.4-34.2 9.4-52.6C472 121.3 405.4 56 352 56zM203.2 56c-16.5 0-32.3 3.3-46.8 9.2 5.3 5.1 10.4 10.4 15.2 16.1 19.9-10.3 42.4-16.1 66.4-16.1 53.4 0 99.5 30.7 120.9 75.4 10.1-16.4 16.2-35.1 16.2-55.4 0-16.5-3.3-32.3-9.2-46.8C293.5 59.3 268 56 240.2 56h-37z"/><circle fill="%23000" cx="160" cy="160" r="16"/><circle fill="%23000" cx="352" cy="160" r="16"/><path fill="%23000" d="M256 240c-35.3 0-64 28.7-64 64s28.7 64 64 64 64-28.7 64-64-28.7-64-64-64zm0 96c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"/></svg>'); }
        .pumpkin-3 { background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="%23e67e22" d="M352 0c-27.8 0-53.3 8.6-74.5 23.1C256.5 8.6 231 0 203.2 0 91 0 0 91 0 203.2c0 132.4 125.8 200.5 203.4 308.8 11 15.4 28.4 25.6 48.4 25.6h8.4c20 0 37.4-10.2 48.4-25.6C386.2 403.7 512 335.6 512 203.2 512 91 421 0 352 0zm-96 480c-3.5 0-6.8-1.8-9.1-4.8-4.1-5.8-102.3-145.7-102.3-272 0-81.9 66.6-148.5 148.5-148.5S441 121.3 441 203.2c0 126.3-98.2 266.2-102.3 272-2.3 3-5.6 4.8-9.1 4.8h-83.2z"/><path fill="%23d35400" d="M203.4 308.8C125.8 200.5 0 132.4 0 203.2 0 91 91 0 203.2 0c27.8 0 53.3 8.6 74.5 23.1 21.2-14.5 46.7-23.1 74.5-23.1 69 0 160 91 160 203.2 0 132.4-125.8 200.5-203.4 308.8-11 15.4-28.4 25.6-48.4 25.6h-8.4c-20 0-37.4-10.2-48.4-25.6zM352 56c-16.5 0-32.3 3.3-46.8 9.2 5.3 5.1 10.4 10.4 15.2 16.1C338.3 70.8 345 68 352 68c74.9 0 136 61.1 136 136 0 28.9-9.3 56.3-25.4 78.9 5.8-16.5 9.4-34.2 9.4-52.6C472 121.3 405.4 56 352 56zM203.2 56c-16.5 0-32.3 3.3-46.8 9.2 5.3 5.1 10.4 10.4 15.2 16.1 19.9-10.3 42.4-16.1 66.4-16.1 53.4 0 99.5 30.7 120.9 75.4 10.1-16.4 16.2-35.1 16.2-55.4 0-16.5-3.3-32.3-9.2-46.8C293.5 59.3 268 56 240.2 56h-37z"/><circle fill="%23000" cx="160" cy="160" r="16"/><circle fill="%23000" cx="352" cy="160" r="16"/><path fill="%23000" d="M256 240c-35.3 0-64 28.7-64 64s28.7 64 64 64 64-28.7 64-64-28.7-64-64-64zm0 96c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"/></svg>'); }
        .pumpkin-4 { background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="%23d35400" d="M352 0c-27.8 0-53.3 8.6-74.5 23.1C256.5 8.6 231 0 203.2 0 91 0 0 91 0 203.2c0 132.4 125.8 200.5 203.4 308.8 11 15.4 28.4 25.6 48.4 25.6h8.4c20 0 37.4-10.2 48.4-25.6C386.2 403.7 512 335.6 512 203.2 512 91 421 0 352 0zm-96 480c-3.5 0-6.8-1.8-9.1-4.8-4.1-5.8-102.3-145.7-102.3-272 0-81.9 66.6-148.5 148.5-148.5S441 121.3 441 203.2c0 126.3-98.2 266.2-102.3 272-2.3 3-5.6 4.8-9.1 4.8h-83.2z"/><path fill="%23e67e22" d="M203.4 308.8C125.8 200.5 0 132.4 0 203.2 0 91 91 0 203.2 0c27.8 0 53.3 8.6 74.5 23.1 21.2-14.5 46.7-23.1 74.5-23.1 69 0 160 91 160 203.2 0 132.4-125.8 200.5-203.4 308.8-11 15.4-28.4 25.6-48.4 25.6h-8.4c-20 0-37.4-10.2-48.4-25.6zM352 56c-16.5 0-32.3 3.3-46.8 9.2 5.3 5.1 10.4 10.4 15.2 16.1C338.3 70.8 345 68 352 68c74.9 0 136 61.1 136 136 0 28.9-9.3 56.3-25.4 78.9 5.8-16.5 9.4-34.2 9.4-52.6C472 121.3 405.4 56 352 56zM203.2 56c-16.5 0-32.3 3.3-46.8 9.2 5.3 5.1 10.4 10.4 15.2 16.1 19.9-10.3 42.4-16.1 66.4-16.1 53.4 0 99.5 30.7 120.9 75.4 10.1-16.4 16.2-35.1 16.2-55.4 0-16.5-3.3-32.3-9.2-46.8C293.5 59.3 268 56 240.2 56h-37z"/><circle fill="%23000" cx="160" cy="160" r="16"/><circle fill="%23000" cx="352" cy="160" r="16"/><path fill="%23000" d="M256 240c-35.3 0-64 28.7-64 64s28.7 64 64 64 64-28.7 64-64-28.7-64-64-64zm0 96c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"/></svg>'); }
        
        /* å—ç“œç‡ˆä¸Šçš„èŠ±ç´‹ */
        .pumpkin-option::before {
            content: "";
            position: absolute;
            width: 100%;
            height: 100%;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="%23000" d="M256 0c-16.5 0-32.3 3.3-46.8 9.2 5.3 5.1 10.4 10.4 15.2 16.1 19.9-10.3 42.4-16.1 66.4-16.1 53.4 0 99.5 30.7 120.9 75.4 10.1-16.4 16.2-35.1 16.2-55.4 0-16.5-3.3-32.3-9.2-46.8C293.5 59.3 268 56 240.2 56h-37z"/></svg>');
            background-size: 80%;
            background-repeat: no-repeat;
            background-position: center;
            opacity: 0.2;
        }
        
        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            50% { transform: translateX(5px); }
            75% { transform: translateX(-5px); }
            100% { transform: translateX(0); }
        }
        
        @keyframes batFly {
            0% { transform: translate(0, 0) rotate(0deg); opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { transform: translate(100vw, -100vh) rotate(360deg); opacity: 0; }
        }
        
        /* ç¦ç”¨ç‹€æ…‹çš„å—ç“œç‡ˆ */
        .pumpkin-option.disabled {
            pointer-events: none;
            opacity: 0.7;
            filter: grayscale(50%);
        }

        .pumpkin-option.correct {
            transform: scale(1.08);
            filter: drop-shadow(0 0 15px #ff9f43);
        }

        .pumpkin-option.wrong {
            animation: shake 0.3s;
            filter: drop-shadow(0 0 10px #ff0000);
        }
        
        /* é¡Œç›®åˆ‡æ›å‹•ç•« */
        .fade-out {
            opacity: 0;
            transform: translateY(-10px);
            transition: all 0.3s ease;
        }
        
        .fade-in {
            opacity: 1;
            transform: translateY(0);
            transition: all 0.3s ease;
        }
        
        .score-display span {
            padding: 2px 10px;
            border-radius: 20px;
            background-color: rgba(255,255,255,0.8);
        }

        /* éŠæˆ²æ™‚é–“é¸æ“‡ */
        .time-selector {
            margin-top: 15px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 6px;
            font-size: 0.95rem;
            color: #f05454;
        }

        .time-selector span {
            margin-bottom: 4px;
        }

        .time-btn {
            background-color: #ffe0d4;
            color: #333;
            border: none;
            padding: 6px 14px;
            margin: 0 4px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9rem;
            box-shadow: 0 3px 0 #f5b79a;
            font-family: 'Comic Sans MS', cursive;
        }

        .time-btn.active {
            background-color: #ffb08a;
            box-shadow: 0 3px 0 #f05454;
            color: #fff;
        }

        .time-btn:active {
            transform: translateY(2px);
            box-shadow: 0 1px 0 #f5b79a;
        }
        
        /* éŸ¿æ‡‰å¼è¨­è¨ˆ - å¹³æ¿ */
        @media (min-width: 768px) {
            .game-container {
                padding: 25px;
            }
            
            h1 {
                font-size: 2.2rem;
            }
            
            .word-display {
                font-size: 2.3rem;
            }
            
            .pos-display {
                font-size: 1.4rem;
            }

            .countdown {
                font-size: 1.5rem;
            }
            
            .pumpkin-option {
                width: 22%;
                height: 150px;
            }
            
            .pumpkin-text {
                font-size: 1rem;
            }
            
            .ghost {
                width: 70px;
                height: 70px;
            }
            
            .score-display {
                font-size: 1.4rem;
            }
            
            .restart-btn, .start-btn {
                font-size: 1.3rem;
                padding: 16px 32px;
            }
        }
        
        /* éŸ¿æ‡‰å¼è¨­è¨ˆ - é›»è…¦ï¼ˆå¤§å­—ç‰ˆï¼‰ */
        @media (min-width: 1024px) {
            .game-container {
                padding: 30px;
                max-width: 900px;
            }
            
            h1 {
                font-size: 2.8rem;
            }
            
            .word-display {
                font-size: 2.8rem;
                margin: 20px 0 10px;
            }
            
            .pos-display {
                font-size: 1.6rem;
                margin-bottom: 10px;
            }

            .countdown {
                font-size: 1.8rem;
            }
            
            .pumpkin-option {
                width: 22%;
                height: 170px;
                max-width: 200px;
            }
            
            .pumpkin-option:hover {
                transform: translateY(-10px) scale(1.1);
            }
            
            .pumpkin-text {
                font-size: 1.1rem;
            }
            
            .ghost {
                width: 80px;
                height: 80px;
            }
            
            .score-display {
                font-size: 1.6rem;
            }
            
            .restart-btn, .start-btn {
                font-size: 1.5rem;
                padding: 18px 36px;
            }
            
            .restart-btn:hover, .start-btn:hover {
                background-color: #ff9f43;
                transform: scale(1.05);
            }
        }
        
        /* éŸ¿æ‡‰å¼è¨­è¨ˆ - å°æ‰‹æ©Ÿ */
        @media (max-width: 480px) {
            .game-container {
                padding: 15px;
            }
            
            h1 {
                font-size: 1.5rem;
            }
            
            .word-display {
                font-size: 1.8rem;
            }
            
            .pos-display {
                font-size: 1.1rem;
            }

            .countdown {
                font-size: 1.2rem;
            }
            
            .pumpkin-option {
                width: 45%;
                height: 130px;
            }
            
            .pumpkin-text {
                font-size: 0.85rem;
                bottom: 12px;
            }
            
            .ghost {
                width: 50px;
                height: 50px;
            }
            
            .score-display {
                font-size: 1.1rem;
            }
            
            .restart-btn, .start-btn {
                font-size: 1.1rem;
                padding: 12px 24px;
                min-width: 160px;
            }

            .time-selector {
                font-size: 0.85rem;
            }

            .time-btn {
                padding: 4px 10px;
                font-size: 0.8rem;
            }
        }
        
        /* éŸ¿æ‡‰å¼è¨­è¨ˆ - è¶…å°æ‰‹æ©Ÿ */
        @media (max-width: 360px) {
            .pumpkin-option {
                width: 45%;
                height: 120px;
            }
            
            .pumpkin-text {
                font-size: 0.8rem;
            }
            
            .ghost {
                width: 45px;
                height: 45px;
            }
        }

        /* æ©«å‘æ™‚å¾®èª¿ */
        @media (orientation: landscape) and (max-height: 450px) {
            .game-container {
                padding: 10px;
            }

            h1 {
                font-size: 1.4rem;
            }

            .word-display {
                font-size: 1.6rem;
            }

            .pumpkin-option {
                height: 110px;
            }
        }

        /* è§¸æ§è¨­å‚™ï¼šæŒ‰éˆ•æ›´é«˜ */
        @media (pointer: coarse) {
            .restart-btn, .start-btn {
                min-height: 50px;
            }
        }
    </style>
</head>
<body>
    <div class="device-info" id="deviceInfo">æª¢æ¸¬è¨­å‚™ä¸­...</div>

    <div class="game-container">
        <h1>L4 U11-20 å–®å­—æŒ‘æˆ°ç„¡æ¥µé™ ğŸƒ</h1>
        <div class="score-display">Score: <span id="score">0</span></div>

        <!-- èµ·å§‹ç•«é¢ -->
        <div id="setup-screen">
            <p>æº–å‚™å¥½æŒ‘æˆ°ä½ çš„è¬è–ç¯€å–®å­—å†’éšªäº†å—ï¼Ÿ</p>
            <div class="time-selector">
                <span>é¸æ“‡éŠæˆ²æ™‚é–“ï¼š</span>
                <div>
                    <button class="time-btn active" data-time="180">3 åˆ†é˜</button>
                    <button class="time-btn" data-time="300">5 åˆ†é˜</button>
                    <button class="time-btn" data-time="600">10 åˆ†é˜</button>
                </div>
            </div>
            <button class="start-btn" id="start-game">Start Game</button>
        </div>

        <!-- éŠæˆ²ç•«é¢ -->
        <div id="game-screen" style="display: none;">
            <div class="word-display" id="current-word">å–®å­—</div>
            <div class="pos-display" id="current-pos">è©æ€§</div>
            <div class="countdown" id="countdown">3:00</div>
            <div class="timer-container">
                <div class="timer-bar" id="timer-bar"></div>
            </div>
            <div class="options-container">
                <div class="pumpkin-option pumpkin-1" data-option="1">
                    <div class="pumpkin-text" id="option-1">é¸é …1</div>
                </div>
                <div class="pumpkin-option pumpkin-2" data-option="2">
                    <div class="pumpkin-text" id="option-2">é¸é …2</div>
                </div>
                <div class="pumpkin-option pumpkin-3" data-option="3">
                    <div class="pumpkin-text" id="option-3">é¸é …3</div>
                </div>
                <div class="pumpkin-option pumpkin-4" data-option="4">
                    <div class="pumpkin-text" id="option-4">é¸é …4</div>
                </div>
            </div>
            <div class="ghost"></div>
            <div class="bats" id="bats-container"></div>
        </div>

        <!-- çµæŸç•«é¢ -->
        <div class="game-over" id="game-over">
            <h2 id="result-message">Game Over!</h2>
            <div>Final Score: <span id="final-score">0</span></div>
            <div>ç”¨æ™‚: <span id="time-used">0</span> ç§’</div>
            <button class="restart-btn" id="restart-btn">å†ç©ä¸€æ¬¡</button>
        </div>
    </div>

    <script>
        // ========= è¨­å‚™åµæ¸¬ =========
        function detectDevice() {
            const userAgent = navigator.userAgent.toLowerCase();
            const deviceInfo = document.getElementById('deviceInfo');
            let deviceType = 'desktop';
            let screenInfo = '';
            
            if (/mobile|android|iphone|ipad/.test(userAgent)) {
                if (/ipad|tablet/.test(userAgent) || (window.innerWidth >= 768 && window.innerWidth <= 1024)) {
                    deviceType = 'tablet';
                    screenInfo = 'å¹³æ¿è¨­å‚™';
                } else {
                    deviceType = 'mobile';
                    screenInfo = 'æ‰‹æ©Ÿè¨­å‚™';
                }
            } else {
                deviceType = 'desktop';
                screenInfo = 'æ¡Œé¢è¨­å‚™';
            }
            
            document.body.classList.add(deviceType + '-view');
            
            const screenSize = `è¢å¹•: ${window.innerWidth} Ã— ${window.innerHeight}`;
            const dpr = `åƒç´ æ¯”: ${window.devicePixelRatio}`;
            deviceInfo.textContent = `${screenInfo} | ${screenSize} | ${dpr}`;
            
            adjustForDevice(deviceType);
            return deviceType;
        }

        function adjustForDevice(deviceType) {
            const gameContainer = document.querySelector('.game-container');
            if (!gameContainer) return;
            switch (deviceType) {
                case 'desktop':
                    gameContainer.style.maxWidth = '900px';
                    break;
                case 'tablet':
                    gameContainer.style.maxWidth = '800px';
                    break;
                case 'mobile':
                    gameContainer.style.maxWidth = '100%';
                    break;
            }
        }

        // ========= éŠæˆ²è®Šæ•¸ =========
        let vocabulary = [];
        let currentWord = null;
        let score = 0;
        let totalGameTime = 180; // é è¨­ 3 åˆ†é˜
        let timeLeft = totalGameTime;
        let timer = null;
        let startTime = null;
        let gameActive = false;
        let gameOver = false;
        let batInterval = null;
        let canAnswer = false;
        let usedInCurrentSession = [];
        let correctStreak = 0;
        let wrongStreak = 0;
        let lastCountdownNumber = 0;

        // ========= DOMå…ƒç´  =========
        const setupScreen = document.getElementById('setup-screen');
        const gameScreen = document.getElementById('game-screen');
        const gameOverScreen = document.getElementById('game-over');
        const startGameBtn = document.getElementById('start-game');
        const restartBtn = document.getElementById('restart-btn');
        const currentWordDisplay = document.getElementById('current-word');
        const currentPosDisplay = document.getElementById('current-pos');
        const optionDisplays = [
            document.getElementById('option-1'),
            document.getElementById('option-2'),
            document.getElementById('option-3'),
            document.getElementById('option-4')
        ];
        const scoreDisplay = document.getElementById('score');
        const finalScoreDisplay = document.getElementById('final-score');
        const resultMessage = document.getElementById('result-message');
        const timerBar = document.getElementById('timer-bar');
        const batsContainer = document.getElementById('bats-container');
        const pumpkinOptions = document.querySelectorAll('.pumpkin-option');
        const countdownDisplay = document.getElementById('countdown');
        const timeUsedDisplay = document.getElementById('time-used');
        const timeButtons = document.querySelectorAll('.time-btn');

        // ========= å–®å­—åº« =========
        const wordList = `artistic, adj., è—è¡“çš„
competitive, adj., ç«¶çˆ­çš„
critical, adj., ç·Šè¦çš„;é—œéµæ€§çš„;å±æ€¥çš„
facial, adj., è‡‰çš„;é¢éƒ¨çš„
gracious, adj., è¦ªåˆ‡çš„;å’Œè—¹çš„
grateful, adj., æ„Ÿè¬çš„;æ„Ÿæ¿€çš„
initial, adj., é–‹å§‹çš„;æœ€åˆçš„
occasional, adj., å¶çˆ¾çš„;éç¶“å¸¸çš„
access, v., å­˜å–(è³‡æ–™);ä½¿ç”¨;æ¥è¿‘;åˆ°é”
cement, v., é»ç·Š;é»ç‰¢
climax, v., ä½¿é”åˆ°é ‚é»(æˆ–é«˜æ½®)
fulfill, v., å±¥è¡Œ(è«¾è¨€ç­‰)
harden, v., ä½¿è®Šç¡¬;ä½¿è®Šå …å›º
herd, v., æ”¾ç‰§; å‘...ç§»å‹•
insult, v., ä¾®è¾±;ç¾è¾±
oppose, v., åå°
protest, v., æŠ—è­°;åå°
publish, v., å‡ºç‰ˆ;ç™¼è¡Œ;åˆŠè¼‰
retain, v., ä¿ç•™;ä¿æŒ
attachment, n., é€£æ¥;å®‰è£;é™„è‘—;é™„å±¬ç‰©;é™„ä»¶;æ‰£æŠ¼;æ‰£æŠ¼ä»¤
cape, n., å²¬;æµ·è§’; æŠ«è‚©; æ–—ç¯·
convention, n., æœƒè­°;å¤§æœƒ
ferry, n., æ¸¡è¼ª
founder, n., å‰µç«‹è€…;å¥ åŸºè€…
reunion, n., åœ˜èš;é‡èš
salesperson, n., åº—å“¡;å”®è²¨å“¡
split, n., åˆ†è£‚;åˆ†å‰²
surgery, n., (å¤–ç§‘)æ‰‹è¡“
bankrupt, adj. n., ç ´ç”¢çš„;å·²å®Œå…¨å¤±æ•—çš„; ç ´ç”¢è€…
bankruptcy, n., ç ´ç”¢; å®Œå…¨å–ªå¤±
cooperative, adj., åˆä½œçš„;åˆä½œç¤¾çš„
dynamic, adj., å‹•æ…‹çš„
muddy, adj., å¤šçˆ›æ³¥çš„;æ³¥æ¿˜çš„
voluntary, adj., è‡ªé¡˜çš„
digest, v., æ¶ˆåŒ–(é£Ÿç‰©)
disadvantage, v., ä½¿è™•æ–¼ä¸åˆ©åœ°ä½
exaggerate, v., å¼µ;èª‡å¤§;å°...è¨€éå…¶å¯¦
halt, v., åœæ­¢;çµ‚æ­¢
isolate, v., ä½¿å­¤ç«‹; ä½¿éš”é›¢; ä½¿åˆ†é›¢
license, v., è¨±å¯;å‡†è¨±;ç™¼è¨±å¯è­‰çµ¦ (ç¾å¼æ‹¼å¯«)
relieve, v., ç·©å’Œ;æ¸›è¼•;è§£é™¤
biography, n., å‚³è¨˜
charity, n., æ–½æ¨;å–„èˆ‰
chirp, n., å•å•¾è²;å”§å”§è²
conjunction, n., é€£æ¥è©;çµåˆ;é—œè¯
cooperative, n., åˆä½œç¤¾;åˆä½œå•†åº—
cushion, n., å¢Šå­;åå¢Š;èµ·ç·©è¡ä½œç”¨ä½œç”¨çš„äº‹ç‰©
divorce, n., é›¢å©š
embarrassment, n., çª˜;é›£å ª;ä½¿äººç‚ºé›£çš„äºº(æˆ–äº‹ç‰©)
fame, n., è²è­½;åæœ›
fuel, n., ç‡ƒæ–™
germ, n., å¾®ç”Ÿç‰©;ç´°èŒ;ç—…èŒ
goods, n., å•†å“;è²¨ç‰©
inspiration, n., éˆæ„Ÿ
makeup, n., æ§‹é€ ;æ€§æ ¼;åŒ–å¦;è£œè€ƒ;æ’ç‰ˆ
minister, n., éƒ¨é•·;å¤§è‡£
ministry, n., (å¸¸å¤§å¯«)(æ”¿åºœçš„)éƒ¨
panel, n., é‘²æ¿;å£æ¿;å°ˆé–€å°çµ„
participation, n., åƒåŠ 
rebel, n., é€ åè€…;åæŠ—è€…
reference, n., åƒè€ƒæ–‡ç»;å‡ºè™•;æåŠ
sacrifice, n., ç‰²ç¦®;ç¥­å“
wrinkle, n., çšº;çšºç´‹
honorable, adj., å¯å°Šæ•¬çš„ (ç¾å¼æ‹¼å¯«)
mere, adj., åƒ…åƒ…çš„;åªä¸éçš„
mild, adj., æº«å’Œçš„;æº«æŸ”çš„
obedient, adj., æœå¾çš„;é †å¾çš„
prosperous, adj., èˆˆæ—ºçš„;ç¹æ¦®çš„;æ˜Œç››çš„
systematic, adj., æœ‰ç³»çµ±çš„;æˆé«”ç³»çš„
download, v., ä¸‹è¼‰
telegraph, v., ç”¨é›»å ±ç™¼é€;é›»åŒ¯;é›»è³¼
furthermore, adv., è€Œä¸”;æ­¤å¤–;å†è€…
authority, n., è·æ¬Š;å®˜æ–¹
beam, n., æ©«æ¨‘;å…‰æŸ
calorie, n., å¡è·¯é‡Œ
criticism, n., æ‰¹è©•;è©•è«–
curl, n., æ²æ¯›;æ²é«®
defense, n., é˜²ç¦¦;ä¿è¡›;é˜²è­·
entertainment, n., æ‹›å¾…;æ¬¾å¾…; æ¼”è—ç•Œ
foam, n., æ³¡æ²«
freshman, n., ä¸€å¹´ç´šç”Ÿ;æ–°ç”Ÿ
itch, n., ç™¢; æ¸´æœ›
junior, n., è¼ƒå¹´å°‘è€…;ä¸‰å¹´ç´šç”Ÿ; è·ä½è¼ƒä½è€…
limitation, n., æ¥µé™;é™åº¦
measure, n., å°ºå¯¸; ä¸ˆé‡; æ–¹æ³•
occupation, n., å·¥ä½œ;è·æ¥­;ä½”é ˜;ä½”ç”¨
scratch, n., æŠ“ç—•;æ“¦å‚·
significance, n., é‡è¦æ€§;é‡è¦
comic, adj., æ»‘ç¨½çš„; å–œåŠ‡çš„
divine, adj., ç¥æˆçš„;å¤©è³œçš„
lousy, adj., ä¸æ½”çš„;å‘é„™çš„;è¨å­çš„
moderate, adj., ä¸­ç­‰çš„;é©åº¦çš„
partial, adj., éƒ¨åˆ†çš„;å±€éƒ¨çš„;ä¸å®Œå…¨çš„
persuasive, adj., æœ‰èªªæœåŠ›çš„
compose, v., ä½œ(è©©;æ›²ç­‰); æ§‹(åœ–)
defeat, v., æˆ°å‹;æ“Šæ•—
flatter, v., è«‚åªš;å¥‰æ‰¿
flush, v., æ¹§;æ¹§æµ;ç”¨æ°´æ²–æ´—
privilege, v., çµ¦äºˆ...ç‰¹æ¬Š
chore, n., å®¶åº­é›œå‹™
disorder, n., æ··äº‚;ç„¡ç§©åº; ä¸é©;å°ç—…
dispute, n., çˆ­è«–;çˆ­åŸ·;çˆ­ç«¯
insert, n., æ’å…¥ç‰©;å¤¾åœ¨å ±åˆŠä¸­çš„æ•£é å»£å‘Š
perfume, n., é¦™æ°´;é¦™æ–™
photography, n., ç…§ç›¸è¡“;æ”å½±è¡“
preposition, n., ä»‹ç³»è©;å‰ç½®è©
protein, n., è›‹ç™½è³ª
satellite, n., è¡›æ˜Ÿ
academic, adj., å­¸è¡“çš„
contrary, adj., ç›¸åçš„;å°ç«‹çš„
copper, n. adj., éŠ…(çš„); ç´…éŠ…è‰²(çš„)
intermediate, adj., ä¸­ç­‰ç¨‹åº¦çš„;ä¸­ç´šçš„
lunar, adj., æœˆçš„;é™°æ›†çš„
physical, adj., èº«é«”çš„;ç‰©ç†å­¸çš„
reluctant, adj., ä¸æƒ…é¡˜çš„;å‹‰å¼·çš„
amuse, v., é€—...é«˜èˆˆ
annoy, v., æƒ¹æƒ±;ä½¿ç”Ÿæ°£;ä½¿ç…©æƒ±
host, v., ä¸»è¾¦;ä¸»æŒ;ä»¥ä¸»äººèº«åˆ†æ‹›å¾…
predict, v., é è¨€;é æ–™
assistance, n., å¹«åŠ©;å”åŠ©
blossom, n., èŠ±;é–‹èŠ±
cigar, n., é›ªèŒ„ç…™
demand, n., è¦æ±‚;è«‹æ±‚
discouragement, n., æ²®å–ª;æ°£é¤’;æ´©æ°£;å‹¸é˜»
instructor, n., æ•™ç·´;æŒ‡å°è€…
lecture, n., æˆèª²;å†—é•·çš„è¨“è©±
monument, n., ç´€å¿µç¢‘;ç´€å¿µå¡”;ç´€å¿µé¤¨
quake, n., åœ°éœ‡;é¡«æŠ–;æ–æ™ƒ
reform, n., æ”¹é©;æ”¹è‰¯
repetition, n., é‡è¤‡;åè¦†
sparkle, n., ç«èŠ±;é–ƒè€€;é–ƒå…‰
virtue, n., ç¾å¾·;å„ªé»
appropriate, adj., é©ç•¶çš„;æ°ç•¶çš„
delicate, adj., æ˜“ç¢çš„;å¬Œè²´çš„
furious, adj., ç‹‚æ€’çš„
plentiful, adj., è±å¯Œçš„;å……è¶³çš„;å¤šçš„
tense, adj., ç¹ƒç·Šçš„
arch, v., ä½¿æˆå¼§å½¢;æ‹±èµ·
disguise, v., æ©é£¾;éš±ç
occupy, v., ä½”é ˜;ä½”æ“š
sacrifice, v., çŠ§ç‰²;ç»å‡º
spare, v., åˆ†å‡º;é¨°å‡º(æ™‚é–“;äººæ‰‹)
accomplishment, n., æˆå°±;æˆç¸¾;é€ è©£;å¯¦ç¾
article, n., æ–‡ç« ;æ¢æ¬¾
barrier, n., éšœç¤™ç‰©;è·¯éšœ
boast, n., å¹ç‰›;å¤§è©±
economy, n., ç¯€ç´„;ç¯€çœ; ç¶“æ¿Ÿ
handwriting, n., æ›¸å¯«;æ‰‹å¯«
lead, n., æŒ‡å°;é ˜å…ˆåœ°ä½;ç·šç´¢;é‰›ç­†å¿ƒ
machinery, n., æ©Ÿå™¨;æ©Ÿæ¢°
madam, n., å¤«äºº;å¤ªå¤ª
pasta, n., éºµç³°
rhyme, n., éŸ»;éŸ»è…³
socket, n., æ’åº§;æ’å£
sportsmanship, n., é‹å‹•å“¡ç²¾ç¥;é‹å‹•é“å¾·
consistent, adj., å§‹çµ‚å¦‚ä¸€çš„;å‰å¾Œä¸€è‡´çš„
content, adj., æ»¿æ„çš„;ç”˜é¡˜çš„
experimental, adj., å¯¦é©—æ€§çš„;è©¦é©—æ€§çš„
fantastic, adj., å¥‡å¦™çš„
tolerable, adj., å¯å¿å—çš„;å¯å®¹å¿çš„
acquaint, v., ä½¿èªè­˜;ä½¿ç†Ÿæ‚‰
chirp, v., ç¦½é³¥å•å•¾è²;èŸ²ç™¼å”§è²;äººå˜å–³èªªè©±
confine, v., é™åˆ¶;ä½¿å±€é™
evaluate, v., å°...è©•åƒ¹
grind, v., ç£¨(ç¢)
shuttle, v., çŸ­ç¨‹ç©¿æ¢­èˆ¬é‹é€
spark, v., ç™¼å‹•;é»ç‡ƒ
agent, n., ä»£ç†äºº;ä»£ç†å•†
basin, n., è‡‰ç›†;ç›†åœ°
behavior, n., è¡Œç‚º (ç¾å¼æ‹¼å¯«)
biology, n., ç”Ÿç‰©å­¸
contribution, n., è²¢ç»
critic, n., æ‰¹è©•å®¶;è©•è«–å®¶
cucumber, n., é»ƒç“œ;èƒ¡ç“œ
diaper, n., å°¿å¸ƒ
extent, n., ç¨‹åº¦;é™åº¦;ç¯„åœ
instinct, n., æœ¬èƒ½;å¤©æ€§;ç›´è¦º
logic, n., é‚è¼¯;é‚è¼¯å­¸
manual, n., æ‰‹å†Š
slogan, n., å£è™Ÿ;æ¨™èª
species, n., ç¨®é¡;ç¨®
sympathy, n., åŒæƒ…;åŒæƒ…å¿ƒ;å¼”å”
symphony, n., äº¤éŸ¿æ¨‚;äº¤éŸ¿æ›²
vinegar, n., é†‹
absolute, adj., çµ•å°çš„;å®Œå…¨çš„
ambitious, adj., æœ‰é‡å¿ƒçš„
cunning, adj., ç‹¡çŒ¾çš„;å¥¸è©çš„
distinct, adj., èˆ‡å…¶ä»–ä¸åŒçš„
manual, adj., ç”¨æ‰‹æ“ä½œçš„
organic, adj., æœ‰æ©Ÿçš„
accomplish, v., å®Œæˆ;å¯¦ç¾;é”åˆ°
arouse, v., å–šèµ·;æ¿€å‹•;å«é†’
cope, v., æ‡‰å°; è™•ç†
decrease, v., æ¸›å°‘
defend, v., é˜²ç¦¦;ä¿è¡›;ä¿è­·
invest, v., æŠ•(è³‡)
obtain, v., å¾—åˆ°;ç²å¾—
parachute, v., å‚˜é™;è·³å‚˜
plot, v., å¯†è¬€;ç­–åŠƒ;æ¨™ç¹ª
restore, v., æ¢å¾©
revenge, v., æ›¿...å ±ä»‡
abdomen, n., ä¸‹è…¹
atmosphere, n., å¤§æ°£;æ°£æ°›
calculation, n., è¨ˆç®—;ä¼°è¨ˆ;æ¨æ¸¬;ç›¤ç®—
circulation, n., å¾ªç’°; ç™¼è¡Œé‡
civilization, n., æ–‡æ˜ (ç¾å¼æ‹¼å¯«)
grave, n., å¢“ç©´
horizon, n., åœ°å¹³ç·š; (çŸ¥è­˜æˆ–èˆˆè¶£çš„)ç¯„åœã€çœ¼ç•Œ
insurance, n., ä¿éšª;ä¿éšªå¥‘ç´„
laboratory, n., å¯¦é©—å®¤;ç ”ç©¶å®¤ (=lab)
outcome, n., çµæœ;çµå±€
recreation, n., æ¶ˆé£;å¨›æ¨‚
shelter, n., é®è“‹ç‰©;é¿é›£æ‰€
influential, adj., æœ‰å½±éŸ¿çš„
luxurious, adj., å¥¢ä¾ˆçš„;é©•å¥¢æ·«é€¸çš„
productive, adj., ç”Ÿç”¢çš„;ç”Ÿç”¢æ€§çš„
bargain, v., è¨åƒ¹é‚„åƒ¹
blend, v., ä½¿æ··å’Œ; èåˆ
convince, v., ä½¿ä¿¡æœ;èªªæœ
endure, v., å¿è€;å¿å—
inspire, v., é¼“èˆ
reform, v., æ”¹é©;é©æ–°
summarize, v., ç¸½çµ;æ¦‚è¿°;æ¦‚æ‹¬ (ç¾å¼æ‹¼å¯«)
adjective, n., å½¢å®¹è©
bracelet, n., æ‰‹é²;è‡‚é²
congress, n., ç«‹æ³•æ©Ÿé—œ
consequence, n., çµæœ;å¾Œæœ
content, n., å…§å®¹;è¦æ—¨
damn, n., è©›å’’
grapefruit, n., è‘¡è„æŸš
halt, n., æš«åœ;åœæ­¢;çµ‚æ­¢
idol, n., å¶åƒ
ingredient, n., è¦ç´ ;å› ç´ 
intention, n., æ„åœ–
loan, n., è²¸æ¬¾
pioneer, n., æ‹“è’è€…
preservation, n., ç¶­è­·;ç¶­æŒ;ä¿å­˜;ä¿è—;é˜²è…
psychology, n., å¿ƒç†å­¸
tendency, n., å‚¾å‘;ç™–æ€§
university, n., å¤§å­¸
volcano, n., ç«å±±
fertile, adj., (åœŸåœ°)è‚¥æ²ƒçš„;å¯Œé¥’çš„;å—ç²¾çš„
functional, adj., æ©Ÿèƒ½çš„;å¯¦ç”¨çš„
identical, adj., å®Œå…¨ç›¸åŒçš„
assure, v., å‘...ä¿è­‰;æ“”ä¿
concrete, v., ä½¿å‡å›º;ä½¿çµåˆ
confess, v., å¦ç™½;ä¾›èª;æ‰¿èª
devote, v., å°‡...å¥‰ç»
enclose, v., åœä½;åœˆèµ·;(éš¨å‡½)é™„ä¸Š
explore, v., æ¢æ¸¬;æ¢å‹˜
scratch, v., æŠ“;æ”
terrify, v., ä½¿å®³æ€•;ä½¿ææ€–
elsewhere, adv., åœ¨åˆ¥è™•;å¾€åˆ¥è™•
adjustment, n., èª¿ç¯€;èª¿æ•´
capitalism, n., è³‡æœ¬ä¸»ç¾©
creation, n., å‰µé€ ;å‰µä½œ;å‰µç«‹
economics, n., ç¶“æ¿Ÿå­¸
errand, n., å·®äº‹;å·®ä½¿
examinee, n., æ‡‰è©¦è€…;å—æª¢æŸ¥è€…
frustration, n., å¤±æœ›;æŒ«æŠ˜
identification, n., èªå‡º;è­˜åˆ¥
locker, n., (å…¬å…±å ´æ‰€çš„)å„²ç‰©æ«ƒ; å¯„å­˜æ«ƒ
philosopher, n., å“²å­¸å®¶
presentation, n., è´ˆé€;å‘ˆç¾;ä»‹ç´¹;å¼•è¦‹
rhythm, n., ç¯€å¥;éŸ»å¾‹
surrender, n., æŠ•é™;è‡ªé¦–   `;

        // ========= å·¥å…·å‡½æ•¸ =========
        function parseWordList(text) {
            const lines = text.split('\n');
            const words = [];
            
            for (const line of lines) {
                const trimmedLine = line.trim();
                if (!trimmedLine) continue;
                
                const parts = trimmedLine.split(',');
                if (parts.length < 3) continue;
                
                const word = parts[0].trim();
                const pos = parts[1].trim();
                const meanings = parts[2].split(';').map(m => m.trim()).filter(m => m);
                
                for (const meaning of meanings) {
                    words.push({ word, pos, meaning });
                }
            }
            return words;
        }

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function formatTime(seconds) {
            seconds = Math.max(0, seconds);
            const m = Math.floor(seconds / 60);
            const s = Math.ceil(seconds % 60);
            return `${m}:${s.toString().padStart(2, '0')}`;
        }

        // ========= è™è å‹•ç•« =========
        let batFlyStyleAdded = false;
        function createBat() {
            const bat = document.createElement('div');
            bat.className = 'bat';
            
            const size = Math.random() * 20 + 10;
            bat.style.width = `${size}px`;
            bat.style.height = `${size}px`;
            bat.style.left = `-${size}px`;
            bat.style.top = `${Math.random() * 80 + 10}%`;
            
            const duration = Math.random() * 5 + 5;
            batsContainer.appendChild(bat);
            
            setTimeout(() => {
                bat.style.animation = `batFly ${duration}s linear forwards`;
            }, 10);
            
            setTimeout(() => {
                bat.remove();
            }, duration * 1000);
        }

        function startBatAnimation() {
            stopBatAnimation();
            batInterval = setInterval(() => {
                createBat();
            }, 2000);
        }
        
        function stopBatAnimation() {
            clearInterval(batInterval);
            batsContainer.innerHTML = '';
        }

        // ========= éŠæˆ²æµç¨‹ =========
        function initGame() {
            vocabulary = parseWordList(wordList);

            if (vocabulary.length === 0) {
                alert('å–®å­—åº«è¼‰å…¥å¤±æ•—ï¼');
                return;
            }

            score = 0;
            scoreDisplay.textContent = score;
            usedInCurrentSession = [];
            correctStreak = 0;
            wrongStreak = 0;
            gameActive = false;
            gameOver = false;
            canAnswer = false;
            lastCountdownNumber = 0;

            if (timer) {
                clearInterval(timer);
                timer = null;
            }
            stopBatAnimation();

            // ä¾ç›®å‰æ™‚é–“æŒ‰éˆ•è¨­å®šæ™‚é–“èˆ‡é¡¯ç¤º
            const activeBtn = document.querySelector('.time-btn.active') || timeButtons[0];
            totalGameTime = parseInt(activeBtn.dataset.time, 10) || 180;
            timeLeft = totalGameTime;
            countdownDisplay.textContent = formatTime(timeLeft);
            timerBar.style.width = '100%';
            timerBar.classList.remove('timer-warning');

            setupScreen.style.display = 'block';
            gameScreen.style.display = 'none';
            gameOverScreen.classList.remove('active');
        }

        function startGame() {
            if (vocabulary.length === 0) {
                alert('å–®å­—åº«è¼‰å…¥å¤±æ•—ï¼');
                return;
            }

            const activeBtn = document.querySelector('.time-btn.active') || timeButtons[0];
            totalGameTime = parseInt(activeBtn.dataset.time, 10) || 180;
            timeLeft = totalGameTime;
            lastCountdownNumber = Math.ceil(timeLeft);

            score = 0;
            scoreDisplay.textContent = score;
            usedInCurrentSession = [];
            correctStreak = 0;
            wrongStreak = 0;
            gameActive = true;
            gameOver = false;
            canAnswer = true;

            setupScreen.style.display = 'none';
            gameScreen.style.display = 'block';
            gameOverScreen.classList.remove('active');

            countdownDisplay.textContent = formatTime(timeLeft);
            timerBar.style.width = '100%';
            timerBar.classList.remove('timer-warning');

            startTime = Date.now();
            if (timer) clearInterval(timer);
            timer = setInterval(updateTimer, 100);

            startBatAnimation();
            nextQuestion();
        }

        function updateTimer() {
            if (!gameActive) {
                clearInterval(timer);
                timer = null;
                return;
            }

            timeLeft -= 0.1;
            if (timeLeft < 0) timeLeft = 0;

            const percentage = (timeLeft / totalGameTime) * 100;
            timerBar.style.width = `${percentage}%`;
            countdownDisplay.textContent = formatTime(timeLeft);

            const currentNumber = Math.ceil(timeLeft);
            if (currentNumber !== lastCountdownNumber) {
                lastCountdownNumber = currentNumber;
                countdownDisplay.className = 'countdown pulse';
                setTimeout(() => {
                    if (!gameOver) countdownDisplay.className = 'countdown';
                }, 300);
            }

            if (percentage < 20) {
                timerBar.classList.add('timer-warning');
            } else {
                timerBar.classList.remove('timer-warning');
            }

            if (timeLeft <= 0) {
                endGame('time');
            }
        }

        function nextQuestion() {
            if (!gameActive || gameOver) return;

            canAnswer = true;
            pumpkinOptions.forEach(option => {
                option.classList.remove('disabled', 'correct', 'wrong');
            });

            if (usedInCurrentSession.length >= vocabulary.length) {
                usedInCurrentSession = [];
            }

            const availableIndices = vocabulary
                .map((_, i) => i)
                .filter(i => !usedInCurrentSession.includes(i));

            if (availableIndices.length === 0) {
                usedInCurrentSession = [];
                nextQuestion();
                return;
            }

            const randomIndex = availableIndices[Math.floor(Math.random() * availableIndices.length)];
            usedInCurrentSession.push(randomIndex);
            currentWord = vocabulary[randomIndex];

            currentWordDisplay.classList.add('fade-out');
            currentPosDisplay.classList.add('fade-out');

            setTimeout(() => {
                currentWordDisplay.textContent = currentWord.word;
                currentPosDisplay.textContent = currentWord.pos;

                prepareOptions();

                currentWordDisplay.classList.remove('fade-out');
                currentPosDisplay.classList.remove('fade-out');
                currentWordDisplay.classList.add('fade-in');
                currentPosDisplay.classList.add('fade-in');

                setTimeout(() => {
                    currentWordDisplay.classList.remove('fade-in');
                    currentPosDisplay.classList.remove('fade-in');
                }, 300);
            }, 200);
        }

        function prepareOptions() {
            if (!currentWord) return;

            const correctAnswer = currentWord.meaning;
            const otherMeanings = vocabulary
                .filter(item => item.meaning !== correctAnswer)
                .map(item => item.meaning);

            const wrongAnswers = [];
            while (wrongAnswers.length < 3 && otherMeanings.length > 0) {
                const randomIndex = Math.floor(Math.random() * otherMeanings.length);
                const selectedMeaning = otherMeanings[randomIndex];
                if (!wrongAnswers.includes(selectedMeaning)) {
                    wrongAnswers.push(selectedMeaning);
                    otherMeanings.splice(randomIndex, 1);
                }
            }

            const allOptions = [correctAnswer, ...wrongAnswers];
            shuffleArray(allOptions);

            for (let i = 0; i < 4; i++) {
                if (i < allOptions.length) {
                    optionDisplays[i].textContent = allOptions[i];
                    optionDisplays[i].parentElement.dataset.meaning = allOptions[i];
                } else {
                    optionDisplays[i].textContent = 'ç„¡é¸é …';
                    optionDisplays[i].parentElement.dataset.meaning = '';
                }
            }
        }

        function checkAnswer(selectedOption) {
            if (!gameActive || !canAnswer || gameOver) return;

            canAnswer = false;
            const selectedMeaning = selectedOption.dataset.meaning;
            const isCorrect = selectedMeaning === currentWord.meaning;

            pumpkinOptions.forEach(option => {
                option.classList.add('disabled');
                const meaning = option.dataset.meaning;
                if (meaning === currentWord.meaning) {
                    option.classList.add('correct');
                } else if (option === selectedOption && !isCorrect) {
                    option.classList.add('wrong');
                }
            });

            if (isCorrect) {
                correctStreak++;
                wrongStreak = 0;

                let addScore = 5;
                if (correctStreak === 1) addScore = 5;
                else if (correctStreak === 2) addScore = 10;
                else if (correctStreak === 3) addScore = 15;
                else addScore = 20;

                score += addScore;
                scoreDisplay.textContent = score;

                createBatsEffect();

                setTimeout(() => {
                    if (!gameOver) nextQuestion();
                }, 700);
            } else {
                wrongStreak++;
                correctStreak = 0;

                let penalty = 5;
                if (wrongStreak === 1) penalty = 5;
                else if (wrongStreak === 2) penalty = 10;
                else if (wrongStreak === 3) penalty = 15;
                else penalty = 20;

                score = Math.max(score - penalty, 0);
                scoreDisplay.textContent = score;

                gameScreen.style.animation = 'shake 0.4s';
                setTimeout(() => {
                    gameScreen.style.animation = '';
                }, 400);

                setTimeout(() => {
                    if (score <= 0) {
                        endGame('score');
                    } else if (!gameOver) {
                        pumpkinOptions.forEach(option => {
                            option.classList.remove('correct', 'wrong', 'disabled');
                        });
                        canAnswer = true;
                        nextQuestion();
                    }
                }, 800);
            }
        }

        function createBatsEffect() {
            for (let i = 0; i < 5; i++) {
                setTimeout(() => {
                    createBat();
                }, i * 100);
            }
        }

        function endGame(reason) {
            if (gameOver) return;
            gameOver = true;
            gameActive = false;
            canAnswer = false;

            if (timer) {
                clearInterval(timer);
                timer = null;
            }
            stopBatAnimation();

            finalScoreDisplay.textContent = score;

            let used;
            if (startTime) {
                used = Math.floor((Date.now() - startTime) / 1000);
            } else {
                used = Math.floor(totalGameTime - timeLeft);
            }
            if (used < 0 || !isFinite(used)) used = 0;
            timeUsedDisplay.textContent = used;

            if (reason === 'time') {
                resultMessage.textContent = 'æ™‚é–“åˆ°ï¼ğŸ‘»';
            } else if (reason === 'score') {
                resultMessage.textContent = 'åˆ†æ•¸æ­¸é›¶äº†ï¼ğŸ§Ÿâ€â™‚ï¸';
            } else {
                resultMessage.textContent = 'Game Over!';
            }

            gameOverScreen.classList.add('active');
        }

        function restartGame() {
            initGame();
        }

        // ========= äº‹ä»¶è™•ç† =========
        document.addEventListener('DOMContentLoaded', function () {
            detectDevice();
            initGame();

            startGameBtn.addEventListener('click', startGame);
            restartBtn.addEventListener('click', restartGame);

            pumpkinOptions.forEach(option => {
                option.addEventListener('click', () => {
                    checkAnswer(option);
                });
            });

            timeButtons.forEach(btn => {
                btn.addEventListener('click', () => {
                    timeButtons.forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');

                    totalGameTime = parseInt(btn.dataset.time, 10) || 180;
                    timeLeft = totalGameTime;
                    countdownDisplay.textContent = formatTime(timeLeft);
                    timerBar.style.width = '100%';
                    timerBar.classList.remove('timer-warning');
                });
            });
        });

        // é˜²æ­¢é›™æ“Šç¸®æ”¾
        let lastTouchEnd = 0;
        document.addEventListener('touchend', function(e) {
            const now = Date.now();
            if (now - lastTouchEnd <= 300) e.preventDefault();
            lastTouchEnd = now;
        }, { passive: false });

        window.addEventListener('resize', function () {
            setTimeout(detectDevice, 100);
        });
    </script>
</body>
</html>
