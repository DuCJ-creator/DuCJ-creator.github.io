<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>U11-20 å–®å­—æŒ‘æˆ°ç„¡æ¥µé™ - è¬è–ç¯€ç‰¹åˆ¥ç‰ˆ</title>
    <style>
        /* åŸºç¤æ¨£å¼é‡ç½® */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            font-family: 'Comic Sans MS', cursive, sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            background-size: cover;
            background-attachment: fixed;
            overflow-x: hidden;
            touch-action: manipulation;
        }

        .device-info {
            position: fixed;
            top: 10px;
            left: 10px;
            background: rgba(0,0,0,0.7);
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 12px;
            z-index: 1000;
        }
        
        .game-container {
            background-color: rgba(255, 255, 255, 0.9);
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
            padding: 20px;
            width: 95%;
            max-width: 800px;
            text-align: center;
            position: relative;
            border: 5px solid #f05454;
            overflow: hidden;
            margin: 10px;
        }
        
        h1 {
            color: #f05454;
            margin-bottom: 15px;
            font-size: 1.8rem;
            text-shadow: 2px 2px 0px #fff, 0 0 5px #ff9f43;
            line-height: 1.3;
        }
        
        .word-display {
            font-size: 2rem;
            margin: 15px 0;
            color: #f05454;
            font-weight: bold;
            text-shadow: 2px 2px 0px #fff;
            transition: opacity 0.3s ease;
            line-height: 1.2;
        }
        
        .pos-display {
            font-size: 1.2rem;
            color: #f05454;
            margin-bottom: 10px;
            font-style: italic;
            text-shadow: 1px 1px 0px #fff;
            transition: opacity 0.3s ease;
        }

        .countdown {
            font-size: 1.3rem;
            font-weight: bold;
            color: #f05454;
            margin-bottom: 8px;
            text-shadow: 1px 1px 0px #fff;
        }

        .countdown.pulse {
            animation: pulseText 0.5s;
        }

        @keyframes pulseText {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }
        
        .options-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            margin: 15px 0 10px;
            gap: 10px;
        }
        
        .pumpkin-option {
            width: 45%;
            max-width: 160px;
            height: 140px;
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            margin: 5px;
            filter: drop-shadow(0 5px 5px rgba(0,0,0,0.3));
            touch-action: manipulation;
        }
        
        .pumpkin-option:active {
            transform: translateY(-5px) scale(1.05);
        }
        
        .pumpkin-text {
            position: absolute;
            bottom: 15px;
            left: 0;
            right: 0;
            text-align: center;
            font-size: 0.9rem;
            color: #fff;
            font-weight: bold;
            padding: 8px;
            background-color: rgba(0,0,0,0.8);
            border-radius: 10px;
            margin: 0 10px;
            text-shadow: 1px 1px 0 #000;
            min-height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.5);
            line-height: 1.3;
            overflow: hidden;
            text-overflow: ellipsis;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
        }
        
        .timer-container {
            width: 100%;
            height: 15px;
            background-color: #f0f0f0;
            border-radius: 10px;
            margin: 10px 0 15px;
            overflow: hidden;
            border: 2px solid #f05454;
        }
        
        .timer-bar {
            height: 100%;
            width: 100%;
            background: linear-gradient(to right, #f05454, #ff9f43);
            transition: width 0.1s linear;
            border-radius: 8px;
        }

        .timer-warning {
            animation: pulse 0.5s infinite alternate;
        }
        
        @keyframes pulse {
            from { opacity: 1; }
            to { opacity: 0.5; }
        }
        
        .ghost {
            position: absolute;
            width: 60px;
            height: 60px;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path fill="%23f0f0f0" d="M40.1 467.1l-11.2 9c-3.2 2.5-7.1 3.9-11.1 3.9-8.3 0-15.8-6-15.8-16.1c0-5.5 2.5-10.5 6.9-14.1C40.5 439.8 76.6 384 76.6 256c0-168.3-17.7-208-76.6-208C0 48 0 48 0 32C0 14.3 14.3 0 32 0h320c17.7 0 32 14.3 32 32c0 16 0 16-76.6 0c-58.9 0-76.6 39.7-76.6 208c0 128 36.1 183.8 66.3 209.8c4.4 3.6 6.9 8.6 6.9 14.1c0 10.1-7.5 16.1-15.8 16.1c-4 0-7.9-1.4-11.1-3.9l-11.2-9c-6.9-5.5-17.1-5.5-24 0c-6.9 5.5-17.1 5.5-24 0l-11.2-9c-6.9-5.5-17.1-5.5-24 0c-6.9 5.5-17.1 5.5-24 0l-11.2-9c-6.9-5.5-17.1-5.5-24 0c-6.9 5.5-17.1 5.5-24 0l-11.2-9c-6.9-5.5-17.1-5.5-24 0c-6.9 5.5-17.1 5.5-24 0zM128 128c-17.7 0-32 14.3-32 32s14.3 32 32 32s32-14.3 32-32s-14.3-32-32-32zm128 0c-17.7 0-32 14.3-32 32s14.3 32 32 32s32-14.3 32-32s-14.3-32-32-32z"/></svg>');
            background-size: contain;
            background-repeat: no-repeat;
            bottom: 15px;
            left: 50%;
            transform: translateX(-50%);
            animation: float 2s infinite alternate ease-in-out;
            z-index: 10;
            filter: drop-shadow(0 0 10px rgba(255,255,255,0.5));
        }
        
        @keyframes float {
            0% { transform: translate(-50%, 0); }
            100% { transform: translate(-50%, -15px); }
        }
        
        .score-display {
            font-size: 1.2rem;
            color: #f05454;
            margin: 8px 0 10px;
            font-weight: bold;
            text-shadow: 1px 1px 0px #fff;
        }
        
        .game-over {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 100;
            flex-direction: column;
            color: white;
            font-size: 1.5rem;
            text-shadow: 2px 2px 0px #000;
            padding: 20px;
            text-align: center;
        }

        .game-over.active {
            display: flex;
        }
        
        .game-over h2 {
            font-size: 2.2rem;
            margin-bottom: 15px;
            color: #f05454;
        }
        
        .restart-btn, .start-btn {
            padding: 14px 28px;
            background-color: #f05454;
            color: white;
            border: none;
            border-radius: 50px;
            font-size: 1.2rem;
            cursor: pointer;
            margin-top: 20px;
            transition: all 0.3s;
            text-shadow: 1px 1px 0px #000;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            touch-action: manipulation;
            min-width: 180px;
        }
        
        .restart-btn:active, .start-btn:active {
            background-color: #ff9f43;
            transform: scale(0.98);
        }
        
        .bats {
            position: absolute;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 5;
        }
        
        .bat {
            position: absolute;
            width: 25px;
            height: 25px;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path fill="%23f05454" d="M320 160c28.7 0 54.9 10 75.4 26.6 5.1 4.2 11.3 5.3 17 3.1 18.8-7.2 39.7-10.6 60.9-10.6 8.3 0 16.8.7 25.1 2.1 5.9.9 11.6-2 14.3-7.3 9.5-19 15.3-40.6 15.3-63.9 0-61.9-50.1-112-112-112-16.7 0-32.8 3.7-47.4 10.5-4.5 2.1-9.8 1.3-13.8-1.9-11.1-8.9-24.6-14.6-39.2-14.6s-28.1 5.7-39.2 14.6c-4 3.2-9.3 4-13.8 1.9-14.6-6.8-30.7-10.5-47.4-10.5-61.9 0-112 50.1-112 112 0 23.3 5.8 44.9 15.3 63.9 2.7 5.3 8.4 8.2 14.3 7.3 8.3-1.4 16.8-2.1 25.1-2.1 21.2 0 42.1 3.4 60.9 10.6 5.7 2.2 11.9 1.1 17-3.1C265.1 170 291.3 160 320 160zm0-48c13.2 0 24 10.8 24 24s-10.8 24-24 24-24-10.8-24-24 10.8-24 24-24zm-144 56c-28.7 0-54.9 10-75.4 26.6-5.1 4.2-11.3 5.3-17 3.1-18.8-7.2-39.7-10.6-60.9-10.6-8.3 0-16.8.7-25.1 2.1-5.9.9-11.6-2-14.3-7.3C2.8 172.9 0 150.7 0 128 0 66.1 50.1 16 112 16c16.7 0 32.8 3.7 47.4 10.5 4.5 2.1 9.8 1.3 13.8-1.9 11.1-8.9 24.6-14.6 39.2-14.6s28.1 5.7 39.2 14.6c4 3.2 9.3 4 13.8 1.9 14.6-6.8 30.7-10.5 47.4-10.5 61.9 0 112 50.1 112 112 0 22.7-2.8 44.9-8.3 65.5-2.7 5.3-8.4 8.2-14.3 7.3-8.3-1.4-16.8-2.1-25.1-2.1-21.2 0-42.1 3.4-60.9 10.6-5.7 2.2-11.9 1.1-17-3.1-20.5-16.6-46.7-26.6-75.4-26.6zm-24 80c-13.2 0-24-10.8-24-24s10.8-24 24-24 24 10.8 24 24-10.8 24-24 24zm256 0c-13.2 0-24-10.8-24-24s10.8-24 24-24 24 10.8 24 24-10.8 24-24 24zm-224 32c-119 0-216 96.9-216 216 0 57.3 22.5 109.4 59 148 3.1 3.3 7.9 4.1 11.9 2 17.8-9.2 37.6-14 58.1-14 8.3 0 16.5.7 24.6 1.9 5.1.8 10-1.9 12-6.7 7.1-17.3 20.6-31.8 37.9-38.9 1.3-.5 2.7-.8 4-1.1V320c0-52.9 43.1-96 96-96s96 43.1 96 96v56.2c1.3.4 2.7.7 4 1.1 17.3 7.1 30.8 21.6 37.9 38.9 2 4.8 6.9 7.5 12 6.7 8.1-1.2 16.3-1.9 24.6-1.9 20.5 0 40.3 4.8 58.1 14 4 2.1 8.8 1.3 11.9-2 36.5-38.6 59-90.7 59-148 0-119.1-97-216-216-216z"/></svg>');
            background-size: contain;
            background-repeat: no-repeat;
            opacity: 0;
        }
        
        /* å››ç¨®ä¸åŒé¡è‰²çš„å—ç“œç‡ˆ */
        .pumpkin-1 { background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="%23f05454" d="M352 0c-27.8 0-53.3 8.6-74.5 23.1C256.5 8.6 231 0 203.2 0 91 0 0 91 0 203.2c0 132.4 125.8 200.5 203.4 308.8 11 15.4 28.4 25.6 48.4 25.6h8.4c20 0 37.4-10.2 48.4-25.6C386.2 403.7 512 335.6 512 203.2 512 91 421 0 352 0zm-96 480c-3.5 0-6.8-1.8-9.1-4.8-4.1-5.8-102.3-145.7-102.3-272 0-81.9 66.6-148.5 148.5-148.5S441 121.3 441 203.2c0 126.3-98.2 266.2-102.3 272-2.3 3-5.6 4.8-9.1 4.8h-83.2z"/><path fill="%23ff9f43" d="M203.4 308.8C125.8 200.5 0 132.4 0 203.2 0 91 91 0 203.2 0c27.8 0 53.3 8.6 74.5 23.1 21.2-14.5 46.7-23.1 74.5-23.1 69 0 160 91 160 203.2 0 132.4-125.8 200.5-203.4 308.8-11 15.4-28.4 25.6-48.4 25.6h-8.4c-20 0-37.4-10.2-48.4-25.6zM352 56c-16.5 0-32.3 3.3-46.8 9.2 5.3 5.1 10.4 10.4 15.2 16.1C338.3 70.8 345 68 352 68c74.9 0 136 61.1 136 136 0 28.9-9.3 56.3-25.4 78.9 5.8-16.5 9.4-34.2 9.4-52.6C472 121.3 405.4 56 352 56zM203.2 56c-16.5 0-32.3 3.3-46.8 9.2 5.3 5.1 10.4 10.4 15.2 16.1 19.9-10.3 42.4-16.1 66.4-16.1 53.4 0 99.5 30.7 120.9 75.4 10.1-16.4 16.2-35.1 16.2-55.4 0-16.5-3.3-32.3-9.2-46.8C293.5 59.3 268 56 240.2 56h-37z"/><circle fill="%23000" cx="160" cy="160" r="16"/><circle fill="%23000" cx="352" cy="160" r="16"/><path fill="%23000" d="M256 240c-35.3 0-64 28.7-64 64s28.7 64 64 64 64-28.7 64-64-28.7-64-64-64zm0 96c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"/></svg>'); }
        .pumpkin-2 { background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="%23ff9f43" d="M352 0c-27.8 0-53.3 8.6-74.5 23.1C256.5 8.6 231 0 203.2 0 91 0 0 91 0 203.2c0 132.4 125.8 200.5 203.4 308.8 11 15.4 28.4 25.6 48.4 25.6h8.4c20 0 37.4-10.2 48.4-25.6C386.2 403.7 512 335.6 512 203.2 512 91 421 0 352 0zm-96 480c-3.5 0-6.8-1.8-9.1-4.8-4.1-5.8-102.3-145.7-102.3-272 0-81.9 66.6-148.5 148.5-148.5S441 121.3 441 203.2c0 126.3-98.2 266.2-102.3 272-2.3 3-5.6 4.8-9.1 4.8h-83.2z"/><path fill="%23f05454" d="M203.4 308.8C125.8 200.5 0 132.4 0 203.2 0 91 91 0 203.2 0c27.8 0 53.3 8.6 74.5 23.1 21.2-14.5 46.7-23.1 74.5-23.1 69 0 160 91 160 203.2 0 132.4-125.8 200.5-203.4 308.8-11 15.4-28.4 25.6-48.4 25.6h-8.4c-20 0-37.4-10.2-48.4-25.6zM352 56c-16.5 0-32.3 3.3-46.8 9.2 5.3 5.1 10.4 10.4 15.2 16.1C338.3 70.8 345 68 352 68c74.9 0 136 61.1 136 136 0 28.9-9.3 56.3-25.4 78.9 5.8-16.5 9.4-34.2 9.4-52.6C472 121.3 405.4 56 352 56zM203.2 56c-16.5 0-32.3 3.3-46.8 9.2 5.3 5.1 10.4 10.4 15.2 16.1 19.9-10.3 42.4-16.1 66.4-16.1 53.4 0 99.5 30.7 120.9 75.4 10.1-16.4 16.2-35.1 16.2-55.4 0-16.5-3.3-32.3-9.2-46.8C293.5 59.3 268 56 240.2 56h-37z"/><circle fill="%23000" cx="160" cy="160" r="16"/><circle fill="%23000" cx="352" cy="160" r="16"/><path fill="%23000" d="M256 240c-35.3 0-64 28.7-64 64s28.7 64 64 64 64-28.7 64-64-28.7-64-64-64zm0 96c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"/></svg>'); }
        .pumpkin-3 { background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="%23e67e22" d="M352 0c-27.8 0-53.3 8.6-74.5 23.1C256.5 8.6 231 0 203.2 0 91 0 0 91 0 203.2c0 132.4 125.8 200.5 203.4 308.8 11 15.4 28.4 25.6 48.4 25.6h8.4c20 0 37.4-10.2 48.4-25.6C386.2 403.7 512 335.6 512 203.2 512 91 421 0 352 0zm-96 480c-3.5 0-6.8-1.8-9.1-4.8-4.1-5.8-102.3-145.7-102.3-272 0-81.9 66.6-148.5 148.5-148.5S441 121.3 441 203.2c0 126.3-98.2 266.2-102.3 272-2.3 3-5.6 4.8-9.1 4.8h-83.2z"/><path fill="%23d35400" d="M203.4 308.8C125.8 200.5 0 132.4 0 203.2 0 91 91 0 203.2 0c27.8 0 53.3 8.6 74.5 23.1 21.2-14.5 46.7-23.1 74.5-23.1 69 0 160 91 160 203.2 0 132.4-125.8 200.5-203.4 308.8-11 15.4-28.4 25.6-48.4 25.6h-8.4c-20 0-37.4-10.2-48.4-25.6zM352 56c-16.5 0-32.3 3.3-46.8 9.2 5.3 5.1 10.4 10.4 15.2 16.1C338.3 70.8 345 68 352 68c74.9 0 136 61.1 136 136 0 28.9-9.3 56.3-25.4 78.9 5.8-16.5 9.4-34.2 9.4-52.6C472 121.3 405.4 56 352 56zM203.2 56c-16.5 0-32.3 3.3-46.8 9.2 5.3 5.1 10.4 10.4 15.2 16.1 19.9-10.3 42.4-16.1 66.4-16.1 53.4 0 99.5 30.7 120.9 75.4 10.1-16.4 16.2-35.1 16.2-55.4 0-16.5-3.3-32.3-9.2-46.8C293.5 59.3 268 56 240.2 56h-37z"/><circle fill="%23000" cx="160" cy="160" r="16"/><circle fill="%23000" cx="352" cy="160" r="16"/><path fill="%23000" d="M256 240c-35.3 0-64 28.7-64 64s28.7 64 64 64 64-28.7 64-64-28.7-64-64-64zm0 96c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"/></svg>'); }
        .pumpkin-4 { background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="%23d35400" d="M352 0c-27.8 0-53.3 8.6-74.5 23.1C256.5 8.6 231 0 203.2 0 91 0 0 91 0 203.2c0 132.4 125.8 200.5 203.4 308.8 11 15.4 28.4 25.6 48.4 25.6h8.4c20 0 37.4-10.2 48.4-25.6C386.2 403.7 512 335.6 512 203.2 512 91 421 0 352 0zm-96 480c-3.5 0-6.8-1.8-9.1-4.8-4.1-5.8-102.3-145.7-102.3-272 0-81.9 66.6-148.5 148.5-148.5S441 121.3 441 203.2c0 126.3-98.2 266.2-102.3 272-2.3 3-5.6 4.8-9.1 4.8h-83.2z"/><path fill="%23e67e22" d="M203.4 308.8C125.8 200.5 0 132.4 0 203.2 0 91 91 0 203.2 0c27.8 0 53.3 8.6 74.5 23.1 21.2-14.5 46.7-23.1 74.5-23.1 69 0 160 91 160 203.2 0 132.4-125.8 200.5-203.4 308.8-11 15.4-28.4 25.6-48.4 25.6h-8.4c-20 0-37.4-10.2-48.4-25.6zM352 56c-16.5 0-32.3 3.3-46.8 9.2 5.3 5.1 10.4 10.4 15.2 16.1C338.3 70.8 345 68 352 68c74.9 0 136 61.1 136 136 0 28.9-9.3 56.3-25.4 78.9 5.8-16.5 9.4-34.2 9.4-52.6C472 121.3 405.4 56 352 56zM203.2 56c-16.5 0-32.3 3.3-46.8 9.2 5.3 5.1 10.4 10.4 15.2 16.1 19.9-10.3 42.4-16.1 66.4-16.1 53.4 0 99.5 30.7 120.9 75.4 10.1-16.4 16.2-35.1 16.2-55.4 0-16.5-3.3-32.3-9.2-46.8C293.5 59.3 268 56 240.2 56h-37z"/><circle fill="%23000" cx="160" cy="160" r="16"/><circle fill="%23000" cx="352" cy="160" r="16"/><path fill="%23000" d="M256 240c-35.3 0-64 28.7-64 64s28.7 64 64 64 64-28.7 64-64-28.7-64-64-64zm0 96c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"/></svg>'); }
        
        /* å—ç“œç‡ˆä¸Šçš„èŠ±ç´‹ */
        .pumpkin-option::before {
            content: "";
            position: absolute;
            width: 100%;
            height: 100%;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="%23000" d="M256 0c-16.5 0-32.3 3.3-46.8 9.2 5.3 5.1 10.4 10.4 15.2 16.1 19.9-10.3 42.4-16.1 66.4-16.1 53.4 0 99.5 30.7 120.9 75.4 10.1-16.4 16.2-35.1 16.2-55.4 0-16.5-3.3-32.3-9.2-46.8C293.5 59.3 268 56 240.2 56h-37z"/></svg>');
            background-size: 80%;
            background-repeat: no-repeat;
            background-position: center;
            opacity: 0.2;
        }
        
        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            50% { transform: translateX(5px); }
            75% { transform: translateX(-5px); }
            100% { transform: translateX(0); }
        }
        
        @keyframes batFly {
            0% { transform: translate(0, 0) rotate(0deg); opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { transform: translate(100vw, -100vh) rotate(360deg); opacity: 0; }
        }
        
        /* ç¦ç”¨ç‹€æ…‹çš„å—ç“œç‡ˆ */
        .pumpkin-option.disabled {
            pointer-events: none;
            opacity: 0.7;
            filter: grayscale(50%);
        }

        .pumpkin-option.correct {
            transform: scale(1.08);
            filter: drop-shadow(0 0 15px #ff9f43);
        }

        .pumpkin-option.wrong {
            animation: shake 0.3s;
            filter: drop-shadow(0 0 10px #ff0000);
        }
        
        /* é¡Œç›®åˆ‡æ›å‹•ç•« */
        .fade-out {
            opacity: 0;
            transform: translateY(-10px);
            transition: all 0.3s ease;
        }
        
        .fade-in {
            opacity: 1;
            transform: translateY(0);
            transition: all 0.3s ease;
        }
        
        .score-display span {
            padding: 2px 10px;
            border-radius: 20px;
            background-color: rgba(255,255,255,0.8);
        }

        /* éŠæˆ²æ™‚é–“é¸æ“‡ */
        .time-selector {
            margin-top: 15px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 6px;
            font-size: 0.95rem;
            color: #f05454;
        }

        .time-selector span {
            margin-bottom: 4px;
        }

        .time-btn {
            background-color: #ffe0d4;
            color: #333;
            border: none;
            padding: 6px 14px;
            margin: 0 4px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9rem;
            box-shadow: 0 3px 0 #f5b79a;
            font-family: 'Comic Sans MS', cursive;
        }

        .time-btn.active {
            background-color: #ffb08a;
            box-shadow: 0 3px 0 #f05454;
            color: #fff;
        }

        .time-btn:active {
            transform: translateY(2px);
            box-shadow: 0 1px 0 #f5b79a;
        }
        
        /* éŸ¿æ‡‰å¼è¨­è¨ˆ - å¹³æ¿ */
        @media (min-width: 768px) {
            .game-container {
                padding: 25px;
            }
            
            h1 {
                font-size: 2.2rem;
            }
            
            .word-display {
                font-size: 2.3rem;
            }
            
            .pos-display {
                font-size: 1.4rem;
            }

            .countdown {
                font-size: 1.5rem;
            }
            
            .pumpkin-option {
                width: 22%;
                height: 150px;
            }
            
            .pumpkin-text {
                font-size: 1rem;
            }
            
            .ghost {
                width: 70px;
                height: 70px;
            }
            
            .score-display {
                font-size: 1.4rem;
            }
            
            .restart-btn, .start-btn {
                font-size: 1.3rem;
                padding: 16px 32px;
            }
        }
        
        /* éŸ¿æ‡‰å¼è¨­è¨ˆ - é›»è…¦ï¼ˆå¤§å­—ç‰ˆï¼‰ */
        @media (min-width: 1024px) {
            .game-container {
                padding: 30px;
                max-width: 900px;
            }
            
            h1 {
                font-size: 2.8rem;
            }
            
            .word-display {
                font-size: 2.8rem;
                margin: 20px 0 10px;
            }
            
            .pos-display {
                font-size: 1.6rem;
                margin-bottom: 10px;
            }

            .countdown {
                font-size: 1.8rem;
            }
            
            .pumpkin-option {
                width: 22%;
                height: 170px;
                max-width: 200px;
            }
            
            .pumpkin-option:hover {
                transform: translateY(-10px) scale(1.1);
            }
            
            .pumpkin-text {
                font-size: 1.1rem;
            }
            
            .ghost {
                width: 80px;
                height: 80px;
            }
            
            .score-display {
                font-size: 1.6rem;
            }
            
            .restart-btn, .start-btn {
                font-size: 1.5rem;
                padding: 18px 36px;
            }
            
            .restart-btn:hover, .start-btn:hover {
                background-color: #ff9f43;
                transform: scale(1.05);
            }
        }
        
        /* éŸ¿æ‡‰å¼è¨­è¨ˆ - å°æ‰‹æ©Ÿ */
        @media (max-width: 480px) {
            .game-container {
                padding: 15px;
            }
            
            h1 {
                font-size: 1.5rem;
            }
            
            .word-display {
                font-size: 1.8rem;
            }
            
            .pos-display {
                font-size: 1.1rem;
            }

            .countdown {
                font-size: 1.2rem;
            }
            
            .pumpkin-option {
                width: 45%;
                height: 130px;
            }
            
            .pumpkin-text {
                font-size: 0.85rem;
                bottom: 12px;
            }
            
            .ghost {
                width: 50px;
                height: 50px;
            }
            
            .score-display {
                font-size: 1.1rem;
            }
            
            .restart-btn, .start-btn {
                font-size: 1.1rem;
                padding: 12px 24px;
                min-width: 160px;
            }

            .time-selector {
                font-size: 0.85rem;
            }

            .time-btn {
                padding: 4px 10px;
                font-size: 0.8rem;
            }
        }
        
        /* éŸ¿æ‡‰å¼è¨­è¨ˆ - è¶…å°æ‰‹æ©Ÿ */
        @media (max-width: 360px) {
            .pumpkin-option {
                width: 45%;
                height: 120px;
            }
            
            .pumpkin-text {
                font-size: 0.8rem;
            }
            
            .ghost {
                width: 45px;
                height: 45px;
            }
        }

        /* æ©«å‘æ™‚å¾®èª¿ */
        @media (orientation: landscape) and (max-height: 450px) {
            .game-container {
                padding: 10px;
            }

            h1 {
                font-size: 1.4rem;
            }

            .word-display {
                font-size: 1.6rem;
            }

            .pumpkin-option {
                height: 110px;
            }
        }

        /* è§¸æ§è¨­å‚™ï¼šæŒ‰éˆ•æ›´é«˜ */
        @media (pointer: coarse) {
            .restart-btn, .start-btn {
                min-height: 50px;
            }
        }
    </style>
</head>
<body>
    <div class="device-info" id="deviceInfo">æª¢æ¸¬è¨­å‚™ä¸­...</div>

    <div class="game-container">
        <h1>CAP2000 Clothing & Others å–®å­—æŒ‘æˆ°ç„¡æ¥µé™ğŸƒ</h1>
        <div class="score-display">Score: <span id="score">0</span></div>

        <!-- èµ·å§‹ç•«é¢ -->
        <div id="setup-screen">
            <p>æº–å‚™å¥½æŒ‘æˆ°ä½ çš„è¬è–ç¯€å–®å­—å†’éšªäº†å—ï¼Ÿ</p>
            <div class="time-selector">
                <span>é¸æ“‡éŠæˆ²æ™‚é–“ï¼š</span>
                <div>
                    <button class="time-btn active" data-time="180">3 åˆ†é˜</button>
                    <button class="time-btn" data-time="300">5 åˆ†é˜</button>
                    <button class="time-btn" data-time="600">10 åˆ†é˜</button>
                </div>
            </div>
            <button class="start-btn" id="start-game">Start Game</button>
        </div>

        <!-- éŠæˆ²ç•«é¢ -->
        <div id="game-screen" style="display: none;">
            <div class="word-display" id="current-word">å–®å­—</div>
            <div class="pos-display" id="current-pos">è©æ€§</div>
            <div class="countdown" id="countdown">3:00</div>
            <div class="timer-container">
                <div class="timer-bar" id="timer-bar"></div>
            </div>
            <div class="options-container">
                <div class="pumpkin-option pumpkin-1" data-option="1">
                    <div class="pumpkin-text" id="option-1">é¸é …1</div>
                </div>
                <div class="pumpkin-option pumpkin-2" data-option="2">
                    <div class="pumpkin-text" id="option-2">é¸é …2</div>
                </div>
                <div class="pumpkin-option pumpkin-3" data-option="3">
                    <div class="pumpkin-text" id="option-3">é¸é …3</div>
                </div>
                <div class="pumpkin-option pumpkin-4" data-option="4">
                    <div class="pumpkin-text" id="option-4">é¸é …4</div>
                </div>
            </div>
            <div class="ghost"></div>
            <div class="bats" id="bats-container"></div>
        </div>

        <!-- çµæŸç•«é¢ -->
        <div class="game-over" id="game-over">
            <h2 id="result-message">Game Over!</h2>
            <div>Final Score: <span id="final-score">0</span></div>
            <div>ç”¨æ™‚: <span id="time-used">0</span> ç§’</div>
            <button class="restart-btn" id="restart-btn">å†ç©ä¸€æ¬¡</button>
        </div>
    </div>

    <script>
        // ========= è¨­å‚™åµæ¸¬ =========
        function detectDevice() {
            const userAgent = navigator.userAgent.toLowerCase();
            const deviceInfo = document.getElementById('deviceInfo');
            let deviceType = 'desktop';
            let screenInfo = '';
            
            if (/mobile|android|iphone|ipad/.test(userAgent)) {
                if (/ipad|tablet/.test(userAgent) || (window.innerWidth >= 768 && window.innerWidth <= 1024)) {
                    deviceType = 'tablet';
                    screenInfo = 'å¹³æ¿è¨­å‚™';
                } else {
                    deviceType = 'mobile';
                    screenInfo = 'æ‰‹æ©Ÿè¨­å‚™';
                }
            } else {
                deviceType = 'desktop';
                screenInfo = 'æ¡Œé¢è¨­å‚™';
            }
            
            document.body.classList.add(deviceType + '-view');
            
            const screenSize = `è¢å¹•: ${window.innerWidth} Ã— ${window.innerHeight}`;
            const dpr = `åƒç´ æ¯”: ${window.devicePixelRatio}`;
            deviceInfo.textContent = `${screenInfo} | ${screenSize} | ${dpr}`;
            
            adjustForDevice(deviceType);
            return deviceType;
        }

        function adjustForDevice(deviceType) {
            const gameContainer = document.querySelector('.game-container');
            if (!gameContainer) return;
            switch (deviceType) {
                case 'desktop':
                    gameContainer.style.maxWidth = '900px';
                    break;
                case 'tablet':
                    gameContainer.style.maxWidth = '800px';
                    break;
                case 'mobile':
                    gameContainer.style.maxWidth = '100%';
                    break;
            }
        }

        // ========= éŠæˆ²è®Šæ•¸ =========
        let vocabulary = [];
        let currentWord = null;
        let score = 0;
        let totalGameTime = 180; // é è¨­ 3 åˆ†é˜
        let timeLeft = totalGameTime;
        let timer = null;
        let startTime = null;
        let gameActive = false;
        let gameOver = false;
        let batInterval = null;
        let canAnswer = false;
        let usedInCurrentSession = [];
        let correctStreak = 0;
        let wrongStreak = 0;
        let lastCountdownNumber = 0;

        // ========= DOMå…ƒç´  =========
        const setupScreen = document.getElementById('setup-screen');
        const gameScreen = document.getElementById('game-screen');
        const gameOverScreen = document.getElementById('game-over');
        const startGameBtn = document.getElementById('start-game');
        const restartBtn = document.getElementById('restart-btn');
        const currentWordDisplay = document.getElementById('current-word');
        const currentPosDisplay = document.getElementById('current-pos');
        const optionDisplays = [
            document.getElementById('option-1'),
            document.getElementById('option-2'),
            document.getElementById('option-3'),
            document.getElementById('option-4')
        ];
        const scoreDisplay = document.getElementById('score');
        const finalScoreDisplay = document.getElementById('final-score');
        const resultMessage = document.getElementById('result-message');
        const timerBar = document.getElementById('timer-bar');
        const batsContainer = document.getElementById('bats-container');
        const pumpkinOptions = document.querySelectorAll('.pumpkin-option');
        const countdownDisplay = document.getElementById('countdown');
        const timeUsedDisplay = document.getElementById('time-used');
        const timeButtons = document.querySelectorAll('.time-btn');

        // ========= å–®å­—åº« =========
        const wordList = `backpack,n.,å¾ŒèƒŒåŒ…
bag,n.,è¢‹å­
beautiful,adj.,æ¼‚äº®çš„
belt,n.,çš®å¸¶
black,adj.,é»‘è‰²çš„
blouse,n.,(å¥³ç”¨)è¥¯è¡«
blue,adj.,è—è‰²çš„
brown,adj.,æ£•è‰²çš„
button,n.,éˆ•æ‰£;æŒ‰éˆ•
cap,n.,é´¨èˆŒå¸½
clothes,n.,è¡£æœ
coat,n.,å¤§è¡£
color,n.,é¡è‰²
colorful,adj.,å¤šé‡‡å¤šå§¿çš„
contact lens,n.,éš±å½¢çœ¼é¡
dress,n.,æ´‹è£
earrings,n.,è€³ç’°(è¤‡æ•¸)
fancy,adj.,èŠ±ä¿çš„;é«˜ç´šçš„
fashionable,adj.,æ™‚å°šçš„
fit,v.,åˆèº«;é©åˆ
glasses,n.,çœ¼é¡
glove,n.,æ‰‹å¥—
golden,adj.,é‡‘è‰²çš„
gray,adj.,ç°è‰²çš„
green,adj.,ç¶ è‰²çš„
handkerchief,n.,æ‰‹å¸•
hanger,n.,è¡£æ¶;æ›å‹¾
hat,n.,å¸½å­
iron,v.,ç†¨ç‡™
iron,n.,éµ;ç†¨æ–—
jeans,n.,ç‰›ä»”è¤²
mask,n.,å£ç½©
necklace,n.,é …éŠ
pajamas,n.,ç¡è¡£
pants,n.,é•·è¤²
pink,adj.,ç²‰ç´…è‰²çš„
pocket,n.,å£è¢‹
pretty,adj.,æ¼‚äº®çš„
purple,adj.,ç´«è‰²çš„
purse,n.,éŒ¢åŒ…
red,adj.,ç´…è‰²çš„
ring,n.,æˆ’æŒ‡
scarf,n.,åœå·¾
shirt,n.,è¥¯è¡«
shoes,n.,é‹å­
shorts,n.,çŸ­è¤²
silver,n./adj.,éŠ€(çš„);éŠ€ç™½çš„
skinny,adj.,ç˜¦åˆ°çš®åŒ…éª¨çš„
skirt,n.,è£™å­
slippers,n.,æ‹–é‹(è¤‡æ•¸)
sneakers,n.,çƒé‹(è¤‡æ•¸)
socks,n.,è¥ªå­
suit,v.,ä½¿é©åˆ
suit,n.,å¥—è£;è¨´è¨Ÿ
sweater,n.,æ¯›è¡£
swimsuit,n.,æ³³è£
T-shirt,n.,T æ¤è¡«
tie,n.,é ˜å¸¶
trousers,n.,é•·è¤²(è‹±å¼èªªæ³•)
underwear,n.,å…§è¡£
uniform,n.,åˆ¶æœ
vest,n.,èƒŒå¿ƒ
wallet,n.,çš®å¤¾
watch,n.,éŒ¶
wear,v.,ç©¿è‘—;æˆ´è‘—
white,adj.,ç™½è‰²çš„
yellow,adj.,é»ƒè‰²çš„
action,n.,æ´»å‹•;è¡Œå‹•
address,n.,åœ°å€;æ¼”è¬›
advice,n.,å¿ å‘Š;å‹¸å‘Š
all,n./adj.,å…¨éƒ¨(çš„)
army,n.,è»éšŠ;å¤§ç¾¤
attention,n.,æ³¨æ„;å°ˆå¿ƒ
beginning,n.,é–‹å§‹
bomb,n.,ç‚¸å½ˆ
both,n.,å…©æ–¹
bottom,n.,åº•éƒ¨
branch,n.,æ¨¹æ;åˆ†åº—
brick,n.,ç£šé ­
care,n.,é—œå¿ƒ;çœ‹è­·
case,n.,æ¡ˆä»¶
cause,n.,åŸå› 
center,n.,ä¸­å¿ƒ;ä¸­å¤®
chance,n.,é‹æ°£;æ©Ÿæœƒ
choice,n.,æŠ‰æ“‡
command,n.,å‘½ä»¤
courage,n.,å‹‡æ°£
crime,n.,ç½ª;çŠ¯ç½ªè¡Œç‚º
current,n.,æ°´æµ;é›»æµ
danger,n.,å±éšª
decision,n.,æ±ºå®š
desire,n.,æ¸´æœ›
difference,n.,å·®åˆ¥
difficulty,n.,é›£è™•
edge,n.,é‚Šç·£;å„ªå‹¢
effort,n.,åŠªåŠ›
end,n.,æœ«ç«¯;æ¥µæŸ
energy,n.,ç²¾åŠ›;èƒ½é‡
engine,n.,å¼•æ“
error,n.,éŒ¯èª¤;å·®éŒ¯
event,n.,äº‹ä»¶
example,n.,ä¾‹å­
excuse,n.,è—‰å£
experience,n.,ç¶“é©—
express,n.,å¿«é
fact,n.,äº‹å¯¦
fair,n.,å±•è¦½æœƒ
fault,n.,ééŒ¯
freedom,n.,è‡ªç”±
friendship,n.,å‹èª¼
front,n.,å‰é¢;æ­£é¢
general,n.,å°‡è»
gesture,n.,å§¿å‹¢;æ‰‹å‹¢
goal,n.,ç›®æ¨™;çƒé–€
habit,n.,ç¿’æ…£
handle,n.,æŠŠæ‰‹
hole,n.,æ´
hunger,n.,é¥‘é¤“
idea,n.,ä¸»æ„
importance,n.,é‡è¦æ€§
influence,n.,å½±éŸ¿
invitation,n.,é‚€è«‹
item,n.,é …ç›®
jam,n.,æœé†¬;æ“å¡
joke,n.,ç¬‘è©±
kiss,n.,è¦ªå»
law,n.,æ³•å¾‹
level,n.,ç¨‹åº¦
liquid,n.,æ¶²é«”
machine,n.,æ¥µå™¨
manner,n.,æ–¹æ³•;æ…‹åº¦
mark,n.,è¨˜æ¥µ
mass,n.,åœ˜;å¡Š
meaning,n.,æ„æ€;æ„æ¶µ
memory,n.,è¨˜æ†¶
metal,n.,é‡‘å±¬
mistake,n.,éŒ¯èª¤;éå¤±
moment,n.,ç¬é–“;ç‰‡åˆ»
motion,n.,å‹•ä½œ
noise,n.,å™ªéŸ³
object,n.,ç‰©é«”
opinion,n.,æ„è¦‹
order,n.,å‘½ä»¤;ç§©åº
part,n.,ä¸€éƒ¨ä»½
pattern,n.,æ ¼å¼;èŠ±æ¨£
peace,n.,å’Œå¹³
point,n.,çœ‹æ³•;é»
poison,n.,æ¯’è—¥
powder,n.,ç²‰
power,n.,åŠ›é‡
pressure,n.,å£“åŠ›
principle,n.,åŸå‰‡;(è¡Œç‚º)æº–å‰‡
prize,n.,çè³;çå“
production,n.,ç”¢å“
progress,n.,é€²æ­¥
purpose,n.,ç›®çš„
puzzle,n.,çŒœè¬
question,n.,å•é¡Œ
race,n.,è³½è·‘
reason,n.,åŸå› 
result,n.,çµæœ
right,n.,æ¬Šåˆ©
robot,n.,æ©Ÿå™¨äºº
rubber,n.,æ©¡è† 
rule,n.,è¦å‰‡;è¦å®š
safety,n.,å®‰å…¨æ€§
sale,n.,å‡ºå”®
sample,n.,æ¨£æœ¬
secret,n.,ç§˜å¯†
section,n.,ç¯€;æ®µ
service,n.,æœå‹™
side,n.,æ—é‚Š
silence,n.,å¯‚éœ
smoke,n.,ç…™éœ§
society,n.,ç¤¾æœƒ
soul,n.,éˆé­‚
sound,n.,è²éŸ³
sound,v.,è½èµ·ä¾†
speaker,n.,æ¼”è¬›è€…;æ“´éŸ³å™¨
speech,n.,æ¼”è¬›
spirit,n.,ç²¾ç¥;å¿ƒéˆ
step,n.,æ­¥;è‡ºéš
strike,n.,æ”»æ“Š;ç½·å·¥
success,n.,æˆåŠŸ
symbol,n.,ç¬¦è™Ÿ;è±¡å¾µ
system,n.,ç³»çµ±
tank,n.,æ§½;å¦å…‹
tear,n.,çœ¼æ·š
thought,n.,æƒ³æ³•
title,n.,æ¨™é¡Œ;é ­éŠœ
tool,n.,å·¥å…·
top,n.,é ‚éƒ¨;é ­é ‚;é™€èº
topic,n.,ä¸»é¡Œ
tower,n.,å¡”
trace,n.,è¹¤è·¡
tradition,n.,å‚³çµ±
trick,n.,è©­è¨ˆ;é¨™å±€
trouble,n.,éº»ç…©
truth,n.,äº‹å¯¦;çœŸç›¸
type,n.,é¡å‹
value,n.,åƒ¹å€¼
victory,n.,å‹åˆ©
war,n.,æˆ°çˆ­
will,n.,æ„å¿—
accept,v.,æ¥å—
act,v.,ä¸»æ¼”;è¡Œå‹•
add,v.,æ·»åŠ 
advise,v.,å»ºè­°;è¦å‹¸
affect,v.,å½±éŸ¿;æ„ŸæŸ“
agree,v.,åŒæ„
aim,v./n.,ç„æº–;ç›®æ¨™
allow,v.,å…è¨±
apologize,v.,é“æ­‰
appear,v.,å‡ºç¾
appreciate,v.,æ„Ÿè¬;è³è­˜
argue,v.,çˆ­è«–
arrange,v.,å®‰æ’;æ•´ç†
ask,v.,å•
assume,v.,å‡è¨­
attack,v.,é€²æ”»;è¥²æ“Š
avoid,v.,é¿å…
base,v.,ä»¥â€¦ç‚ºåŸºç¤ã€æ ¹æ“š
beat,v.,æ“Šæ•—;æ•²æ‰“
become,v.,æˆç‚º;è®Šå¾—
begin,v.,é–‹å§‹
behave,v.,è¡¨ç¾;å®ˆè¦çŸ©
believe,v.,ç›¸ä¿¡
belong,v.,å±¬æ–¼
blame,v.,è²¬å‚™;æ­¸å’
blow,v.,å¹
borrow,v.,å€Ÿ(å…¥)
bother,v.,æ‰“æ“¾
bow,v.,é èº¬
break,v.,å¼„å£
bring,v.,å¸¶ä¾†
burn,v.,ç‡ƒç‡’
burst,v.,çˆ†è£‚;é—–å…¥
calm,v.,ä½¿å¹³éœ
cancel,v.,å–æ¶ˆ
carry,v.,é‹è¼‰;å¸¶è‘—
catch,v.,æŠ“ä½;è¶•ä¸Š
change,v.,æ”¹è®Š
chase,v.,è¿½é€
cheat,v.,è©æ¬º;ä½œå¼Š;æ¬ºé¨™
check,v.,æª¢æŸ¥
choose,v.,é¸æ“‡
close,v.,é—œä¸Š
come,v.,ä¾†
comment,v./n.,è©•è«–
compare,v.,æ¯”è¼ƒ
complain,v.,æŠ±æ€¨
complete,v.,å®Œæˆ
continue,v.,ç¹¼çºŒ
control,v.,æ§åˆ¶
correct,v.,æ”¹æ­£
cover,v.,è¦†è“‹
cross,v.,é(æ²³ã€è¡—)
cry,v.,å“­æ³£
cut,v.,åˆ‡å‰²
damage,v./n.,æå®³
deal,v.,è™•ç†
debate,v./n.,è¾¯è«–
decide,v.,æ±ºå®š
decrease,v.,æ¸›å°‘
define,v.,å®šç¾©
deliver,v.,éé€;ç™¼è¡¨
depend,v.,ä¾è³´;å–æ±ºæ–¼
describe,v.,æè¿°
desert,v.,éºæ£„;
detect,v.,å¯Ÿè¦º
develop,v.,ç™¼å±•
dig,v.,æ˜(åœŸ);æŒ–(æ´)
direct,v.,æŒ‡æ®
disappear,v.,æ¶ˆå¤±
discover,v.,ç™¼ç¾
discuss,v.,è¨è«–
doubt,v./n.,æ‡·ç–‘
download,v.,ä¸‹è¼‰
dream,v./n.,ä½œå¤¢;å¤¢æƒ³
dry,v.,æ›¬ä¹¾;çƒ˜ä¹¾;è®Šä¹¾
earn,v.,è³ºåˆ°
ease,v.,ä½¿æ”¾é¬†(èˆ’ç·©)
embarrass,v.,ä½¿å›°çª˜
emphasize,v.,å¼·èª¿
enter,v.,é€²å…¥
excite,v.,ä½¿èˆˆå¥®
exist,v.,å­˜åœ¨
expect,v.,æœŸæœ›
explain,v.,è§£é‡‹;èªªæ˜
express,v.,è¡¨ç¤º
fail,v.,å¤±æ•—
fall,v.,è½ä¸‹;è·Œå€’
feed,v.,é¤µé£Ÿ;é£¼é¤Š
fight,v.,æ‰“æ¶;å¥®é¬¥
fill,v.,å……æ»¿
find,v.,ç™¼ç¾
finish,v.,çµæŸ;å®Œæˆ
fix,v.,å›ºå®š;ä¿®ç†
fly,v.,é£›
focus,v./n.,å°ˆæ³¨;ç„¦é»
follow,v.,éµå®ˆ;è·Ÿéš¨
forget,v.,å¿˜è¨˜
forgive,v.,åŸè«’
frighten,v.,ä½¿å®³æ€•
gain,v.,ç²å¾—;è´å¾—
gather,v.,èšé›†
get,v.,å¾—åˆ°
give,v.,é€çµ¦;çµ¦
go,v.,å»
greet,v.,å•å€™;è¿æ¥
guard,v.,ä¿è¡›;çœ‹å®ˆ
guess,v.,çŒœæ¸¬
guide,v.,å¼•å°
hammer,v./n.,æ•²æ‰“;éšå­
handle,v.,è™•ç†;æ§åˆ¶
hang,v.,æŠŠâ€¦æ›èµ·
happen,v.,ç™¼ç”Ÿ
have,v.,æœ‰;æ“æœ‰
help,v.,å¹«åŠ©
hide,v.,æŠŠâ€¦è—èµ·ä¾†
hit,v.,æ‰“æ“Š;è¥²æ“Š
hold,v.,èˆ‰è¡Œ;æŠ“ä½
hop,væ¥µ.,è·³é;èºé
hope,v.,å¸Œæœ›
hug,v.,æ“æŠ±
hunt,v.,ç‹©çµ
hurry,v.,æ€¥å¿™;å€‰æ¥µ
ignore,v.,å¿½è¦–
imagine,v.,æƒ³åƒ
improve,v.,æ”¹å–„
include,v.,åŒ…å«
increase,v.,å¢åŠ 
indicate,v.,æŒ‡å‡º
insist,v.,å …æŒ
inspire,v.,æ¿€å‹µ
introduce,v.,ä»‹ç´¹
invent,v.,ç™¼æ˜
invite,v.,é‚€è«‹;æ‹›å¾…
join,v.,åŠ å…¥;é€£çµ
jump,v.,è·³
keep,v.,ä¿æŒ;ä¿ç•™
kick,v.,è¸¢
kill,v.,æ®ºå®³
knock,v.,æ•²;æ“Š;æ‰“
know,v.,çŸ¥é“
lack,v./n.,ç¼ºä¹
laugh,v.,ç¬‘
lay,v.,æ”¾ç½®;ç”¢åµ
lead,v.,é ˜å°
leave,v.,é›¢é–‹
lend,v.,å€Ÿ(å‡º)
let,v.,è®“
lie,v.,èªªè¬Š
lift,v.,èˆ‰èµ·
limit,v./n.,é™åˆ¶;é™åº¦
lock,v./n.,é–ä½;é–
lose,v.,å¤±å»;å–ªå¤±
make,v.,è£½åš;æ³¡(èŒ¶)
master,v.,ç²¾é€š
match,v.,ç›¸é…
mean,v.,è¡¨ç¤ºâ€¦çš„æ„æ€
meet,v.,é‡è¦‹
mind,v.,ç•™æ„;ä»‹æ„
miss,v.,éŒ¯é
mix,v.,æ··åˆ
move,v.,è¡Œå‹•;ç§»å‹•
need,v.,éœ€è¦
nod,v.,é»é ­
notice,v.,æ³¨æ„åˆ°;å‘ŠçŸ¥
obey,v.,æœå¾
object,v.,åå°
offer,v.,æä¾›
omit,v.,çœç•¥;åˆªå»
open,v./adj.,æ‰“é–‹;é–‹æ”¾çš„;é–‹è‘—çš„
own,v./n.,æ“æœ‰;è‡ªå·±
pardon,v.,åŸè«’;å¯¬æ•
pass,v.,é€šé
pause,v.,æš«åœ;ä¸­æ–·
pick,v.,æ‘˜å–;æŒ‘é¸
please,v.,å–æ‚…;è«‹
practice,v.,ç·´ç¿’
praise,v.,è®šç¾
pray,v.,ç¥ˆç¦±;ç¥ˆæ±‚
prepare,v.,æº–å‚™
print,v.,å°åˆ·
produce,v.,è£½é€ ;å‡ºç”¢
promise,v.,æ‰¿è«¾
protect,v.,ä¿è­·
provide,v.,æä¾›;ä¾›çµ¦
pull,v.,æ‹‰å›;æ¨è‘—
pump,v./n.,æŠ½é€; æ‰“æ°£ç­’;æŠ½æ°´æ©Ÿ
punish,v.,è™•ç½°
push,v.,æ¨;æ¨å‹•
put,v.,æŠ•å…¥;æ”¾ç½®
puzzle,v.,ä½¿å›°æƒ‘
raise,v.,èˆ‰èµ·;æŠ¬èµ·
reach,v.,æŠµé”;é”åˆ°
read,v.,é–±è®€
realize,v.,æ˜ç™½;äº†è§£
receive,v.,æ”¶åˆ°
recover,v.,æ¢å¾©
recycle,v.,å›æ”¶
refuse,v.,æ‹’çµ•
reject,v.,æ‹’çµ•
remember,v.,è¨˜å¾—;æƒ³èµ·
remind,v.,æé†’
repair,v./n.,ä¿®ç†
repeat,v.,é‡è¤‡
rest,v.,ä¼‘æ¯
return,v.,è¿”å›
revise,v.,ä¿®è¨‚;æ”¹ç·¨
rise,v.,(å¤ªé™½)å‡èµ·
rob,v.,æ¶åŠ«
roll,v.,æ»¾å‹•;æ‰“æ»¾
rub,v.,ç£¨æ“¦
ruin,v.,æ¯€å£(æ»…)
rush,v.,å‚¬ä¿ƒ;è¡
satisfy,v.,ä½¿æ»¿æ„
save,v.,ç¯€çœ;æ‹¯æ•‘;ä¿å­˜
search,v.,æœå°‹
seek,v.,å°‹æ‰¾
seem,v.,ä¼¼ä¹
select,v.,æŒ‘é¸
send,v.,ç™¼é€;å¯„å‡º
set,v.,è¨­ç½®;å®‰è£
shake,v.,æ¡(æ‰‹);æ–å‹•
share,v.,åˆ†æ“”;åˆ†äº«
shoot,v.,æ³¨å°„;å°„æ“Š;æ‹æ”
shout,v.,å¤§å«
show,v.,é¡¯ç¤º;éœ²å‡º
shut,v.,é—œé–‰
sign,v.,ç°½å
sit,v.,å
slow,v.,æ”¾æ…¢
smile,v./n.,å¾®ç¬‘
solve,v.,è§£æ±º
spell,v.,æ‹¼å¯«
spot,v.,çœ‹åˆ°
spread,v.,è”“å»¶;æ“´æ•£
stand,v.,ç«™
start,v.,é–‹å§‹
state,v.,é™³è¿°
stay,v.,åœç•™;ç•™ä¸‹
steal,v.,å·ç«Š
strike,v.,æ‰“æ“Š;æ•²éŸ¿(é˜);
succeed,v.,æˆåŠŸ
suggest,v.,å»ºè­°
support,v./n.,æ”¯æŒ
surprise,v.,ä»¤â€¦é©šè¨
survive,v.,å€–å­˜
take,v.,æ‹¿å–
teach,v.,æ•™
tear,v.,æ’•è£‚
thank,v.,è¬è¬
think,v.,èªç‚º
throw,v.,æŠ•æ“²;ä¸Ÿå‡º
tie,v.,ç¶ä½
trace,v.,è¿½è¹¤;æç¹ª
trap,n./v.,(è¨­)é™·é˜±
travel,v./n.,æ—…è¡Œ
treasure,v./n.,çæ„›;å¯¶è—
trust,v.,ä¿¡ä»»
try,v.,å˜—è©¦
turn,v.,è½‰å‹•
upload,v.,ä¸Šå‚³
use,v.,ä½¿ç”¨
visit,v.,æ‹œè¨ª;åƒè§€
wait,v.,ç­‰å¾…
wake,v.,é†’ä¾†
walk,v.,èµ°è·¯
want,v.,æƒ³è¦
wash,v.,æ´—
waste,v./n.,æµªè²»; å»¢æ£„ç‰©
water,v.,æ¾†æ°´
wave,v.,æ®èˆ;æ®å‹•
win,v.,ç²å‹;è´
wish,v.,å¸Œæœ›
yell,v.,å¼å«
activity,n.,æ´»å‹•
badminton,n.,ç¾½æ¯›çƒ
ball,n.,çƒ
band,n.,æ¨‚éšŠ;æ¨‚åœ˜
baseball,n.,æ£’çƒ
basketball,n.,ç±ƒçƒ
bowling,n.,ä¿é½¡çƒ
camp,v.,éœ²ç‡Ÿ
classical,adj.,å¤å…¸çš„
climb,v.,æ”€ç™»;æ”€çˆ¬
collect,v.,æ”¶é›†
create,v.,å‰µé€ 
dance,v.,è·³èˆ
dodge ball,n.,èº²é¿çƒ
draw,v.,ç•«ç•«
drum,n.,é¼“
enjoy,v.,å–œæ„›;äº«å—;æ¬£è³
exercise,v.,é‹å‹•
flute,n.,é•·ç¬›
football,n.,ç¾å¼è¶³çƒ
frisbee,n.,é£›ç›¤
fun,n.,æ¨‚è¶£;å¨›æ¨‚
game,n.,éŠæˆ²
golf,n.,é«˜çˆ¾å¤«çƒ
guitar,n.,å‰ä»–
hike,v./n.,å¥è¡Œ; é è¶³
hobby,n.,å—œå¥½
instrument,n.,æ¨‚å™¨
interest,n.,èˆˆè¶£
jazz,n.,çˆµå£«æ¨‚
jog,v.,æ…¢è·‘
love,n.,æ„›
movement,n.,é‹å‹•;æ´»å‹•
movie,n.,é›»å½±
music,n.,éŸ³æ¨‚
paint,v.,ç•«åœ–
piano,n.,é‹¼ç´
play,v.,ç©(å½ˆå¥)
pop music,n.,æµè¡ŒéŸ³æ¨‚
roller blade,n.,ç›´æ’è¼ª
roller skate,n.,è¼ªå¼æºœå†°é‹
run,v.,è·‘
seesaw,n.,è¹ºè¹ºæ¿
sing,v.,å”±æ­Œ
skate,v.,æºœå†°
ski,v.,æ»‘é›ª
slide,n.,æ»‘æ¢¯
soccer,n.,è¶³çƒ
softball,n.,å£˜çƒ
song,n.,æ­Œæ›²
sports,n.,é‹å‹•
string,n.,ç´°ç·š;(æ¨‚å™¨çš„)å¼¦
surf,v.,è¡æµª
swim,n.,æ¸¸æ³³
swing,n.,é¦éŸ†
table tennis,n.,ä¹’ä¹“çƒ
talent,n.,å¤©ä»½;æ‰è—
tennis,n.,ç¶²çƒ
tent,n.,å¸³ç¯·
trip,n.,æ—…ç¨‹
trumpet,n.,å°å–‡å­
vacation,n.,å‡æœŸ
violin,n.,å°æç´
volleyball,n.,æ’çƒ
watch,v.,çœ‹(é›»è¦–) `;

        // ========= å·¥å…·å‡½æ•¸ =========
        function parseWordList(text) {
            const lines = text.split('\n');
            const words = [];
            
            for (const line of lines) {
                const trimmedLine = line.trim();
                if (!trimmedLine) continue;
                
                const parts = trimmedLine.split(',');
                if (parts.length < 3) continue;
                
                const word = parts[0].trim();
                const pos = parts[1].trim();
                const meanings = parts[2].split(';').map(m => m.trim()).filter(m => m);
                
                for (const meaning of meanings) {
                    words.push({ word, pos, meaning });
                }
            }
            return words;
        }

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function formatTime(seconds) {
            seconds = Math.max(0, seconds);
            const m = Math.floor(seconds / 60);
            const s = Math.ceil(seconds % 60);
            return `${m}:${s.toString().padStart(2, '0')}`;
        }

        // ========= è™è å‹•ç•« =========
        let batFlyStyleAdded = false;
        function createBat() {
            const bat = document.createElement('div');
            bat.className = 'bat';
            
            const size = Math.random() * 20 + 10;
            bat.style.width = `${size}px`;
            bat.style.height = `${size}px`;
            bat.style.left = `-${size}px`;
            bat.style.top = `${Math.random() * 80 + 10}%`;
            
            const duration = Math.random() * 5 + 5;
            batsContainer.appendChild(bat);
            
            setTimeout(() => {
                bat.style.animation = `batFly ${duration}s linear forwards`;
            }, 10);
            
            setTimeout(() => {
                bat.remove();
            }, duration * 1000);
        }

        function startBatAnimation() {
            stopBatAnimation();
            batInterval = setInterval(() => {
                createBat();
            }, 2000);
        }
        
        function stopBatAnimation() {
            clearInterval(batInterval);
            batsContainer.innerHTML = '';
        }

        // ========= éŠæˆ²æµç¨‹ =========
        function initGame() {
            vocabulary = parseWordList(wordList);

            if (vocabulary.length === 0) {
                alert('å–®å­—åº«è¼‰å…¥å¤±æ•—ï¼');
                return;
            }

            score = 0;
            scoreDisplay.textContent = score;
            usedInCurrentSession = [];
            correctStreak = 0;
            wrongStreak = 0;
            gameActive = false;
            gameOver = false;
            canAnswer = false;
            lastCountdownNumber = 0;

            if (timer) {
                clearInterval(timer);
                timer = null;
            }
            stopBatAnimation();

            // ä¾ç›®å‰æ™‚é–“æŒ‰éˆ•è¨­å®šæ™‚é–“èˆ‡é¡¯ç¤º
            const activeBtn = document.querySelector('.time-btn.active') || timeButtons[0];
            totalGameTime = parseInt(activeBtn.dataset.time, 10) || 180;
            timeLeft = totalGameTime;
            countdownDisplay.textContent = formatTime(timeLeft);
            timerBar.style.width = '100%';
            timerBar.classList.remove('timer-warning');

            setupScreen.style.display = 'block';
            gameScreen.style.display = 'none';
            gameOverScreen.classList.remove('active');
        }

        function startGame() {
            if (vocabulary.length === 0) {
                alert('å–®å­—åº«è¼‰å…¥å¤±æ•—ï¼');
                return;
            }

            const activeBtn = document.querySelector('.time-btn.active') || timeButtons[0];
            totalGameTime = parseInt(activeBtn.dataset.time, 10) || 180;
            timeLeft = totalGameTime;
            lastCountdownNumber = Math.ceil(timeLeft);

            score = 0;
            scoreDisplay.textContent = score;
            usedInCurrentSession = [];
            correctStreak = 0;
            wrongStreak = 0;
            gameActive = true;
            gameOver = false;
            canAnswer = true;

            setupScreen.style.display = 'none';
            gameScreen.style.display = 'block';
            gameOverScreen.classList.remove('active');

            countdownDisplay.textContent = formatTime(timeLeft);
            timerBar.style.width = '100%';
            timerBar.classList.remove('timer-warning');

            startTime = Date.now();
            if (timer) clearInterval(timer);
            timer = setInterval(updateTimer, 100);

            startBatAnimation();
            nextQuestion();
        }

        function updateTimer() {
            if (!gameActive) {
                clearInterval(timer);
                timer = null;
                return;
            }

            timeLeft -= 0.1;
            if (timeLeft < 0) timeLeft = 0;

            const percentage = (timeLeft / totalGameTime) * 100;
            timerBar.style.width = `${percentage}%`;
            countdownDisplay.textContent = formatTime(timeLeft);

            const currentNumber = Math.ceil(timeLeft);
            if (currentNumber !== lastCountdownNumber) {
                lastCountdownNumber = currentNumber;
                countdownDisplay.className = 'countdown pulse';
                setTimeout(() => {
                    if (!gameOver) countdownDisplay.className = 'countdown';
                }, 300);
            }

            if (percentage < 20) {
                timerBar.classList.add('timer-warning');
            } else {
                timerBar.classList.remove('timer-warning');
            }

            if (timeLeft <= 0) {
                endGame('time');
            }
        }

        function nextQuestion() {
            if (!gameActive || gameOver) return;

            canAnswer = true;
            pumpkinOptions.forEach(option => {
                option.classList.remove('disabled', 'correct', 'wrong');
            });

            if (usedInCurrentSession.length >= vocabulary.length) {
                usedInCurrentSession = [];
            }

            const availableIndices = vocabulary
                .map((_, i) => i)
                .filter(i => !usedInCurrentSession.includes(i));

            if (availableIndices.length === 0) {
                usedInCurrentSession = [];
                nextQuestion();
                return;
            }

            const randomIndex = availableIndices[Math.floor(Math.random() * availableIndices.length)];
            usedInCurrentSession.push(randomIndex);
            currentWord = vocabulary[randomIndex];

            currentWordDisplay.classList.add('fade-out');
            currentPosDisplay.classList.add('fade-out');

            setTimeout(() => {
                currentWordDisplay.textContent = currentWord.word;
                currentPosDisplay.textContent = currentWord.pos;

                prepareOptions();

                currentWordDisplay.classList.remove('fade-out');
                currentPosDisplay.classList.remove('fade-out');
                currentWordDisplay.classList.add('fade-in');
                currentPosDisplay.classList.add('fade-in');

                setTimeout(() => {
                    currentWordDisplay.classList.remove('fade-in');
                    currentPosDisplay.classList.remove('fade-in');
                }, 300);
            }, 200);
        }

        function prepareOptions() {
            if (!currentWord) return;

            const correctAnswer = currentWord.meaning;
            const otherMeanings = vocabulary
                .filter(item => item.meaning !== correctAnswer)
                .map(item => item.meaning);

            const wrongAnswers = [];
            while (wrongAnswers.length < 3 && otherMeanings.length > 0) {
                const randomIndex = Math.floor(Math.random() * otherMeanings.length);
                const selectedMeaning = otherMeanings[randomIndex];
                if (!wrongAnswers.includes(selectedMeaning)) {
                    wrongAnswers.push(selectedMeaning);
                    otherMeanings.splice(randomIndex, 1);
                }
            }

            const allOptions = [correctAnswer, ...wrongAnswers];
            shuffleArray(allOptions);

            for (let i = 0; i < 4; i++) {
                if (i < allOptions.length) {
                    optionDisplays[i].textContent = allOptions[i];
                    optionDisplays[i].parentElement.dataset.meaning = allOptions[i];
                } else {
                    optionDisplays[i].textContent = 'ç„¡é¸é …';
                    optionDisplays[i].parentElement.dataset.meaning = '';
                }
            }
        }

        function checkAnswer(selectedOption) {
            if (!gameActive || !canAnswer || gameOver) return;

            canAnswer = false;
            const selectedMeaning = selectedOption.dataset.meaning;
            const isCorrect = selectedMeaning === currentWord.meaning;

            pumpkinOptions.forEach(option => {
                option.classList.add('disabled');
                const meaning = option.dataset.meaning;
                if (meaning === currentWord.meaning) {
                    option.classList.add('correct');
                } else if (option === selectedOption && !isCorrect) {
                    option.classList.add('wrong');
                }
            });

            if (isCorrect) {
                correctStreak++;
                wrongStreak = 0;

                let addScore = 5;
                if (correctStreak === 1) addScore = 5;
                else if (correctStreak === 2) addScore = 10;
                else if (correctStreak === 3) addScore = 15;
                else addScore = 20;

                score += addScore;
                scoreDisplay.textContent = score;

                createBatsEffect();

                setTimeout(() => {
                    if (!gameOver) nextQuestion();
                }, 700);
            } else {
                wrongStreak++;
                correctStreak = 0;

                let penalty = 5;
                if (wrongStreak === 1) penalty = 5;
                else if (wrongStreak === 2) penalty = 10;
                else if (wrongStreak === 3) penalty = 15;
                else penalty = 20;

                score = Math.max(score - penalty, 0);
                scoreDisplay.textContent = score;

                gameScreen.style.animation = 'shake 0.4s';
                setTimeout(() => {
                    gameScreen.style.animation = '';
                }, 400);

                setTimeout(() => {
                    if (score <= 0) {
                        endGame('score');
                    } else if (!gameOver) {
                        pumpkinOptions.forEach(option => {
                            option.classList.remove('correct', 'wrong', 'disabled');
                        });
                        canAnswer = true;
                        nextQuestion();
                    }
                }, 800);
            }
        }

        function createBatsEffect() {
            for (let i = 0; i < 5; i++) {
                setTimeout(() => {
                    createBat();
                }, i * 100);
            }
        }

        function endGame(reason) {
            if (gameOver) return;
            gameOver = true;
            gameActive = false;
            canAnswer = false;

            if (timer) {
                clearInterval(timer);
                timer = null;
            }
            stopBatAnimation();

            finalScoreDisplay.textContent = score;

            let used;
            if (startTime) {
                used = Math.floor((Date.now() - startTime) / 1000);
            } else {
                used = Math.floor(totalGameTime - timeLeft);
            }
            if (used < 0 || !isFinite(used)) used = 0;
            timeUsedDisplay.textContent = used;

            if (reason === 'time') {
                resultMessage.textContent = 'æ™‚é–“åˆ°ï¼ğŸ‘»';
            } else if (reason === 'score') {
                resultMessage.textContent = 'åˆ†æ•¸æ­¸é›¶äº†ï¼ğŸ§Ÿâ€â™‚ï¸';
            } else {
                resultMessage.textContent = 'Game Over!';
            }

            gameOverScreen.classList.add('active');
        }

        function restartGame() {
            initGame();
        }

        // ========= äº‹ä»¶è™•ç† =========
        document.addEventListener('DOMContentLoaded', function () {
            detectDevice();
            initGame();

            startGameBtn.addEventListener('click', startGame);
            restartBtn.addEventListener('click', restartGame);

            pumpkinOptions.forEach(option => {
                option.addEventListener('click', () => {
                    checkAnswer(option);
                });
            });

            timeButtons.forEach(btn => {
                btn.addEventListener('click', () => {
                    timeButtons.forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');

                    totalGameTime = parseInt(btn.dataset.time, 10) || 180;
                    timeLeft = totalGameTime;
                    countdownDisplay.textContent = formatTime(timeLeft);
                    timerBar.style.width = '100%';
                    timerBar.classList.remove('timer-warning');
                });
            });
        });

        // é˜²æ­¢é›™æ“Šç¸®æ”¾
        let lastTouchEnd = 0;
        document.addEventListener('touchend', function(e) {
            const now = Date.now();
            if (now - lastTouchEnd <= 300) e.preventDefault();
            lastTouchEnd = now;
        }, { passive: false });

        window.addEventListener('resize', function () {
            setTimeout(detectDevice, 100);
        });
    </script>
</body>
</html>
