<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>U11-20 å–®å­—æŒ‘æˆ°ç„¡æ¥µé™ - è¬è–ç¯€ç‰¹åˆ¥ç‰ˆ</title>
    <style>
        /* åŸºç¤æ¨£å¼é‡ç½® */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            font-family: 'Comic Sans MS', cursive, sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            background-size: cover;
            background-attachment: fixed;
            overflow-x: hidden;
            touch-action: manipulation;
        }

        .device-info {
            position: fixed;
            top: 10px;
            left: 10px;
            background: rgba(0,0,0,0.7);
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 12px;
            z-index: 1000;
        }
        
        .game-container {
            background-color: rgba(255, 255, 255, 0.9);
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
            padding: 20px;
            width: 95%;
            max-width: 800px;
            text-align: center;
            position: relative;
            border: 5px solid #f05454;
            overflow: hidden;
            margin: 10px;
        }
        
        h1 {
            color: #f05454;
            margin-bottom: 15px;
            font-size: 1.8rem;
            text-shadow: 2px 2px 0px #fff, 0 0 5px #ff9f43;
            line-height: 1.3;
        }
        
        .word-display {
            font-size: 2rem;
            margin: 15px 0;
            color: #f05454;
            font-weight: bold;
            text-shadow: 2px 2px 0px #fff;
            transition: opacity 0.3s ease;
            line-height: 1.2;
        }
        
        .pos-display {
            font-size: 1.2rem;
            color: #f05454;
            margin-bottom: 10px;
            font-style: italic;
            text-shadow: 1px 1px 0px #fff;
            transition: opacity 0.3s ease;
        }

        .countdown {
            font-size: 1.3rem;
            font-weight: bold;
            color: #f05454;
            margin-bottom: 8px;
            text-shadow: 1px 1px 0px #fff;
        }

        .countdown.pulse {
            animation: pulseText 0.5s;
        }

        @keyframes pulseText {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }
        
        .options-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            margin: 15px 0 10px;
            gap: 10px;
        }
        
        .pumpkin-option {
            width: 45%;
            max-width: 160px;
            height: 140px;
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            margin: 5px;
            filter: drop-shadow(0 5px 5px rgba(0,0,0,0.3));
            touch-action: manipulation;
        }
        
        .pumpkin-option:active {
            transform: translateY(-5px) scale(1.05);
        }
        
        .pumpkin-text {
            position: absolute;
            bottom: 15px;
            left: 0;
            right: 0;
            text-align: center;
            font-size: 0.9rem;
            color: #fff;
            font-weight: bold;
            padding: 8px;
            background-color: rgba(0,0,0,0.8);
            border-radius: 10px;
            margin: 0 10px;
            text-shadow: 1px 1px 0 #000;
            min-height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.5);
            line-height: 1.3;
            overflow: hidden;
            text-overflow: ellipsis;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
        }
        
        .timer-container {
            width: 100%;
            height: 15px;
            background-color: #f0f0f0;
            border-radius: 10px;
            margin: 10px 0 15px;
            overflow: hidden;
            border: 2px solid #f05454;
        }
        
        .timer-bar {
            height: 100%;
            width: 100%;
            background: linear-gradient(to right, #f05454, #ff9f43);
            transition: width 0.1s linear;
            border-radius: 8px;
        }

        .timer-warning {
            animation: pulse 0.5s infinite alternate;
        }
        
        @keyframes pulse {
            from { opacity: 1; }
            to { opacity: 0.5; }
        }
        
        .ghost {
            position: absolute;
            width: 60px;
            height: 60px;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path fill="%23f0f0f0" d="M40.1 467.1l-11.2 9c-3.2 2.5-7.1 3.9-11.1 3.9-8.3 0-15.8-6-15.8-16.1c0-5.5 2.5-10.5 6.9-14.1C40.5 439.8 76.6 384 76.6 256c0-168.3-17.7-208-76.6-208C0 48 0 48 0 32C0 14.3 14.3 0 32 0h320c17.7 0 32 14.3 32 32c0 16 0 16-76.6 0c-58.9 0-76.6 39.7-76.6 208c0 128 36.1 183.8 66.3 209.8c4.4 3.6 6.9 8.6 6.9 14.1c0 10.1-7.5 16.1-15.8 16.1c-4 0-7.9-1.4-11.1-3.9l-11.2-9c-6.9-5.5-17.1-5.5-24 0c-6.9 5.5-17.1 5.5-24 0l-11.2-9c-6.9-5.5-17.1-5.5-24 0c-6.9 5.5-17.1 5.5-24 0l-11.2-9c-6.9-5.5-17.1-5.5-24 0c-6.9 5.5-17.1 5.5-24 0l-11.2-9c-6.9-5.5-17.1-5.5-24 0c-6.9 5.5-17.1 5.5-24 0zM128 128c-17.7 0-32 14.3-32 32s14.3 32 32 32s32-14.3 32-32s-14.3-32-32-32zm128 0c-17.7 0-32 14.3-32 32s14.3 32 32 32s32-14.3 32-32s-14.3-32-32-32z"/></svg>');
            background-size: contain;
            background-repeat: no-repeat;
            bottom: 15px;
            left: 50%;
            transform: translateX(-50%);
            animation: float 2s infinite alternate ease-in-out;
            z-index: 10;
            filter: drop-shadow(0 0 10px rgba(255,255,255,0.5));
        }
        
        @keyframes float {
            0% { transform: translate(-50%, 0); }
            100% { transform: translate(-50%, -15px); }
        }
        
        .score-display {
            font-size: 1.2rem;
            color: #f05454;
            margin: 8px 0 10px;
            font-weight: bold;
            text-shadow: 1px 1px 0px #fff;
        }
        
        .game-over {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 100;
            flex-direction: column;
            color: white;
            font-size: 1.5rem;
            text-shadow: 2px 2px 0px #000;
            padding: 20px;
            text-align: center;
        }

        .game-over.active {
            display: flex;
        }
        
        .game-over h2 {
            font-size: 2.2rem;
            margin-bottom: 15px;
            color: #f05454;
        }
        
        .restart-btn, .start-btn {
            padding: 14px 28px;
            background-color: #f05454;
            color: white;
            border: none;
            border-radius: 50px;
            font-size: 1.2rem;
            cursor: pointer;
            margin-top: 20px;
            transition: all 0.3s;
            text-shadow: 1px 1px 0px #000;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            touch-action: manipulation;
            min-width: 180px;
        }
        
        .restart-btn:active, .start-btn:active {
            background-color: #ff9f43;
            transform: scale(0.98);
        }
        
        .bats {
            position: absolute;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 5;
        }
        
        .bat {
            position: absolute;
            width: 25px;
            height: 25px;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path fill="%23f05454" d="M320 160c28.7 0 54.9 10 75.4 26.6 5.1 4.2 11.3 5.3 17 3.1 18.8-7.2 39.7-10.6 60.9-10.6 8.3 0 16.8.7 25.1 2.1 5.9.9 11.6-2 14.3-7.3 9.5-19 15.3-40.6 15.3-63.9 0-61.9-50.1-112-112-112-16.7 0-32.8 3.7-47.4 10.5-4.5 2.1-9.8 1.3-13.8-1.9-11.1-8.9-24.6-14.6-39.2-14.6s-28.1 5.7-39.2 14.6c-4 3.2-9.3 4-13.8 1.9-14.6-6.8-30.7-10.5-47.4-10.5-61.9 0-112 50.1-112 112 0 23.3 5.8 44.9 15.3 63.9 2.7 5.3 8.4 8.2 14.3 7.3 8.3-1.4 16.8-2.1 25.1-2.1 21.2 0 42.1 3.4 60.9 10.6 5.7 2.2 11.9 1.1 17-3.1C265.1 170 291.3 160 320 160zm0-48c13.2 0 24 10.8 24 24s-10.8 24-24 24-24-10.8-24-24 10.8-24 24-24zm-144 56c-28.7 0-54.9 10-75.4 26.6-5.1 4.2-11.3 5.3-17 3.1-18.8-7.2-39.7-10.6-60.9-10.6-8.3 0-16.8.7-25.1 2.1-5.9.9-11.6-2-14.3-7.3C2.8 172.9 0 150.7 0 128 0 66.1 50.1 16 112 16c16.7 0 32.8 3.7 47.4 10.5 4.5 2.1 9.8 1.3 13.8-1.9 11.1-8.9 24.6-14.6 39.2-14.6s28.1 5.7 39.2 14.6c4 3.2 9.3 4 13.8 1.9 14.6-6.8 30.7-10.5 47.4-10.5 61.9 0 112 50.1 112 112 0 22.7-2.8 44.9-8.3 65.5-2.7 5.3-8.4 8.2-14.3 7.3-8.3-1.4-16.8-2.1-25.1-2.1-21.2 0-42.1 3.4-60.9 10.6-5.7 2.2-11.9 1.1-17-3.1-20.5-16.6-46.7-26.6-75.4-26.6zm-24 80c-13.2 0-24-10.8-24-24s10.8-24 24-24 24 10.8 24 24-10.8 24-24 24zm256 0c-13.2 0-24-10.8-24-24s10.8-24 24-24 24 10.8 24 24-10.8 24-24 24zm-224 32c-119 0-216 96.9-216 216 0 57.3 22.5 109.4 59 148 3.1 3.3 7.9 4.1 11.9 2 17.8-9.2 37.6-14 58.1-14 8.3 0 16.5.7 24.6 1.9 5.1.8 10-1.9 12-6.7 7.1-17.3 20.6-31.8 37.9-38.9 1.3-.5 2.7-.8 4-1.1V320c0-52.9 43.1-96 96-96s96 43.1 96 96v56.2c1.3.4 2.7.7 4 1.1 17.3 7.1 30.8 21.6 37.9 38.9 2 4.8 6.9 7.5 12 6.7 8.1-1.2 16.3-1.9 24.6-1.9 20.5 0 40.3 4.8 58.1 14 4 2.1 8.8 1.3 11.9-2 36.5-38.6 59-90.7 59-148 0-119.1-97-216-216-216z"/></svg>');
            background-size: contain;
            background-repeat: no-repeat;
            opacity: 0;
        }
        
        /* å››ç¨®ä¸åŒé¡è‰²çš„å—ç“œç‡ˆ */
        .pumpkin-1 { background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="%23f05454" d="M352 0c-27.8 0-53.3 8.6-74.5 23.1C256.5 8.6 231 0 203.2 0 91 0 0 91 0 203.2c0 132.4 125.8 200.5 203.4 308.8 11 15.4 28.4 25.6 48.4 25.6h8.4c20 0 37.4-10.2 48.4-25.6C386.2 403.7 512 335.6 512 203.2 512 91 421 0 352 0zm-96 480c-3.5 0-6.8-1.8-9.1-4.8-4.1-5.8-102.3-145.7-102.3-272 0-81.9 66.6-148.5 148.5-148.5S441 121.3 441 203.2c0 126.3-98.2 266.2-102.3 272-2.3 3-5.6 4.8-9.1 4.8h-83.2z"/><path fill="%23ff9f43" d="M203.4 308.8C125.8 200.5 0 132.4 0 203.2 0 91 91 0 203.2 0c27.8 0 53.3 8.6 74.5 23.1 21.2-14.5 46.7-23.1 74.5-23.1 69 0 160 91 160 203.2 0 132.4-125.8 200.5-203.4 308.8-11 15.4-28.4 25.6-48.4 25.6h-8.4c-20 0-37.4-10.2-48.4-25.6zM352 56c-16.5 0-32.3 3.3-46.8 9.2 5.3 5.1 10.4 10.4 15.2 16.1C338.3 70.8 345 68 352 68c74.9 0 136 61.1 136 136 0 28.9-9.3 56.3-25.4 78.9 5.8-16.5 9.4-34.2 9.4-52.6C472 121.3 405.4 56 352 56zM203.2 56c-16.5 0-32.3 3.3-46.8 9.2 5.3 5.1 10.4 10.4 15.2 16.1 19.9-10.3 42.4-16.1 66.4-16.1 53.4 0 99.5 30.7 120.9 75.4 10.1-16.4 16.2-35.1 16.2-55.4 0-16.5-3.3-32.3-9.2-46.8C293.5 59.3 268 56 240.2 56h-37z"/><circle fill="%23000" cx="160" cy="160" r="16"/><circle fill="%23000" cx="352" cy="160" r="16"/><path fill="%23000" d="M256 240c-35.3 0-64 28.7-64 64s28.7 64 64 64 64-28.7 64-64-28.7-64-64-64zm0 96c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"/></svg>'); }
        .pumpkin-2 { background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="%23ff9f43" d="M352 0c-27.8 0-53.3 8.6-74.5 23.1C256.5 8.6 231 0 203.2 0 91 0 0 91 0 203.2c0 132.4 125.8 200.5 203.4 308.8 11 15.4 28.4 25.6 48.4 25.6h8.4c20 0 37.4-10.2 48.4-25.6C386.2 403.7 512 335.6 512 203.2 512 91 421 0 352 0zm-96 480c-3.5 0-6.8-1.8-9.1-4.8-4.1-5.8-102.3-145.7-102.3-272 0-81.9 66.6-148.5 148.5-148.5S441 121.3 441 203.2c0 126.3-98.2 266.2-102.3 272-2.3 3-5.6 4.8-9.1 4.8h-83.2z"/><path fill="%23f05454" d="M203.4 308.8C125.8 200.5 0 132.4 0 203.2 0 91 91 0 203.2 0c27.8 0 53.3 8.6 74.5 23.1 21.2-14.5 46.7-23.1 74.5-23.1 69 0 160 91 160 203.2 0 132.4-125.8 200.5-203.4 308.8-11 15.4-28.4 25.6-48.4 25.6h-8.4c-20 0-37.4-10.2-48.4-25.6zM352 56c-16.5 0-32.3 3.3-46.8 9.2 5.3 5.1 10.4 10.4 15.2 16.1C338.3 70.8 345 68 352 68c74.9 0 136 61.1 136 136 0 28.9-9.3 56.3-25.4 78.9 5.8-16.5 9.4-34.2 9.4-52.6C472 121.3 405.4 56 352 56zM203.2 56c-16.5 0-32.3 3.3-46.8 9.2 5.3 5.1 10.4 10.4 15.2 16.1 19.9-10.3 42.4-16.1 66.4-16.1 53.4 0 99.5 30.7 120.9 75.4 10.1-16.4 16.2-35.1 16.2-55.4 0-16.5-3.3-32.3-9.2-46.8C293.5 59.3 268 56 240.2 56h-37z"/><circle fill="%23000" cx="160" cy="160" r="16"/><circle fill="%23000" cx="352" cy="160" r="16"/><path fill="%23000" d="M256 240c-35.3 0-64 28.7-64 64s28.7 64 64 64 64-28.7 64-64-28.7-64-64-64zm0 96c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"/></svg>'); }
        .pumpkin-3 { background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="%23e67e22" d="M352 0c-27.8 0-53.3 8.6-74.5 23.1C256.5 8.6 231 0 203.2 0 91 0 0 91 0 203.2c0 132.4 125.8 200.5 203.4 308.8 11 15.4 28.4 25.6 48.4 25.6h8.4c20 0 37.4-10.2 48.4-25.6C386.2 403.7 512 335.6 512 203.2 512 91 421 0 352 0zm-96 480c-3.5 0-6.8-1.8-9.1-4.8-4.1-5.8-102.3-145.7-102.3-272 0-81.9 66.6-148.5 148.5-148.5S441 121.3 441 203.2c0 126.3-98.2 266.2-102.3 272-2.3 3-5.6 4.8-9.1 4.8h-83.2z"/><path fill="%23d35400" d="M203.4 308.8C125.8 200.5 0 132.4 0 203.2 0 91 91 0 203.2 0c27.8 0 53.3 8.6 74.5 23.1 21.2-14.5 46.7-23.1 74.5-23.1 69 0 160 91 160 203.2 0 132.4-125.8 200.5-203.4 308.8-11 15.4-28.4 25.6-48.4 25.6h-8.4c-20 0-37.4-10.2-48.4-25.6zM352 56c-16.5 0-32.3 3.3-46.8 9.2 5.3 5.1 10.4 10.4 15.2 16.1C338.3 70.8 345 68 352 68c74.9 0 136 61.1 136 136 0 28.9-9.3 56.3-25.4 78.9 5.8-16.5 9.4-34.2 9.4-52.6C472 121.3 405.4 56 352 56zM203.2 56c-16.5 0-32.3 3.3-46.8 9.2 5.3 5.1 10.4 10.4 15.2 16.1 19.9-10.3 42.4-16.1 66.4-16.1 53.4 0 99.5 30.7 120.9 75.4 10.1-16.4 16.2-35.1 16.2-55.4 0-16.5-3.3-32.3-9.2-46.8C293.5 59.3 268 56 240.2 56h-37z"/><circle fill="%23000" cx="160" cy="160" r="16"/><circle fill="%23000" cx="352" cy="160" r="16"/><path fill="%23000" d="M256 240c-35.3 0-64 28.7-64 64s28.7 64 64 64 64-28.7 64-64-28.7-64-64-64zm0 96c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"/></svg>'); }
        .pumpkin-4 { background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="%23d35400" d="M352 0c-27.8 0-53.3 8.6-74.5 23.1C256.5 8.6 231 0 203.2 0 91 0 0 91 0 203.2c0 132.4 125.8 200.5 203.4 308.8 11 15.4 28.4 25.6 48.4 25.6h8.4c20 0 37.4-10.2 48.4-25.6C386.2 403.7 512 335.6 512 203.2 512 91 421 0 352 0zm-96 480c-3.5 0-6.8-1.8-9.1-4.8-4.1-5.8-102.3-145.7-102.3-272 0-81.9 66.6-148.5 148.5-148.5S441 121.3 441 203.2c0 126.3-98.2 266.2-102.3 272-2.3 3-5.6 4.8-9.1 4.8h-83.2z"/><path fill="%23e67e22" d="M203.4 308.8C125.8 200.5 0 132.4 0 203.2 0 91 91 0 203.2 0c27.8 0 53.3 8.6 74.5 23.1 21.2-14.5 46.7-23.1 74.5-23.1 69 0 160 91 160 203.2 0 132.4-125.8 200.5-203.4 308.8-11 15.4-28.4 25.6-48.4 25.6h-8.4c-20 0-37.4-10.2-48.4-25.6zM352 56c-16.5 0-32.3 3.3-46.8 9.2 5.3 5.1 10.4 10.4 15.2 16.1C338.3 70.8 345 68 352 68c74.9 0 136 61.1 136 136 0 28.9-9.3 56.3-25.4 78.9 5.8-16.5 9.4-34.2 9.4-52.6C472 121.3 405.4 56 352 56zM203.2 56c-16.5 0-32.3 3.3-46.8 9.2 5.3 5.1 10.4 10.4 15.2 16.1 19.9-10.3 42.4-16.1 66.4-16.1 53.4 0 99.5 30.7 120.9 75.4 10.1-16.4 16.2-35.1 16.2-55.4 0-16.5-3.3-32.3-9.2-46.8C293.5 59.3 268 56 240.2 56h-37z"/><circle fill="%23000" cx="160" cy="160" r="16"/><circle fill="%23000" cx="352" cy="160" r="16"/><path fill="%23000" d="M256 240c-35.3 0-64 28.7-64 64s28.7 64 64 64 64-28.7 64-64-28.7-64-64-64zm0 96c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"/></svg>'); }
        
        /* å—ç“œç‡ˆä¸Šçš„èŠ±ç´‹ */
        .pumpkin-option::before {
            content: "";
            position: absolute;
            width: 100%;
            height: 100%;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="%23000" d="M256 0c-16.5 0-32.3 3.3-46.8 9.2 5.3 5.1 10.4 10.4 15.2 16.1 19.9-10.3 42.4-16.1 66.4-16.1 53.4 0 99.5 30.7 120.9 75.4 10.1-16.4 16.2-35.1 16.2-55.4 0-16.5-3.3-32.3-9.2-46.8C293.5 59.3 268 56 240.2 56h-37z"/></svg>');
            background-size: 80%;
            background-repeat: no-repeat;
            background-position: center;
            opacity: 0.2;
        }
        
        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            50% { transform: translateX(5px); }
            75% { transform: translateX(-5px); }
            100% { transform: translateX(0); }
        }
        
        @keyframes batFly {
            0% { transform: translate(0, 0) rotate(0deg); opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { transform: translate(100vw, -100vh) rotate(360deg); opacity: 0; }
        }
        
        /* ç¦ç”¨ç‹€æ…‹çš„å—ç“œç‡ˆ */
        .pumpkin-option.disabled {
            pointer-events: none;
            opacity: 0.7;
            filter: grayscale(50%);
        }

        .pumpkin-option.correct {
            transform: scale(1.08);
            filter: drop-shadow(0 0 15px #ff9f43);
        }

        .pumpkin-option.wrong {
            animation: shake 0.3s;
            filter: drop-shadow(0 0 10px #ff0000);
        }
        
        /* é¡Œç›®åˆ‡æ›å‹•ç•« */
        .fade-out {
            opacity: 0;
            transform: translateY(-10px);
            transition: all 0.3s ease;
        }
        
        .fade-in {
            opacity: 1;
            transform: translateY(0);
            transition: all 0.3s ease;
        }
        
        .score-display span {
            padding: 2px 10px;
            border-radius: 20px;
            background-color: rgba(255,255,255,0.8);
        }

        /* éŠæˆ²æ™‚é–“é¸æ“‡ */
        .time-selector {
            margin-top: 15px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 6px;
            font-size: 0.95rem;
            color: #f05454;
        }

        .time-selector span {
            margin-bottom: 4px;
        }

        .time-btn {
            background-color: #ffe0d4;
            color: #333;
            border: none;
            padding: 6px 14px;
            margin: 0 4px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9rem;
            box-shadow: 0 3px 0 #f5b79a;
            font-family: 'Comic Sans MS', cursive;
        }

        .time-btn.active {
            background-color: #ffb08a;
            box-shadow: 0 3px 0 #f05454;
            color: #fff;
        }

        .time-btn:active {
            transform: translateY(2px);
            box-shadow: 0 1px 0 #f5b79a;
        }
        
        /* éŸ¿æ‡‰å¼è¨­è¨ˆ - å¹³æ¿ */
        @media (min-width: 768px) {
            .game-container {
                padding: 25px;
            }
            
            h1 {
                font-size: 2.2rem;
            }
            
            .word-display {
                font-size: 2.3rem;
            }
            
            .pos-display {
                font-size: 1.4rem;
            }

            .countdown {
                font-size: 1.5rem;
            }
            
            .pumpkin-option {
                width: 22%;
                height: 150px;
            }
            
            .pumpkin-text {
                font-size: 1rem;
            }
            
            .ghost {
                width: 70px;
                height: 70px;
            }
            
            .score-display {
                font-size: 1.4rem;
            }
            
            .restart-btn, .start-btn {
                font-size: 1.3rem;
                padding: 16px 32px;
            }
        }
        
        /* éŸ¿æ‡‰å¼è¨­è¨ˆ - é›»è…¦ï¼ˆå¤§å­—ç‰ˆï¼‰ */
        @media (min-width: 1024px) {
            .game-container {
                padding: 30px;
                max-width: 900px;
            }
            
            h1 {
                font-size: 2.8rem;
            }
            
            .word-display {
                font-size: 2.8rem;
                margin: 20px 0 10px;
            }
            
            .pos-display {
                font-size: 1.6rem;
                margin-bottom: 10px;
            }

            .countdown {
                font-size: 1.8rem;
            }
            
            .pumpkin-option {
                width: 22%;
                height: 170px;
                max-width: 200px;
            }
            
            .pumpkin-option:hover {
                transform: translateY(-10px) scale(1.1);
            }
            
            .pumpkin-text {
                font-size: 1.1rem;
            }
            
            .ghost {
                width: 80px;
                height: 80px;
            }
            
            .score-display {
                font-size: 1.6rem;
            }
            
            .restart-btn, .start-btn {
                font-size: 1.5rem;
                padding: 18px 36px;
            }
            
            .restart-btn:hover, .start-btn:hover {
                background-color: #ff9f43;
                transform: scale(1.05);
            }
        }
        
        /* éŸ¿æ‡‰å¼è¨­è¨ˆ - å°æ‰‹æ©Ÿ */
        @media (max-width: 480px) {
            .game-container {
                padding: 15px;
            }
            
            h1 {
                font-size: 1.5rem;
            }
            
            .word-display {
                font-size: 1.8rem;
            }
            
            .pos-display {
                font-size: 1.1rem;
            }

            .countdown {
                font-size: 1.2rem;
            }
            
            .pumpkin-option {
                width: 45%;
                height: 130px;
            }
            
            .pumpkin-text {
                font-size: 0.85rem;
                bottom: 12px;
            }
            
            .ghost {
                width: 50px;
                height: 50px;
            }
            
            .score-display {
                font-size: 1.1rem;
            }
            
            .restart-btn, .start-btn {
                font-size: 1.1rem;
                padding: 12px 24px;
                min-width: 160px;
            }

            .time-selector {
                font-size: 0.85rem;
            }

            .time-btn {
                padding: 4px 10px;
                font-size: 0.8rem;
            }
        }
        
        /* éŸ¿æ‡‰å¼è¨­è¨ˆ - è¶…å°æ‰‹æ©Ÿ */
        @media (max-width: 360px) {
            .pumpkin-option {
                width: 45%;
                height: 120px;
            }
            
            .pumpkin-text {
                font-size: 0.8rem;
            }
            
            .ghost {
                width: 45px;
                height: 45px;
            }
        }

        /* æ©«å‘æ™‚å¾®èª¿ */
        @media (orientation: landscape) and (max-height: 450px) {
            .game-container {
                padding: 10px;
            }

            h1 {
                font-size: 1.4rem;
            }

            .word-display {
                font-size: 1.6rem;
            }

            .pumpkin-option {
                height: 110px;
            }
        }

        /* è§¸æ§è¨­å‚™ï¼šæŒ‰éˆ•æ›´é«˜ */
        @media (pointer: coarse) {
            .restart-btn, .start-btn {
                min-height: 50px;
            }
        }
    </style>
</head>
<body>
    <div class="device-info" id="deviceInfo">æª¢æ¸¬è¨­å‚™ä¸­...</div>

    <div class="game-container">
        <h1>L5 U11-20 å–®å­—æŒ‘æˆ°ç„¡æ¥µé™ ğŸƒ</h1>
        <div class="score-display">Score: <span id="score">0</span></div>

        <!-- èµ·å§‹ç•«é¢ -->
        <div id="setup-screen">
            <p>æº–å‚™å¥½æŒ‘æˆ°ä½ çš„è¬è–ç¯€å–®å­—å†’éšªäº†å—ï¼Ÿ</p>
            <div class="time-selector">
                <span>é¸æ“‡éŠæˆ²æ™‚é–“ï¼š</span>
                <div>
                    <button class="time-btn active" data-time="180">3 åˆ†é˜</button>
                    <button class="time-btn" data-time="300">5 åˆ†é˜</button>
                    <button class="time-btn" data-time="600">10 åˆ†é˜</button>
                </div>
            </div>
            <button class="start-btn" id="start-game">Start Game</button>
        </div>

        <!-- éŠæˆ²ç•«é¢ -->
        <div id="game-screen" style="display: none;">
            <div class="word-display" id="current-word">å–®å­—</div>
            <div class="pos-display" id="current-pos">è©æ€§</div>
            <div class="countdown" id="countdown">3:00</div>
            <div class="timer-container">
                <div class="timer-bar" id="timer-bar"></div>
            </div>
            <div class="options-container">
                <div class="pumpkin-option pumpkin-1" data-option="1">
                    <div class="pumpkin-text" id="option-1">é¸é …1</div>
                </div>
                <div class="pumpkin-option pumpkin-2" data-option="2">
                    <div class="pumpkin-text" id="option-2">é¸é …2</div>
                </div>
                <div class="pumpkin-option pumpkin-3" data-option="3">
                    <div class="pumpkin-text" id="option-3">é¸é …3</div>
                </div>
                <div class="pumpkin-option pumpkin-4" data-option="4">
                    <div class="pumpkin-text" id="option-4">é¸é …4</div>
                </div>
            </div>
            <div class="ghost"></div>
            <div class="bats" id="bats-container"></div>
        </div>

        <!-- çµæŸç•«é¢ -->
        <div class="game-over" id="game-over">
            <h2 id="result-message">Game Over!</h2>
            <div>Final Score: <span id="final-score">0</span></div>
            <div>ç”¨æ™‚: <span id="time-used">0</span> ç§’</div>
            <button class="restart-btn" id="restart-btn">å†ç©ä¸€æ¬¡</button>
        </div>
    </div>

    <script>
        // ========= è¨­å‚™åµæ¸¬ =========
        function detectDevice() {
            const userAgent = navigator.userAgent.toLowerCase();
            const deviceInfo = document.getElementById('deviceInfo');
            let deviceType = 'desktop';
            let screenInfo = '';
            
            if (/mobile|android|iphone|ipad/.test(userAgent)) {
                if (/ipad|tablet/.test(userAgent) || (window.innerWidth >= 768 && window.innerWidth <= 1024)) {
                    deviceType = 'tablet';
                    screenInfo = 'å¹³æ¿è¨­å‚™';
                } else {
                    deviceType = 'mobile';
                    screenInfo = 'æ‰‹æ©Ÿè¨­å‚™';
                }
            } else {
                deviceType = 'desktop';
                screenInfo = 'æ¡Œé¢è¨­å‚™';
            }
            
            document.body.classList.add(deviceType + '-view');
            
            const screenSize = `è¢å¹•: ${window.innerWidth} Ã— ${window.innerHeight}`;
            const dpr = `åƒç´ æ¯”: ${window.devicePixelRatio}`;
            deviceInfo.textContent = `${screenInfo} | ${screenSize} | ${dpr}`;
            
            adjustForDevice(deviceType);
            return deviceType;
        }

        function adjustForDevice(deviceType) {
            const gameContainer = document.querySelector('.game-container');
            if (!gameContainer) return;
            switch (deviceType) {
                case 'desktop':
                    gameContainer.style.maxWidth = '900px';
                    break;
                case 'tablet':
                    gameContainer.style.maxWidth = '800px';
                    break;
                case 'mobile':
                    gameContainer.style.maxWidth = '100%';
                    break;
            }
        }

        // ========= éŠæˆ²è®Šæ•¸ =========
        let vocabulary = [];
        let currentWord = null;
        let score = 0;
        let totalGameTime = 180; // é è¨­ 3 åˆ†é˜
        let timeLeft = totalGameTime;
        let timer = null;
        let startTime = null;
        let gameActive = false;
        let gameOver = false;
        let batInterval = null;
        let canAnswer = false;
        let usedInCurrentSession = [];
        let correctStreak = 0;
        let wrongStreak = 0;
        let lastCountdownNumber = 0;

        // ========= DOMå…ƒç´  =========
        const setupScreen = document.getElementById('setup-screen');
        const gameScreen = document.getElementById('game-screen');
        const gameOverScreen = document.getElementById('game-over');
        const startGameBtn = document.getElementById('start-game');
        const restartBtn = document.getElementById('restart-btn');
        const currentWordDisplay = document.getElementById('current-word');
        const currentPosDisplay = document.getElementById('current-pos');
        const optionDisplays = [
            document.getElementById('option-1'),
            document.getElementById('option-2'),
            document.getElementById('option-3'),
            document.getElementById('option-4')
        ];
        const scoreDisplay = document.getElementById('score');
        const finalScoreDisplay = document.getElementById('final-score');
        const resultMessage = document.getElementById('result-message');
        const timerBar = document.getElementById('timer-bar');
        const batsContainer = document.getElementById('bats-container');
        const pumpkinOptions = document.querySelectorAll('.pumpkin-option');
        const countdownDisplay = document.getElementById('countdown');
        const timeUsedDisplay = document.getElementById('time-used');
        const timeButtons = document.querySelectorAll('.time-btn');

        // ========= å–®å­—åº« =========
        const wordList = `antique,adj,å¹´ä»£ä¹…é çš„;å¤è‘£çš„
exceptional,adj,ä¾‹å¤–çš„;ç•°å¸¸çš„;ç‰¹æ®Šçš„
intent,adj,å°ˆæ³¨çš„;ç†±åˆ‡çš„;å …æ±ºè¦åšçš„
obstinate,adj,é ‘å›ºçš„;é ‘å¼·çš„
toxic,adj,æ¯’(æ€§)çš„
upright,adj,æŒºç›´çš„;ç›´ç«‹çš„;æ­£ç›´çš„
flake,v,ä½¿æˆè–„ç‰‡;åƒé›ªèŠ±èˆ¬è¦†è“‹; å‰è½
glitter,v,é–ƒçˆ;å…‰å½©å¥ªç›®
overflow,v,æ¼«å‡º; æº¢å‡º
reign,v,å›è‡¨;çµ±æ²»
sober,v,ä½¿é†’é…’;ä½¿æ¸…é†’;è®Šå¾—åš´è‚…
stall,v,æŠŠ...é—œå…¥ç•œèˆ;ä½¿æ‹‹éŒ¨;æ”¯å¾;æ‹–å»¶
stew,v,(ç”¨æ–‡ç«)ç‡‰
whisk,v,æ’¢;æ‰“(è›‹ç­‰); è¿…é€Ÿç§»å‹•
bodyguard,n,ä¿é¢;è­·è¡›éšŠ
carnival,n,ç‹‚æ­¡ç¯€;å˜‰å¹´è¯æœƒ
gay,n,åŒæ€§æˆ€è€…
gross,n,ç¸½é¡;ç¸½é‡
hover,n,ç›¤æ—‹;å¾˜å¾Š
laser,n,é›·å°„
lizard,n,èœ¥èœ´
shield,n,ç›¾;ä¿è­·è€…;æ“‹æ¿
torrent,n,æ´ªæµ;(è©±èªçš„)é€£ç™¼;(æ„Ÿæƒ…çš„)ç‹‚æ½®
vow,n,èª“è¨€;èª“ç´„
counterclockwise,adj. adv,é€†æ™‚é‡æ–¹å‘çš„ (åœ°)
grim,adj,ç„¡æƒ…çš„;åš´å²çš„;ææ€–çš„
noticeable,adj,é¡¯è€Œæ˜“è¦‹çš„;é¡¯è‘—çš„
potential,adj,æ½›åœ¨çš„;å¯èƒ½çš„
compromise,v,å¦¥å”;å±åŠ;æ´©éœ²(ç¥•å¯†ç­‰)
decay,v,è…æœ½;è¡°é€€
grip,v,æ¡ç‰¢;(å’¬æˆ–å¤¾)ç·Š
insure,v,æŠ•ä¿;ç¢ºä¿
kindle,v,é»ç‡ƒ;ç…½å‹•;ç…§äº®
navigate,v,èˆªè¡Œæ–¼;é£›è¡Œæ–¼;æ“ç¸±;å°èˆª
paddle,v,ç”¨æ§³åˆ’(èˆ¹)
restrain,v,æŠ‘åˆ¶;ç´„æŸ
slaughter,v,å± å®°;å± æ®º
streak,v,å½¢æˆæ¢ç´‹;ç–¾é§›;é–ƒç¾
stun,v,ä½¿æ˜è¿·;ä½¿å¤§åƒä¸€é©š
prior,adv,åœ¨å‰;å±…å…ˆ
whereabouts,adv,åœ¨å“ªè£¡
cellar,n,åœ°ä¸‹å®¤;åœ°çª–;é…’çª–
cello,n,å¤§æç´
Centigrade,n,æ”æ°åº¦
checkbook,n,æ”¯ç¥¨ç°¿
chef,n,(é¤é¤¨ç­‰çš„)ä¸»å»š;å¤§å¸«å‚…
chili,n,ç´…è¾£æ¤’
ethic,n,å€«ç†æ¨™æº–
fiddle,n,å°æç´;æ¬ºè©
garment,n,æœè£;è¡£è‘—
masterpiece,n,å‚‘ä½œ;åä½œ
prophet,n,å…ˆçŸ¥
shortcoming,n,ç¼ºé»;çŸ­è™•
stereotype,n,é™³è¦;é‰›ç‰ˆå°åˆ·
vapor,n,æ°´æ±½; æ°´è’¸æ°£ (ç¾å¼æ‹¼å¯«)
villain,n,å£äºº;åæ´¾è§’è‰²
cozy,adj,èˆ’é©çš„;æ„œæ„çš„
indifferent,adj,ä¸æ„Ÿèˆˆè¶£çš„;ä¸­ç«‹çš„;ç„¡é—œç·Šè¦çš„
commute,v,æ¸›åˆ‘;é€šå‹¤
consent,v,åŒæ„;è´Šæˆ
magnify,v,æ”¾å¤§;æ“´å¤§;èª‡å¼µ
mingle,v,ä½¿æ··åˆ;ä½¿ç›¸æ··;äº¤å¾€
pledge,v,ä¿è­‰çµ¦äºˆ;è¨±è«¾;ç™¼èª“
prop,v,æ”¯æ’;ç¶­æŒ;æ¶;æ“±
stagger,v,æ–æ–æ™ƒæ™ƒ;è¹£è·šè€Œè¡Œ
strand,v,ä½¿æ“±æ·º;è™•æ–¼å›°å¢ƒ
tile,v,é‹ªç Œç“¦(æˆ–ç“·ç£šç­‰)
versus,prep,(å¸¸ç•¥ä½œv.æˆ–vs.)èˆ‡...ç›¸å°
via,prep,ç¶“ç”±;å–é“;æ†‘è—‰
admiral,n,è‰¦éšŠå¸ä»¤; æµ·è»ä¸Šå°‡
banquet,n. v,(èˆ‰è¾¦) ç››å®´
bazaar,n,(ä¸­æ±çš„)å¸‚å ´;å•†åº—è¡—;ç¾©è³£
commission,n,ä½£é‡‘
fiancÃ©,n,æœªå©šå¤«
fume,n,ç…™;æ°£;æ†¤æ€’
gorilla,n,å¤§çŒ©çŒ©
gypsy,n,å‰æ™®è³½äºº;æµæµªè€…
maintenance,n,ç¶­æŒ;ç¶­ä¿®;ä¿é¤Š
mustard,n,èŠ¥æœ«;èŠ¥èœ;èŠ¥æœ«è‰²
shriek,n,å°–å«è²
stray,n,è¿·è·¯è€…;æµæµªè€…;èµ°å¤±çš„å®¶ç•œ
stripe,n,æ¢ç´‹;æ–‘ç´‹;ç·šæ¢
undergraduate,n,å¤§å­¸ç”Ÿ;å¤§å­¸è‚„æ¥­ç”Ÿ
venture,n,å†’éšª;ä¼æ¥­
astray,adj,è¿·è·¯çš„;é›¢é–‹æ­£é“çš„
executive,adj,åŸ·è¡Œçš„;è¡Œæ”¿éƒ¨é–€çš„
feminine,adj. n,å¥³æ€§(çš„);å¥³å­©æ°£(çš„);é™°æ€§(çš„)
notify,v,é€šçŸ¥;å…¬ä½ˆ
resume,v,é‡æ–°é–‹å§‹;ç¹¼çºŒ;æ¢å¾©
taunt,v,è¾±ç½µ;å˜²ç¬‘;å¥šè½
barefoot,adv,èµ¤è‘—è…³åœ°
batch,n,ä¸€æ‰¹;ä¸€ç¾¤;ä¸€çˆ;ä¸€åœ˜
braid,n,é«®è¾®;ç©—å¸¶
bulge,n,è…«è„¹;å‡¸å¡Š;å¢é•·
extension,n,ä¼¸é•·;æ“´å¤§;å»¶æœŸ
flick,n,(é­å­çš„)è¼•æ‰“;(æ‰‹æŒ‡çš„)è¼•å½ˆ
mash,n,ç³Šç‹€ç‰©;æ··åˆé£¼æ–™
mutter,n,å’•å™¥;æŠ±æ€¨
oriental,n. adj,æ±æ–¹äºº(çš„);äºæ´²äºº(çš„)
outskirts,n,(è¤‡æ•¸)éƒŠå¤–;éƒŠå€
Pacific,n,(å¤§å¯«)å¤ªå¹³æ´‹
patron,n,è´ŠåŠ©è€…;ä¸»é¡§(å°¤æŒ‡è€é¡§å®¢)
prospect,n,é æœŸ;å‰é€”;ç›¼æœ›çš„äº‹ç‰©
rumble,n,éš†éš†è²;è½†è½†è²
sensation,n,æ„Ÿè¦º;çŸ¥è¦º;è½Ÿå‹•
smash,n,ç²‰ç¢;ç“¦è§£;(æ¼”å‡ºç­‰çš„)æˆåŠŸ
stanza,n,è©©çš„ä¸€ç¯€
wildlife,n,é‡ç”Ÿç”Ÿç‰©
considerate,adj,é«”è«’çš„
terminal,adj,æœ«ç«¯çš„;çµ‚é»çš„; æ™šæœŸçš„
enroll,v,æŠŠ...è¨˜å…¥åå†Š;ç™»è¨˜
heed,v,ç•™å¿ƒ;æ³¨æ„
lump,v,å¼„æˆä¸€åœ˜;æ­¸ä½µåˆ°ä¸€èµ·
roam,v,æ¼«æ­¥;æ¼«éŠ;æµæµª
sustain,v,æ”¯æ’;æ‰¿å—
utter,v,ç™¼å‡º(è²éŸ³ç­‰);èªª;è¬›
wither,v,æ¯è;å‡‹è¬
zoom,v,ç™¼å‡ºå—¡å—¡è²;å°‡ç•«é¢æ¨è¿‘æˆ–æ‹‰é 
downward,adv,å‘ä¸‹;æ—¥è¶¨æ²’è½åœ°;(æ™‚é–“)å¾€å¾Œæ¨ç§»åœ°
brood,n,ä¸€çª©å­µå‡ºçš„é››é³¥;ä¸€å®¶çš„å­©å­å€‘
clam,n,è›¤;èšŒ;å®ˆå£å¦‚ç“¶çš„äºº
conserve,n,ç³–æ¼¬é£Ÿå“;èœœé¤;æœé†¬
cuisine,n,çƒ¹é£ª(æ³•);èœé¤š
declaration,n,å®£ä½ˆ;å®£å‘Š;å®£è¨€;è²æ˜
driveway,n,è»Šé“
dwarf,n,çŸ®å­;çŸ®å°çš„å‹•(æ¤)ç‰©
growl,n,å—¥å«(è²);å’†å“®
juvenile,n,é’å°‘å¹´;å¹¼é«”;å…’ç«¥è®€ç‰©
organizer,n,çµ„ç¹”è€…;è¬ç”¨è¨˜äº‹æœ¬ (ç¾å¼æ‹¼å¯«)
scrape,n,åˆ®;æ“¦;æ“¦å‚·;æ“¦ç—•
series,n,é€£çºŒ;ç³»åˆ—
server,n,ä¾è€…;ä¼ºæœå™¨
silkworm,n,è ¶
sole,n,è…³åº•;é‹åº•;è¥ªåº•;åº•éƒ¨;æ¯”ç›®é­š
strand,n,è‚¡;ç¸·;çµ;ç·š;ç¹©;ä¸²
stride,n,é—Šæ­¥;æ­¥å§¿
thrust,n,çŒ›æ¨;åˆº;é©…å‹•åŠ›; è¦é»
tiptoe,n,è…³è¶¾å°–
tuna,n,é®ªé­š
upright,n,å‚ç›´;è±ç«‹;ç›´ç«‹çš„æ±è¥¿
contagious,adj,æ¥è§¸å‚³æŸ“çš„;(æ„Ÿæƒ…ç­‰)æœ‰æ„ŸæŸ“åŠ›çš„
beautify,v,ä½¿æ›´åŠ ç¾éº—;ç¾åŒ–
conceive,v,æ§‹æƒ³å‡º;è¨­æƒ³;æ‡·å­•
haul,v,æ‹–;æ‹‰;æ‹–é‹
hurl,v,çŒ›åŠ›æŠ•æ“²;ç™¼å°„;å²è²å«ç½µ
nibble,v,ä¸€é»é»åœ°å’¬(æˆ–åƒ)
reap,v,æ”¶å‰²;æ”¶ç©«
retort,v,åé§;å›å˜´
scramble,v,æ”€çˆ¬;é›œäº‚è”“å»¶;çˆ­å¥ª
shudder,v,ç™¼æŠ–;æˆ°æ…„
snatch,v,å¥ªèµ°;æŠ“ä½
stack,v,æŠŠ...ç–Šæˆå †;å †æ”¾
strain,v,æ‹‰ç·Š;ä¼¸å¼µ;ç«­åŠ›;æ‰­å‚·;éæ¿¾
nonetheless,adv,ä½†æ˜¯;ä»ç„¶
assault,n,æš´è¡Œ;æ”»æ“Š;æŠ¨æ“Š;æ–½æš´
barbershop,n,ç†é«®åº—
beloved,n,å¿ƒæ„›çš„äºº
brooch,n,å¥³ç”¨èƒ¸é‡(æˆ–é ˜é‡)
calf,n,å°ç‰›;(é¯¨è±¡ç­‰çš„)å¹¼å…’;å°è…¿
canal,n,é‹æ²³;æ²³æ¸ 
check-in,n,è¾¦ç†æŠ•å®¿(æˆ–ç™»æ©Ÿ)æ‰‹çºŒ;å ±åˆ°
compound,n,æ··åˆç‰©
fatigue,n,ç–²å‹;å‹ç´¯
fuss,n,å¿™äº‚;å°é¡Œå¤§ä½œ;çˆ­è«–
glare,n,çªçœ¼;æ€’è¦–;åˆºçœ¼çš„å¼·å…‰
haul,n,æ‹–;æ‹‰;æ‹–é‹;ä¸€æ¬¡ç²å¾—çš„é‡
locust,n,è—èŸ²
mainland,n,å¤§é™¸
mistress,n,å¥³ä¸»äºº;ä¸»å©¦; æƒ…å©¦
pluck,n,(ä¸€)æ‹‰;(ä¸€)æ‰¯; å‹‡æ°£
poultry,n,å®¶ç¦½
pyramid,n,(å¸¸å¤§å¯«)é‡‘å­—å¡”;ä¸‰è§’éŒ
rhino,n,çŠ€ç‰› (ç°¡å¯«)
scrap,n,ç¢ç‰‡;å°å¡Š;ç ´çˆ›
stagger,n,æ–æ™ƒ;è¹£è·š
statesman,n,æ”¿æ²»å®¶
steward,n,ç”·æœå‹™å“¡;ç®¡å®¶
tile,n,ç“¦;ç“·ç£š;åœ°ç£š;(éº»å°‡ç­‰çš„)ç‰Œ
federal,adj,è¯é‚¦(åˆ¶)çš„
lifelong,adj,çµ‚èº«çš„;ä¸€è¼©å­çš„
priceless,adj,ç„¡åƒ¹çš„;ç¨€ä¸–ä¹‹ççš„
bribe,v,å‘...è¡Œè³„
chant,v,åè¦†åœ°å”±(æˆ–èªª)
compound,v,ä½¿æƒ¡åŒ–;ä½¿æ··åˆ;ä½¿åˆæˆ;ä»¥è¤‡åˆ©è¨ˆç®—; å¦¥å”
perceive,v,å¯Ÿè¦º;æ„ŸçŸ¥;æ„è­˜åˆ°
prospect,v,å‹˜æ¢;æ‰¾ç¤¦
resort,v,è¨´è«¸;æ†‘è—‰
snarl,v,å ;å’†å“®;çºçµ
spotlight,v,èšå…‰ç…§æ˜;ä½¿å…¬çœ¾æ³¨æ„
swarm,v,æˆç¾¤åœ°ç§»å‹•(æˆ–é£›è¡Œ);æ“ æ»¿
tramp,v,è…³æ­¥æ²ˆé‡åœ°è¡Œèµ°;è¸è¸;æµæµª
affection,n,æ„›æ…•;é¾æ„›
anthem,n,åœ‹æ­Œ;é Œæ­Œ
applause,n,é¼“æŒæ­¡è¿;å–é‡‡
boyhood,n,(ç”·æ€§çš„)ç«¥å¹´
delegate,n,ä»£è¡¨;æœƒè­°ä»£è¡¨
mermaid,n,ç¾äººé­š
pledge,n,ä¿è­‰;èª“è¨€;æŠµæŠ¼
potential,n,å¯èƒ½æ€§;æ½›åŠ›;æ½›èƒ½
preview,n,é ç¿’;é å‘Šç‰‡
profile,n,å´å½±;è¼ªå»“;äººç‰©ç°¡ä»‹
ripple,n,æ¼£æ¼ª;ç´°æµª;æ³¢ç´‹
rival,n,ç«¶çˆ­è€…;å°æ‰‹;æ•µæ‰‹
snarl,n,å ;å’†å“®;çºçµ
superstition,n,è¿·ä¿¡
supervisor,n,ç®¡ç†äºº;æŒ‡å°è€…
tar,n,æŸæ²¹;ç€é’; æ°´æ‰‹
treasury,n,é‡‘åº«;åº«æˆ¿;åœ‹åº«;å¯¶åº«
tribute,n,é€²è²¢;æ•¬æ„;å°Šå´‡
compassionate,adj,æœ‰åŒæƒ…å¿ƒçš„;æ…ˆæ‚²çš„
descriptive,adj,æå¯«çš„;æè¿°æ€§çš„
frantic,adj,(å› å–œæ‚…æˆ–æ†¤æ€’ç­‰) ç·Šå¼µã€ç‹‚äº‚
mortal,adj,æœƒæ­»çš„;å‡¡äººçš„;è‡´å‘½çš„;æ¥µåº¦çš„
rugged,adj,é«˜ä½ä¸å¹³çš„;ç²—ç³™çš„;ç²—ç·šæ¢çš„
blot,v,æ±¡æ(åè­½);(ç”¨å¸å¢¨ç´™)å¸ä¹¾
devour,v,ç‹¼åè™åš¥åœ°åƒ;åæ²’
equate,v,ç”¨ç¬¦è™Ÿè¡¨ç¤ºæŸç¨®é—œä¿‚;ç­‰åŒ
fume,v,å†’ç…™;è–°;ç™¼æ€’
howl,v,å—¥å«;æ€’å¼;å¤§å“­;å¤§ç¬‘
modify,v,æ›´æ”¹;ä¿®æ”¹
revive,v,å¾©ç”¦;æ¢å¾©ç”Ÿæ©Ÿ;ä½¿ç”¦é†’
tackle,v,è‘—æ‰‹å°ä»˜(æˆ–è™•ç†);æ“’æŠ±ä¸¦æ‘”å€’
asset,n,è²¡ç”¢;è³‡ç”¢
ban,n,ç¦æ­¢;ç¦ä»¤
blizzard,n,å¤§é¢¨é›ª
dresser,n,è¡£æ«ƒ
fiber,n,çº–ç¶­
grant,n,çå­¸é‡‘;åŠ©å­¸é‡‘
hood,n,å…œå¸½;é¢¨å¸½;ç½©;è»Šè“‹
jury,n,é™ªå¯©åœ˜
meantime,n,å…¶æ™‚;å…¶é–“
ounce,n,ç›å¸;è‹±å…©
peg,n,æ “;æ¨;(æ›¬è¡£ç”¨)è¡£å¤¾;(æœ¨è£½)å‡è…¿
rhinoceros,n,çŠ€ç‰› (=rhino)
scent,n,æ°£å‘³;é¦™å‘³;è¹¤è·¡
shove,n,æ¨;æ’
tick,n,(é˜;éŒ¶ç­‰çš„)æ»´ç­”è²;è¨
umpire,n,ä»²è£äºº;(æ£’çƒç­‰çš„)è£åˆ¤å“¡
underline,n,åº•ç·š
viewer,n,è§€çœ‹è€…;è§€çœ¾
ware,n,(ç‰¹å®šç¨®é¡çš„)ç‰©å“;å™¨çš¿; è£½å“
bass,adj,ä½æ²ˆçš„;ç”·ä½éŸ³çš„
inward,adj,è£¡é¢çš„;å…§éƒ¨çš„;å…§å¿ƒçš„;å‘å…§çš„
sacred,adj,ç¥çš„;ç¥è–çš„
stern,adj,åš´å²çš„;å …å®šçš„
peg,v,ç”¨æœ¨é‡˜é‡˜;ç”¨æœ¨å¤¾å¤¾
rifle,v,æ´—åŠ«;åŠ«æ ; å¿«é€Ÿæœå°‹
exaggeration,n,èª‡å¼µ
heterosexual,adj. n,ç•°æ€§æˆ€çš„(äºº)
lime,n,çŸ³ç°;é…¸æ©™
outsider,n,å¤–äºº;é–€å¤–æ¼¢;å±€å¤–äºº
peddler,n,å°è²©
specialist,n,å°ˆå®¶;å°ˆç§‘é†«ç”Ÿ
thorn,n,åˆº;æ£˜;æƒ±äººçš„äº‹æˆ–äºº
toad,n,èŸ¾èœ;ä»¤äººè¨å­çš„äºº
tournament,n,æ¯”è³½;éŒ¦æ¨™è³½
tuition,n,å­¸è²»
vine,n,è—¤;è—¤è”“;è‘¡è„æ¨¹
widow,n,å¯¡å©¦
widower,n,é°¥å¤«
apt,adj,æ˜“æ–¼...çš„;æ°ç•¶çš„;è°æ˜çš„
blond,adj,ç™½è†šé‡‘é«®ç¢§çœ¼çš„
lame,adj,è·›è…³çš„;ç«™ä¸ä½è…³çš„
marine,adj,æµ·çš„;æµ·ç”Ÿçš„;æµ·è»é™¸æˆ°éšŠçš„
ban,v,ç¦æ­¢;å–ç· 
erupt,v,å™´å‡º;çˆ†ç™¼
exceed,v,è¶…é;å‹é
filter,v,éæ¿¾;æ»²é€
honk,v,ç™¼é›é³´;æŒ‰å–‡å­
jolly,v,ç”¨å¥½è©±å‹¸(æŸäºº); ä½¿æ›´é«˜èˆˆ
persist,v,å …æŒ;å›ºåŸ·
scroll,v,ä½¿æˆå·å½¢;ç”¨æ¸¦å·é£¾è£é£¾
shriek,v,å°–å«;ç™¼å‡ºå°–è²
vow,v,ç™¼èª“è¦;é„­é‡å®£å‘Š
anchor,n,éŒ¨;é å±±;é›»è¦–æ–°èç¯€ç›®ä¸»æŒäºº
attendance,n,å‡ºå¸­;å‡ºå¸­äººæ•¸;ä¾å€™
check-out,n,æª¢æŸ¥;èª¿æŸ¥;ä»˜æ¬¾é€€ç§Ÿ;ä¸‹ç­é›¢é–‹
doorway,n,å‡ºå…¥å£;é–€å£
exterior,n,å¤–éƒ¨;å¤–è¡¨;å¤–æ™¯
flourish,n,æ®èˆ;ç‚«è€€æ€§çš„å‹•ä½œ
grumble,n,ç‰¢é¨·;è½Ÿéš†è²
midst,n,ç•¶ä¸­;ä¸­é–“
novice,n,æ–°æ‰‹;åˆå­¸è€…
peril,n,(åš´é‡çš„)å±éšª;å±éšªçš„äº‹ç‰©
pistol,n,æ‰‹æ§
savage,n,é‡è »äºº
treaty,n,æ¢ç´„;å”å®š    `;

        // ========= å·¥å…·å‡½æ•¸ =========
        function parseWordList(text) {
            const lines = text.split('\n');
            const words = [];
            
            for (const line of lines) {
                const trimmedLine = line.trim();
                if (!trimmedLine) continue;
                
                const parts = trimmedLine.split(',');
                if (parts.length < 3) continue;
                
                const word = parts[0].trim();
                const pos = parts[1].trim();
                const meanings = parts[2].split(';').map(m => m.trim()).filter(m => m);
                
                for (const meaning of meanings) {
                    words.push({ word, pos, meaning });
                }
            }
            return words;
        }

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function formatTime(seconds) {
            seconds = Math.max(0, seconds);
            const m = Math.floor(seconds / 60);
            const s = Math.ceil(seconds % 60);
            return `${m}:${s.toString().padStart(2, '0')}`;
        }

        // ========= è™è å‹•ç•« =========
        let batFlyStyleAdded = false;
        function createBat() {
            const bat = document.createElement('div');
            bat.className = 'bat';
            
            const size = Math.random() * 20 + 10;
            bat.style.width = `${size}px`;
            bat.style.height = `${size}px`;
            bat.style.left = `-${size}px`;
            bat.style.top = `${Math.random() * 80 + 10}%`;
            
            const duration = Math.random() * 5 + 5;
            batsContainer.appendChild(bat);
            
            setTimeout(() => {
                bat.style.animation = `batFly ${duration}s linear forwards`;
            }, 10);
            
            setTimeout(() => {
                bat.remove();
            }, duration * 1000);
        }

        function startBatAnimation() {
            stopBatAnimation();
            batInterval = setInterval(() => {
                createBat();
            }, 2000);
        }
        
        function stopBatAnimation() {
            clearInterval(batInterval);
            batsContainer.innerHTML = '';
        }

        // ========= éŠæˆ²æµç¨‹ =========
        function initGame() {
            vocabulary = parseWordList(wordList);

            if (vocabulary.length === 0) {
                alert('å–®å­—åº«è¼‰å…¥å¤±æ•—ï¼');
                return;
            }

            score = 0;
            scoreDisplay.textContent = score;
            usedInCurrentSession = [];
            correctStreak = 0;
            wrongStreak = 0;
            gameActive = false;
            gameOver = false;
            canAnswer = false;
            lastCountdownNumber = 0;

            if (timer) {
                clearInterval(timer);
                timer = null;
            }
            stopBatAnimation();

            // ä¾ç›®å‰æ™‚é–“æŒ‰éˆ•è¨­å®šæ™‚é–“èˆ‡é¡¯ç¤º
            const activeBtn = document.querySelector('.time-btn.active') || timeButtons[0];
            totalGameTime = parseInt(activeBtn.dataset.time, 10) || 180;
            timeLeft = totalGameTime;
            countdownDisplay.textContent = formatTime(timeLeft);
            timerBar.style.width = '100%';
            timerBar.classList.remove('timer-warning');

            setupScreen.style.display = 'block';
            gameScreen.style.display = 'none';
            gameOverScreen.classList.remove('active');
        }

        function startGame() {
            if (vocabulary.length === 0) {
                alert('å–®å­—åº«è¼‰å…¥å¤±æ•—ï¼');
                return;
            }

            const activeBtn = document.querySelector('.time-btn.active') || timeButtons[0];
            totalGameTime = parseInt(activeBtn.dataset.time, 10) || 180;
            timeLeft = totalGameTime;
            lastCountdownNumber = Math.ceil(timeLeft);

            score = 0;
            scoreDisplay.textContent = score;
            usedInCurrentSession = [];
            correctStreak = 0;
            wrongStreak = 0;
            gameActive = true;
            gameOver = false;
            canAnswer = true;

            setupScreen.style.display = 'none';
            gameScreen.style.display = 'block';
            gameOverScreen.classList.remove('active');

            countdownDisplay.textContent = formatTime(timeLeft);
            timerBar.style.width = '100%';
            timerBar.classList.remove('timer-warning');

            startTime = Date.now();
            if (timer) clearInterval(timer);
            timer = setInterval(updateTimer, 100);

            startBatAnimation();
            nextQuestion();
        }

        function updateTimer() {
            if (!gameActive) {
                clearInterval(timer);
                timer = null;
                return;
            }

            timeLeft -= 0.1;
            if (timeLeft < 0) timeLeft = 0;

            const percentage = (timeLeft / totalGameTime) * 100;
            timerBar.style.width = `${percentage}%`;
            countdownDisplay.textContent = formatTime(timeLeft);

            const currentNumber = Math.ceil(timeLeft);
            if (currentNumber !== lastCountdownNumber) {
                lastCountdownNumber = currentNumber;
                countdownDisplay.className = 'countdown pulse';
                setTimeout(() => {
                    if (!gameOver) countdownDisplay.className = 'countdown';
                }, 300);
            }

            if (percentage < 20) {
                timerBar.classList.add('timer-warning');
            } else {
                timerBar.classList.remove('timer-warning');
            }

            if (timeLeft <= 0) {
                endGame('time');
            }
        }

        function nextQuestion() {
            if (!gameActive || gameOver) return;

            canAnswer = true;
            pumpkinOptions.forEach(option => {
                option.classList.remove('disabled', 'correct', 'wrong');
            });

            if (usedInCurrentSession.length >= vocabulary.length) {
                usedInCurrentSession = [];
            }

            const availableIndices = vocabulary
                .map((_, i) => i)
                .filter(i => !usedInCurrentSession.includes(i));

            if (availableIndices.length === 0) {
                usedInCurrentSession = [];
                nextQuestion();
                return;
            }

            const randomIndex = availableIndices[Math.floor(Math.random() * availableIndices.length)];
            usedInCurrentSession.push(randomIndex);
            currentWord = vocabulary[randomIndex];

            currentWordDisplay.classList.add('fade-out');
            currentPosDisplay.classList.add('fade-out');

            setTimeout(() => {
                currentWordDisplay.textContent = currentWord.word;
                currentPosDisplay.textContent = currentWord.pos;

                prepareOptions();

                currentWordDisplay.classList.remove('fade-out');
                currentPosDisplay.classList.remove('fade-out');
                currentWordDisplay.classList.add('fade-in');
                currentPosDisplay.classList.add('fade-in');

                setTimeout(() => {
                    currentWordDisplay.classList.remove('fade-in');
                    currentPosDisplay.classList.remove('fade-in');
                }, 300);
            }, 200);
        }

        function prepareOptions() {
            if (!currentWord) return;

            const correctAnswer = currentWord.meaning;
            const otherMeanings = vocabulary
                .filter(item => item.meaning !== correctAnswer)
                .map(item => item.meaning);

            const wrongAnswers = [];
            while (wrongAnswers.length < 3 && otherMeanings.length > 0) {
                const randomIndex = Math.floor(Math.random() * otherMeanings.length);
                const selectedMeaning = otherMeanings[randomIndex];
                if (!wrongAnswers.includes(selectedMeaning)) {
                    wrongAnswers.push(selectedMeaning);
                    otherMeanings.splice(randomIndex, 1);
                }
            }

            const allOptions = [correctAnswer, ...wrongAnswers];
            shuffleArray(allOptions);

            for (let i = 0; i < 4; i++) {
                if (i < allOptions.length) {
                    optionDisplays[i].textContent = allOptions[i];
                    optionDisplays[i].parentElement.dataset.meaning = allOptions[i];
                } else {
                    optionDisplays[i].textContent = 'ç„¡é¸é …';
                    optionDisplays[i].parentElement.dataset.meaning = '';
                }
            }
        }

        function checkAnswer(selectedOption) {
            if (!gameActive || !canAnswer || gameOver) return;

            canAnswer = false;
            const selectedMeaning = selectedOption.dataset.meaning;
            const isCorrect = selectedMeaning === currentWord.meaning;

            pumpkinOptions.forEach(option => {
                option.classList.add('disabled');
                const meaning = option.dataset.meaning;
                if (meaning === currentWord.meaning) {
                    option.classList.add('correct');
                } else if (option === selectedOption && !isCorrect) {
                    option.classList.add('wrong');
                }
            });

            if (isCorrect) {
                correctStreak++;
                wrongStreak = 0;

                let addScore = 5;
                if (correctStreak === 1) addScore = 5;
                else if (correctStreak === 2) addScore = 10;
                else if (correctStreak === 3) addScore = 15;
                else addScore = 20;

                score += addScore;
                scoreDisplay.textContent = score;

                createBatsEffect();

                setTimeout(() => {
                    if (!gameOver) nextQuestion();
                }, 700);
            } else {
                wrongStreak++;
                correctStreak = 0;

                let penalty = 5;
                if (wrongStreak === 1) penalty = 5;
                else if (wrongStreak === 2) penalty = 10;
                else if (wrongStreak === 3) penalty = 15;
                else penalty = 20;

                score = Math.max(score - penalty, 0);
                scoreDisplay.textContent = score;

                gameScreen.style.animation = 'shake 0.4s';
                setTimeout(() => {
                    gameScreen.style.animation = '';
                }, 400);

                setTimeout(() => {
                    if (score <= 0) {
                        endGame('score');
                    } else if (!gameOver) {
                        pumpkinOptions.forEach(option => {
                            option.classList.remove('correct', 'wrong', 'disabled');
                        });
                        canAnswer = true;
                        nextQuestion();
                    }
                }, 800);
            }
        }

        function createBatsEffect() {
            for (let i = 0; i < 5; i++) {
                setTimeout(() => {
                    createBat();
                }, i * 100);
            }
        }

        function endGame(reason) {
            if (gameOver) return;
            gameOver = true;
            gameActive = false;
            canAnswer = false;

            if (timer) {
                clearInterval(timer);
                timer = null;
            }
            stopBatAnimation();

            finalScoreDisplay.textContent = score;

            let used;
            if (startTime) {
                used = Math.floor((Date.now() - startTime) / 1000);
            } else {
                used = Math.floor(totalGameTime - timeLeft);
            }
            if (used < 0 || !isFinite(used)) used = 0;
            timeUsedDisplay.textContent = used;

            if (reason === 'time') {
                resultMessage.textContent = 'æ™‚é–“åˆ°ï¼ğŸ‘»';
            } else if (reason === 'score') {
                resultMessage.textContent = 'åˆ†æ•¸æ­¸é›¶äº†ï¼ğŸ§Ÿâ€â™‚ï¸';
            } else {
                resultMessage.textContent = 'Game Over!';
            }

            gameOverScreen.classList.add('active');
        }

        function restartGame() {
            initGame();
        }

        // ========= äº‹ä»¶è™•ç† =========
        document.addEventListener('DOMContentLoaded', function () {
            detectDevice();
            initGame();

            startGameBtn.addEventListener('click', startGame);
            restartBtn.addEventListener('click', restartGame);

            pumpkinOptions.forEach(option => {
                option.addEventListener('click', () => {
                    checkAnswer(option);
                });
            });

            timeButtons.forEach(btn => {
                btn.addEventListener('click', () => {
                    timeButtons.forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');

                    totalGameTime = parseInt(btn.dataset.time, 10) || 180;
                    timeLeft = totalGameTime;
                    countdownDisplay.textContent = formatTime(timeLeft);
                    timerBar.style.width = '100%';
                    timerBar.classList.remove('timer-warning');
                });
            });
        });

        // é˜²æ­¢é›™æ“Šç¸®æ”¾
        let lastTouchEnd = 0;
        document.addEventListener('touchend', function(e) {
            const now = Date.now();
            if (now - lastTouchEnd <= 300) e.preventDefault();
            lastTouchEnd = now;
        }, { passive: false });

        window.addEventListener('resize', function () {
            setTimeout(detectDevice, 100);
        });
    </script>
</body>
</html>
