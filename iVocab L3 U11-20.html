<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>U11-20 單字挑戰無極限 - 萬聖節特別版</title>
    <style>
        /* 基礎樣式重置 */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            font-family: 'Comic Sans MS', cursive, sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            background-size: cover;
            background-attachment: fixed;
            overflow-x: hidden;
            touch-action: manipulation;
        }
        
        .game-container {
            background-color: rgba(255, 255, 255, 0.9);
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
            padding: 20px;
            width: 95%;
            max-width: 800px;
            text-align: center;
            position: relative;
            border: 5px solid #f05454;
            overflow: hidden;
            margin: 10px;
        }
        
        h1 {
            color: #f05454;
            margin-bottom: 15px;
            font-size: 1.8rem;
            text-shadow: 2px 2px 0px #fff, 0 0 5px #ff9f43;
            line-height: 1.3;
        }
        
        .word-display {
            font-size: 2rem;
            margin: 15px 0;
            color: #f05454;
            font-weight: bold;
            text-shadow: 2px 2px 0px #fff;
            transition: opacity 0.3s ease;
            line-height: 1.2;
        }
        
        .pos-display {
            font-size: 1.2rem;
            color: #f05454;
            margin-bottom: 20px;
            font-style: italic;
            text-shadow: 1px 1px 0px #fff;
            transition: opacity 0.3s ease;
        }
        
        .options-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            margin: 20px 0;
            gap: 10px;
        }
        
        .pumpkin-option {
            width: 45%;
            max-width: 160px;
            height: 140px;
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            margin: 5px;
            filter: drop-shadow(0 5px 5px rgba(0,0,0,0.3));
            touch-action: manipulation;
        }
        
        .pumpkin-option:active {
            transform: translateY(-5px) scale(1.05);
        }
        
        .pumpkin-text {
            position: absolute;
            bottom: 15px;
            left: 0;
            right: 0;
            text-align: center;
            font-size: 0.9rem;
            color: #fff;
            font-weight: bold;
            padding: 8px;
            background-color: rgba(0,0,0,0.8);
            border-radius: 10px;
            margin: 0 10px;
            text-shadow: 1px 1px 0 #000;
            min-height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.5);
            line-height: 1.3;
            overflow: hidden;
            text-overflow: ellipsis;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
        }
        
        .timer-container {
            width: 100%;
            height: 15px;
            background-color: #f0f0f0;
            border-radius: 10px;
            margin: 15px 0;
            overflow: hidden;
            border: 2px solid #f05454;
        }
        
        .timer-bar {
            height: 100%;
            width: 100%;
            background: linear-gradient(to right, #f05454, #ff9f43);
            transition: width 0.1s linear;
            border-radius: 8px;
        }
        
        .ghost {
            position: absolute;
            width: 60px;
            height: 60px;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path fill="%23f0f0f0" d="M40.1 467.1l-11.2 9c-3.2 2.5-7.1 3.9-11.1 3.9-8.3 0-15.8-6-15.8-16.1c0-5.5 2.5-10.5 6.9-14.1C40.5 439.8 76.6 384 76.6 256c0-168.3-17.7-208-76.6-208C0 48 0 48 0 32C0 14.3 14.3 0 32 0h320c17.7 0 32 14.3 32 32c0 16 0 16-76.6 0c-58.9 0-76.6 39.7-76.6 208c0 128 36.1 183.8 66.3 209.8c4.4 3.6 6.9 8.6 6.9 14.1c0 10.1-7.5 16.1-15.8 16.1c-4 0-7.9-1.4-11.1-3.9l-11.2-9c-6.9-5.5-17.1-5.5-24 0c-6.9 5.5-17.1 5.5-24 0l-11.2-9c-6.9-5.5-17.1-5.5-24 0c-6.9 5.5-17.1 5.5-24 0l-11.2-9c-6.9-5.5-17.1-5.5-24 0c-6.9 5.5-17.1 5.5-24 0l-11.2-9c-6.9-5.5-17.1-5.5-24 0c-6.9 5.5-17.1 5.5-24 0zM128 128c-17.7 0-32 14.3-32 32s14.3 32 32 32s32-14.3 32-32s-14.3-32-32-32zm128 0c-17.7 0-32 14.3-32 32s14.3 32 32 32s32-14.3 32-32s-14.3-32-32-32z"/></svg>');
            background-size: contain;
            background-repeat: no-repeat;
            bottom: 15px;
            left: 50%;
            transform: translateX(-50%);
            animation: float 2s infinite alternate ease-in-out;
            z-index: 10;
            filter: drop-shadow(0 0 10px rgba(255,255,255,0.5));
        }
        
        @keyframes float {
            0% { transform: translate(-50%, 0); }
            100% { transform: translate(-50%, -15px); }
        }
        
        .score-display {
            font-size: 1.2rem;
            color: #f05454;
            margin: 8px 0;
            font-weight: bold;
            text-shadow: 1px 1px 0px #fff;
        }
        
        .game-over {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 100;
            flex-direction: column;
            color: white;
            font-size: 1.5rem;
            display: none;
            text-shadow: 2px 2px 0px #000;
            padding: 20px;
            text-align: center;
        }
        
        .game-over h2 {
            font-size: 2.2rem;
            margin-bottom: 15px;
            color: #f05454;
        }
        
        .restart-btn, .start-btn {
            padding: 14px 28px;
            background-color: #f05454;
            color: white;
            border: none;
            border-radius: 50px;
            font-size: 1.2rem;
            cursor: pointer;
            margin-top: 20px;
            transition: all 0.3s;
            text-shadow: 1px 1px 0px #000;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            touch-action: manipulation;
            min-width: 180px;
        }
        
        .restart-btn:active, .start-btn:active {
            background-color: #ff9f43;
            transform: scale(0.98);
        }
        
        .bats {
            position: absolute;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 5;
        }
        
        .bat {
            position: absolute;
            width: 25px;
            height: 25px;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path fill="%23f05454" d="M320 160c28.7 0 54.9 10 75.4 26.6 5.1 4.2 11.3 5.3 17 3.1 18.8-7.2 39.7-10.6 60.9-10.6 8.3 0 16.8.7 25.1 2.1 5.9.9 11.6-2 14.3-7.3 9.5-19 15.3-40.6 15.3-63.9 0-61.9-50.1-112-112-112-16.7 0-32.8 3.7-47.4 10.5-4.5 2.1-9.8 1.3-13.8-1.9-11.1-8.9-24.6-14.6-39.2-14.6s-28.1 5.7-39.2 14.6c-4 3.2-9.3 4-13.8 1.9-14.6-6.8-30.7-10.5-47.4-10.5-61.9 0-112 50.1-112 112 0 23.3 5.8 44.9 15.3 63.9 2.7 5.3 8.4 8.2 14.3 7.3 8.3-1.4 16.8-2.1 25.1-2.1 21.2 0 42.1 3.4 60.9 10.6 5.7 2.2 11.9 1.1 17-3.1C265.1 170 291.3 160 320 160zm0-48c13.2 0 24 10.8 24 24s-10.8 24-24 24-24-10.8-24-24 10.8-24 24-24zm-144 56c-28.7 0-54.9 10-75.4 26.6-5.1 4.2-11.3 5.3-17 3.1-18.8-7.2-39.7-10.6-60.9-10.6-8.3 0-16.8.7-25.1 2.1-5.9.9-11.6-2-14.3-7.3C2.8 172.9 0 150.7 0 128 0 66.1 50.1 16 112 16c16.7 0 32.8 3.7 47.4 10.5 4.5 2.1 9.8 1.3 13.8-1.9 11.1-8.9 24.6-14.6 39.2-14.6s28.1 5.7 39.2 14.6c4 3.2 9.3 4 13.8 1.9 14.6-6.8 30.7-10.5 47.4-10.5 61.9 0 112 50.1 112 112 0 22.7-2.8 44.9-8.3 65.5-2.7 5.3-8.4 8.2-14.3 7.3-8.3-1.4-16.8-2.1-25.1-2.1-21.2 0-42.1 3.4-60.9 10.6-5.7 2.2-11.9 1.1-17-3.1-20.5-16.6-46.7-26.6-75.4-26.6zm-24 80c-13.2 0-24-10.8-24-24s10.8-24 24-24 24 10.8 24 24-10.8 24-24 24zm256 0c-13.2 0-24-10.8-24-24s10.8-24 24-24 24 10.8 24 24-10.8 24-24 24zm-224 32c-119 0-216 96.9-216 216 0 57.3 22.5 109.4 59 148 3.1 3.3 7.9 4.1 11.9 2 17.8-9.2 37.6-14 58.1-14 8.3 0 16.5.7 24.6 1.9 5.1.8 10-1.9 12-6.7 7.1-17.3 20.6-31.8 37.9-38.9 1.3-.5 2.7-.8 4-1.1V320c0-52.9 43.1-96 96-96s96 43.1 96 96v56.2c1.3.4 2.7.7 4 1.1 17.3 7.1 30.8 21.6 37.9 38.9 2 4.8 6.9 7.5 12 6.7 8.1-1.2 16.3-1.9 24.6-1.9 20.5 0 40.3 4.8 58.1 14 4 2.1 8.8 1.3 11.9-2 36.5-38.6 59-90.7 59-148 0-119.1-97-216-216-216z"/></svg>');
            background-size: contain;
            background-repeat: no-repeat;
            opacity: 0;
        }
        
        /* 四種不同顏色的南瓜燈 */
        .pumpkin-1 { background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="%23f05454" d="M352 0c-27.8 0-53.3 8.6-74.5 23.1C256.5 8.6 231 0 203.2 0 91 0 0 91 0 203.2c0 132.4 125.8 200.5 203.4 308.8 11 15.4 28.4 25.6 48.4 25.6h8.4c20 0 37.4-10.2 48.4-25.6C386.2 403.7 512 335.6 512 203.2 512 91 421 0 352 0zm-96 480c-3.5 0-6.8-1.8-9.1-4.8-4.1-5.8-102.3-145.7-102.3-272 0-81.9 66.6-148.5 148.5-148.5S441 121.3 441 203.2c0 126.3-98.2 266.2-102.3 272-2.3 3-5.6 4.8-9.1 4.8h-83.2z"/><path fill="%23ff9f43" d="M203.4 308.8C125.8 200.5 0 132.4 0 203.2 0 91 91 0 203.2 0c27.8 0 53.3 8.6 74.5 23.1 21.2-14.5 46.7-23.1 74.5-23.1 69 0 160 91 160 203.2 0 132.4-125.8 200.5-203.4 308.8-11 15.4-28.4 25.6-48.4 25.6h-8.4c-20 0-37.4-10.2-48.4-25.6zM352 56c-16.5 0-32.3 3.3-46.8 9.2 5.3 5.1 10.4 10.4 15.2 16.1C338.3 70.8 345 68 352 68c74.9 0 136 61.1 136 136 0 28.9-9.3 56.3-25.4 78.9 5.8-16.5 9.4-34.2 9.4-52.6C472 121.3 405.4 56 352 56zM203.2 56c-16.5 0-32.3 3.3-46.8 9.2 5.3 5.1 10.4 10.4 15.2 16.1 19.9-10.3 42.4-16.1 66.4-16.1 53.4 0 99.5 30.7 120.9 75.4 10.1-16.4 16.2-35.1 16.2-55.4 0-16.5-3.3-32.3-9.2-46.8C293.5 59.3 268 56 240.2 56h-37z"/><circle fill="%23000" cx="160" cy="160" r="16"/><circle fill="%23000" cx="352" cy="160" r="16"/><path fill="%23000" d="M256 240c-35.3 0-64 28.7-64 64s28.7 64 64 64 64-28.7 64-64-28.7-64-64-64zm0 96c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"/></svg>'); }
        .pumpkin-2 { background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="%23ff9f43" d="M352 0c-27.8 0-53.3 8.6-74.5 23.1C256.5 8.6 231 0 203.2 0 91 0 0 91 0 203.2c0 132.4 125.8 200.5 203.4 308.8 11 15.4 28.4 25.6 48.4 25.6h8.4c20 0 37.4-10.2 48.4-25.6C386.2 403.7 512 335.6 512 203.2 512 91 421 0 352 0zm-96 480c-3.5 0-6.8-1.8-9.1-4.8-4.1-5.8-102.3-145.7-102.3-272 0-81.9 66.6-148.5 148.5-148.5S441 121.3 441 203.2c0 126.3-98.2 266.2-102.3 272-2.3 3-5.6 4.8-9.1 4.8h-83.2z"/><path fill="%23f05454" d="M203.4 308.8C125.8 200.5 0 132.4 0 203.2 0 91 91 0 203.2 0c27.8 0 53.3 8.6 74.5 23.1 21.2-14.5 46.7-23.1 74.5-23.1 69 0 160 91 160 203.2 0 132.4-125.8 200.5-203.4 308.8-11 15.4-28.4 25.6-48.4 25.6h-8.4c-20 0-37.4-10.2-48.4-25.6zM352 56c-16.5 0-32.3 3.3-46.8 9.2 5.3 5.1 10.4 10.4 15.2 16.1C338.3 70.8 345 68 352 68c74.9 0 136 61.1 136 136 0 28.9-9.3 56.3-25.4 78.9 5.8-16.5 9.4-34.2 9.4-52.6C472 121.3 405.4 56 352 56zM203.2 56c-16.5 0-32.3 3.3-46.8 9.2 5.3 5.1 10.4 10.4 15.2 16.1 19.9-10.3 42.4-16.1 66.4-16.1 53.4 0 99.5 30.7 120.9 75.4 10.1-16.4 16.2-35.1 16.2-55.4 0-16.5-3.3-32.3-9.2-46.8C293.5 59.3 268 56 240.2 56h-37z"/><circle fill="%23000" cx="160" cy="160" r="16"/><circle fill="%23000" cx="352" cy="160" r="16"/><path fill="%23000" d="M256 240c-35.3 0-64 28.7-64 64s28.7 64 64 64 64-28.7 64-64-28.7-64-64-64zm0 96c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"/></svg>'); }
        .pumpkin-3 { background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="%23e67e22" d="M352 0c-27.8 0-53.3 8.6-74.5 23.1C256.5 8.6 231 0 203.2 0 91 0 0 91 0 203.2c0 132.4 125.8 200.5 203.4 308.8 11 15.4 28.4 25.6 48.4 25.6h8.4c20 0 37.4-10.2 48.4-25.6C386.2 403.7 512 335.6 512 203.2 512 91 421 0 352 0zm-96 480c-3.5 0-6.8-1.8-9.1-4.8-4.1-5.8-102.3-145.7-102.3-272 0-81.9 66.6-148.5 148.5-148.5S441 121.3 441 203.2c0 126.3-98.2 266.2-102.3 272-2.3 3-5.6 4.8-9.1 4.8h-83.2z"/><path fill="%23d35400" d="M203.4 308.8C125.8 200.5 0 132.4 0 203.2 0 91 91 0 203.2 0c27.8 0 53.3 8.6 74.5 23.1 21.2-14.5 46.7-23.1 74.5-23.1 69 0 160 91 160 203.2 0 132.4-125.8 200.5-203.4 308.8-11 15.4-28.4 25.6-48.4 25.6h-8.4c-20 0-37.4-10.2-48.4-25.6zM352 56c-16.5 0-32.3 3.3-46.8 9.2 5.3 5.1 10.4 10.4 15.2 16.1C338.3 70.8 345 68 352 68c74.9 0 136 61.1 136 136 0 28.9-9.3 56.3-25.4 78.9 5.8-16.5 9.4-34.2 9.4-52.6C472 121.3 405.4 56 352 56zM203.2 56c-16.5 0-32.3 3.3-46.8 9.2 5.3 5.1 10.4 10.4 15.2 16.1 19.9-10.3 42.4-16.1 66.4-16.1 53.4 0 99.5 30.7 120.9 75.4 10.1-16.4 16.2-35.1 16.2-55.4 0-16.5-3.3-32.3-9.2-46.8C293.5 59.3 268 56 240.2 56h-37z"/><circle fill="%23000" cx="160" cy="160" r="16"/><circle fill="%23000" cx="352" cy="160" r="16"/><path fill="%23000" d="M256 240c-35.3 0-64 28.7-64 64s28.7 64 64 64 64-28.7 64-64-28.7-64-64-64zm0 96c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"/></svg>'); }
        .pumpkin-4 { background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="%23d35400" d="M352 0c-27.8 0-53.3 8.6-74.5 23.1C256.5 8.6 231 0 203.2 0 91 0 0 91 0 203.2c0 132.4 125.8 200.5 203.4 308.8 11 15.4 28.4 25.6 48.4 25.6h8.4c20 0 37.4-10.2 48.4-25.6C386.2 403.7 512 335.6 512 203.2 512 91 421 0 352 0zm-96 480c-3.5 0-6.8-1.8-9.1-4.8-4.1-5.8-102.3-145.7-102.3-272 0-81.9 66.6-148.5 148.5-148.5S441 121.3 441 203.2c0 126.3-98.2 266.2-102.3 272-2.3 3-5.6 4.8-9.1 4.8h-83.2z"/><path fill="%23e67e22" d="M203.4 308.8C125.8 200.5 0 132.4 0 203.2 0 91 91 0 203.2 0c27.8 0 53.3 8.6 74.5 23.1 21.2-14.5 46.7-23.1 74.5-23.1 69 0 160 91 160 203.2 0 132.4-125.8 200.5-203.4 308.8-11 15.4-28.4 25.6-48.4 25.6h-8.4c-20 0-37.4-10.2-48.4-25.6zM352 56c-16.5 0-32.3 3.3-46.8 9.2 5.3 5.1 10.4 10.4 15.2 16.1C338.3 70.8 345 68 352 68c74.9 0 136 61.1 136 136 0 28.9-9.3 56.3-25.4 78.9 5.8-16.5 9.4-34.2 9.4-52.6C472 121.3 405.4 56 352 56zM203.2 56c-16.5 0-32.3 3.3-46.8 9.2 5.3 5.1 10.4 10.4 15.2 16.1 19.9-10.3 42.4-16.1 66.4-16.1 53.4 0 99.5 30.7 120.9 75.4 10.1-16.4 16.2-35.1 16.2-55.4 0-16.5-3.3-32.3-9.2-46.8C293.5 59.3 268 56 240.2 56h-37z"/><circle fill="%23000" cx="160" cy="160" r="16"/><circle fill="%23000" cx="352" cy="160" r="16"/><path fill="%23000" d="M256 240c-35.3 0-64 28.7-64 64s28.7 64 64 64 64-28.7 64-64-28.7-64-64-64zm0 96c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"/></svg>'); }
        
        /* 南瓜燈上的花紋 */
        .pumpkin-option::before {
            content: "";
            position: absolute;
            width: 100%;
            height: 100%;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="%23000" d="M256 0c-16.5 0-32.3 3.3-46.8 9.2 5.3 5.1 10.4 10.4 15.2 16.1 19.9-10.3 42.4-16.1 66.4-16.1 53.4 0 99.5 30.7 120.9 75.4 10.1-16.4 16.2-35.1 16.2-55.4 0-16.5-3.3-32.3-9.2-46.8C293.5 59.3 268 56 240.2 56h-37z"/></svg>');
            background-size: 80%;
            background-repeat: no-repeat;
            background-position: center;
            opacity: 0.2;
        }
        
        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            50% { transform: translateX(5px); }
            75% { transform: translateX(-5px); }
            100% { transform: translateX(0); }
        }
        
        @keyframes batFly {
            0% { transform: translate(0, 0) rotate(0deg); opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { transform: translate(100vw, -100vh) rotate(360deg); opacity: 0; }
        }
        
        /* 禁用狀態的南瓜燈 */
        .pumpkin-option.disabled {
            pointer-events: none;
            opacity: 0.7;
            filter: grayscale(50%);
        }
        
        /* 題目切換動畫 */
        .fade-out {
            opacity: 0;
            transform: translateY(-10px);
            transition: all 0.3s ease;
        }
        
        .fade-in {
            opacity: 1;
            transform: translateY(0);
            transition: all 0.3s ease;
        }
        
        /* 計時器警告效果 */
        .timer-warning {
            animation: pulse 0.5s infinite alternate;
        }
        
        @keyframes pulse {
            from { opacity: 1; }
            to { opacity: 0.5; }
        }
        
        /* 響應式設計 - 平板 */
        @media (min-width: 768px) {
            .game-container {
                padding: 25px;
            }
            
            h1 {
                font-size: 2.2rem;
            }
            
            .word-display {
                font-size: 2.3rem;
            }
            
            .pos-display {
                font-size: 1.4rem;
            }
            
            .pumpkin-option {
                width: 22%;
                height: 150px;
            }
            
            .pumpkin-text {
                font-size: 1rem;
            }
            
            .ghost {
                width: 70px;
                height: 70px;
            }
            
            .score-display {
                font-size: 1.4rem;
            }
            
            .restart-btn, .start-btn {
                font-size: 1.3rem;
                padding: 16px 32px;
            }
        }
        
        /* 響應式設計 - 電腦 */
        @media (min-width: 1024px) {
            .game-container {
                padding: 30px;
                max-width: 900px;
            }
            
            h1 {
                font-size: 2.5rem;
            }
            
            .word-display {
                font-size: 2.5rem;
            }
            
            .pos-display {
                font-size: 1.5rem;
            }
            
            .pumpkin-option {
                width: 22%;
                height: 160px;
                max-width: 180px;
            }
            
            .pumpkin-option:hover {
                transform: translateY(-10px) scale(1.1);
            }
            
            .pumpkin-text {
                font-size: 1.1rem;
            }
            
            .ghost {
                width: 80px;
                height: 80px;
            }
            
            .score-display {
                font-size: 1.5rem;
            }
            
            .restart-btn, .start-btn {
                font-size: 1.5rem;
                padding: 18px 36px;
            }
            
            .restart-btn:hover, .start-btn:hover {
                background-color: #ff9f43;
                transform: scale(1.1);
            }
        }
        
        /* 響應式設計 - 小手機 */
        @media (max-width: 480px) {
            .game-container {
                padding: 15px;
            }
            
            h1 {
                font-size: 1.5rem;
            }
            
            .word-display {
                font-size: 1.8rem;
            }
            
            .pos-display {
                font-size: 1.1rem;
            }
            
            .pumpkin-option {
                width: 45%;
                height: 130px;
            }
            
            .pumpkin-text {
                font-size: 0.85rem;
                bottom: 12px;
            }
            
            .ghost {
                width: 50px;
                height: 50px;
            }
            
            .score-display {
                font-size: 1.1rem;
            }
            
            .restart-btn, .start-btn {
                font-size: 1.1rem;
                padding: 12px 24px;
                min-width: 160px;
            }
        }
        
        /* 響應式設計 - 超小手機 */
        @media (max-width: 360px) {
            .pumpkin-option {
                width: 45%;
                height: 120px;
            }
            
            .pumpkin-text {
                font-size: 0.8rem;
            }
            
            .ghost {
                width: 45px;
                height: 45px;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <h1>L2 U11-20 單字挑戰無極限</h1>
        <div class="score-display">Score: <span id="score">0</span></div>
        <div id="setup-screen">
            <p>準備好挑戰你的單字能力了嗎？點擊開始！</p>
            <button class="start-btn" id="start-game">Start Game</button>
        </div>
        <div id="game-screen" style="display: none;">
            <div class="word-display" id="current-word">單字</div>
            <div class="pos-display" id="current-pos">詞性</div>
            <div class="timer-container">
                <div class="timer-bar" id="timer-bar"></div>
            </div>
            <div class="options-container">
                <div class="pumpkin-option pumpkin-1" data-option="1">
                    <div class="pumpkin-text" id="option-1">選項1</div>
                </div>
                <div class="pumpkin-option pumpkin-2" data-option="2">
                    <div class="pumpkin-text" id="option-2">選項2</div>
                </div>
                <div class="pumpkin-option pumpkin-3" data-option="3">
                    <div class="pumpkin-text" id="option-3">選項3</div>
                </div>
                <div class="pumpkin-option pumpkin-4" data-option="4">
                    <div class="pumpkin-text" id="option-4">選項4</div>
                </div>
            </div>
            <div class="ghost"></div>
            <div class="bats" id="bats-container"></div>
        </div>
        <div class="game-over" id="game-over">
            <h2 id="result-message">Game Over!</h2>
            <div>Final Score: <span id="final-score">0</span></div>
            <button class="restart-btn" id="restart-btn">再玩一次</button>
        </div>
    </div>

    <script>
        // 遊戲變數
        let vocabulary = [];
        let currentWord = null;
        let score = 0;
        let timer = null;
        let timeLeft = 8;
        let gameActive = false;
        let batInterval = null;
        let canAnswer = true;
        let usedInCurrentSession = [];
        
        // DOM元素
        const setupScreen = document.getElementById('setup-screen');
        const gameScreen = document.getElementById('game-screen');
        const gameOverScreen = document.getElementById('game-over');
        const startGameBtn = document.getElementById('start-game');
        const restartBtn = document.getElementById('restart-btn');
        const currentWordDisplay = document.getElementById('current-word');
        const currentPosDisplay = document.getElementById('current-pos');
        const optionDisplays = [
            document.getElementById('option-1'),
            document.getElementById('option-2'),
            document.getElementById('option-3'),
            document.getElementById('option-4')
        ];
        const scoreDisplay = document.getElementById('score');
        const finalScoreDisplay = document.getElementById('final-score');
        const resultMessage = document.getElementById('result-message');
        const timerBar = document.getElementById('timer-bar');
        const batsContainer = document.getElementById('bats-container');
        const pumpkinOptions = document.querySelectorAll('.pumpkin-option');
        
        // 單字庫
        const wordList = `efficient, adj., 效率高的;有能力的
moist, adj., 潮濕的;微濕的
satisfactory, adj., 令人滿意的
scary, adj., 膽小的;提心吊膽的
bait, v., 置餌於
dare, v., 敢;膽敢;激某人做某事
flame, v., 發火焰;燃燒
pilot, v., 駕駛(飛機等); 帶領;引導; 試點
relax, v., 使鬆弛;使鬆懈;放鬆
shame, v., 使感到羞恥
activity, n., 活動
advisor, n., (or adviser) 顧問; 導師; 提供意見者
column, n., (報紙的)欄;段;行
harbor, n., 港灣;海港 (美式拼寫)
hatch, n., (船的)艙口
laughter, n., 笑;笑聲
liberty, n., 自由;自由權
lighthouse, n., 燈塔
liver, n., 肝臟
pause, n., 暫停;間歇;躊躇;猶豫
pavement, n., 鋪築過的地面;人行道
personality, n., 人格;品格
robbery, n., 搶劫;盜取;搶劫案
skate, n., 冰鞋
snap, n., 猛咬;突然折斷;劈啪聲;快照;活力
stomach, n., 胃
hasty, adj., 倉促的;輕率的
indoor, adj., 室內的;戶內的
stubborn, adj., 倔強的;頑固的
channel, v., 在...開水道;傳送
knit, v., 編織
murder, v., 謀殺;兇殺
portion, v., 分配
regret, v., 懊悔
tug, v., 用力拉
whip, v., 鞭笞;抽打
wrap, v., 包;裹
appeal, n., 呼籲;懇求
arrival, n., 到達
ceramics, n., (當單數用)製陶業
disease, n., 病;疾病
gang, n., 一幫;一群;惡少幫
garlic, n., 大蒜;蒜頭
inventor, n., 發明家
merchant, n., 商人
musical, n., 歌舞劇;音樂片
shame, n., 羞恥(心);羞愧(感)
tourist, n., 旅遊者;觀光者
wrist, n., 手腕
electric, adj., 電的
inferior, adj., 低等的;下級的
innocent, adj., 無罪的;清白的
ripe, adj., 成熟的
suitable, adj., 適當的;合適的;適宜的
breeze, v., 吹著微風
communicate, v., 傳達;傳遞
glance, v., 看一下;一瞥;掃視
repair, v., 修理
seal, v., 封;密封;蓋章
sip, v., 啜飲
sorrow, v., 感到悲傷;懊悔;遺憾
tend, v., 走向;趨向;照料
indeed, adv., 確實;實在
announcement, n., 宣佈
automobile, n., 汽車(=auto)
broom, n., 掃帚
chain, n., 鏈條;項圈
laundry, n., 洗衣店;送洗的衣服
lawn, n., 草坪;草地
mathematics, n., 數學 (=math or maths)
parade, n., 行列;遊行
proposal, n., 提議;計劃;提案; 求婚
release, n., 發行;發表;釋放;解放
shampoo, n., 洗髮精
system, n., 系統
actual, adj., 實際的;事實上的
harmful, adj., 有害的
humorous, adj., 幽默的 (美式拼寫)
latter, adj. n., 後面的; 後者
native, adj., 本土的;本國的
previous, adj., 先的;以前的
primary, adj., 主要的;初級的
steady, adj., 穩固的;平穩的
steep, adj., 陡峭的
appeal, v., 呼籲;懇求; 申訴;上訴
inform, v., 通知;告知
parcel, v., 打包;分;分配
staff, v., 給...配備職員
vary, v., 使不同;變更;呈多樣化
weave, v., 織;編
chimney, n., 煙囪
consideration, n., 考慮
disc, n., 圓盤;盤狀物;鐵餅; 磁盤(disk)
existence, n., 存在;實在
experiment, n., 實驗;試驗
gasoline, n., 汽油 (=gas)
guidance, n., 指導;引導;領導
kettle, n., 水壺
keyboard, n., 鍵盤
liar, n., 說謊的人
majority, n., 過半數;大多數
necessity, n., 必需品
portion, n., (一)部分
reaction, n., 反應;感應
receiver, n., 受領人;收件人;收款人; 電話聽筒
rot, n., 腐爛;腐壞;腐敗;墮落
stepfather, n., 繼父;後父（=stepdad）
considerable, adj., 相當大的;相當多的
elderly, adj., 年長的;上了年紀的
handy, adj., 便利的;靈活的;易於操作的
internal, adj., 內部的; 內政的; 國內的
scarce, adj., 缺乏的;不足的
account, v., 把...視為;說明
define, v., 解釋;給...下定義
diet, v., 節食
rent, v., 租
structure, v., 構造;組織;建造
sum, v., 計算...的總和
wipe, v., 擦;揩乾
advice, n., 忠告
agriculture, n., 農業
creator, n., 創造者;創作者
fashion, n., 流行式樣;時尚
major, n., 主修
pay, n., 薪俸;報酬;報償;懲罰
pressure, n., 壓力
risk, n., 危險;風險
robber, n., 搶劫者;強盜
stare, n., 凝視;注視
stocking, n., 長襪
tide, n., 潮汐;潮水
transport, n., 交通工具; 運輸; 運送
vitamin, n., 維他命
additional, adj., 附加的;額外的
crispy, adj., 酥脆的;清脆的
medical, adj., 醫學的;醫術的;醫療的
plastic, adj., 可塑的;塑性的;整形的
precious, adj., 寶貴的
assist, v., 幫助;協助
boot, v., 開機
dash, v., 急奔;使(希望等)破滅;使沮喪
deposit, v., 放下;放置;寄存
employ, v., 僱用
hesitate, v., 躊躇;猶豫
mend, v., 修理;修補
pave, v., 鋪;築(路等)
pour, v., 倒;灌;注
scrub, v., 用力擦洗;揉
somewhat, adv., 有點;稍微
arithmetic, adj., 算術的
darling, n., 心愛的人; 親愛的 (=dear)
drip, n., 滴下;滴水聲
friendship, n., 友誼
mob, n., 暴民;烏合之眾
politician, n., 政客
request, n., 要求;請求
splash, n., 濺潑聲
statue, n., 雕像;塑像
sweat, n., 汗;汗水
violet, n., 紫蘿蘭(色)
aware, adj., 知道的;察覺的
diligent, adj., 勤勉的
sticky, adj., 黏的;塗有黏膠物質的;泥濘的
approve, v., 同意;贊許
jail, v., 監禁;拘留
leak, v., 洩漏(祕密等)
manage, v., 管理;經營;處理
pickle, v., 醃製;將...做成泡菜
process, v., 加工; 沖洗(膠卷); 處理
achievement, n., 成就
angle, n., 角度
blame, n., 責備;指責;責任
democracy, n., 民主
disappointment, n., 失望;掃興;沮喪
faint, n., 昏厥
file, n., 檔案;案卷
harvest, n., 收穫
injury, n., 傷害
jaw, n., 頜;顎
medal, n., 獎章;紀念章;勳章
process, n., 過程;進程
reserve, n., 儲備(物);儲備金;保留(物);儲藏量
sore, n., 痛處;瘡;潰瘍;傷心事
sting, n., 螫針;刺; 騙局; 圈套
tax, n., 稅;稅金
upset, n., 翻倒;傾覆
expressive, adj., 表達的;表情豐富的
sufficient, adj., 足夠的;充分的
dim, v., 變暗淡;變模糊
frustrate, v., 挫敗;阻撓
observe, v., 看到;觀察; 慶祝
pad, v., 填塞;襯填
schedule, v., 安排;將……列入計畫(或時間)表
suffer, v., 遭受;經歷;受苦;患病
yawn, v., 打呵欠
seldom, adv., 很少地
shortly, adv., 立刻;馬上;簡短地;扼要地
account, n., 帳目;描述
attempt, n., 企圖;嘗試
award, n., 獎;獎品
exit, n., 出口
grin, n., 露齒的笑
import, n., 進口商品
lung, n., 肺;肺臟
magnet, n., 磁鐵;磁石
manager, n., 經理
orphan, n., 孤兒
pill, n., 藥丸;藥片
postponement, n., 延期;延緩
product, n., 產品
representative, n., 代表;代理人
rocket, n., 飛彈;火箭
scream, n., 尖叫;尖銳刺耳的聲音
scrub, n., 擦洗;擦淨; 矮樹叢
technique, n., 技巧;技術
vase, n., 花瓶
yell, n., 叫喊;吼叫;歡呼
chill, adj., 涼颼颼的
industrial, adj., 工業的;產業的
rough, adj., 粗糙的;表面不平的
sensitive, adj., 敏感的;易受傷害的
dive, v., 跳水
feature, v., 以...為特色
injure, v., 傷害;損害;毀壞
pause, v., 中止
remove, v., 移動;搬開
represent, v., 象徵;表示
stab, v., 刺;戳
afterwards, adv., 之後;後來
barely, adv., 僅僅;勉強
someday, adv., 將來有一天
beneath, prep., 在...之下
attitude, n., 態度
billion, n., 十億
blouse, n., 女裝短上衣
bush, n., 灌木
command, n., 命令; 管轄; 指揮
deposit, n., 存款; 訂金；沈積
evil, n., 邪惡;罪惡
junk, n., 廢棄的舊物
leather, n., 皮革
mall, n., 大規模購物中心
mention, n., 提及;說起
missile, n., 飛彈;導彈
opportunity, n., 機會;良機
original, n., 原著;原畫;原版
razor, n., 剃刀
sack, n., 袋;粗布袋
shade, n., 蔭;陰涼處;陰暗
spice, n., 香料;調味品;少許;一點
squeeze, n., 榨;壓榨; 捏
switch, n., 開關;電閘
territory, n., 領土;版圖
complex, adj., 複雜的
desirable, adj., 值得嚮往的;富有魅力的
educational, adj., 教育的
empty, adj., 空的
historical, adj., 歷史的;史學的
shady, adj., 陰涼的; 可疑的;名聲不好的
breathe, v., 呼吸
challenge, v., 對...提出異議
comfort, v., 安慰;慰問
gang, v., 成群結隊;結夥
interrupt, v., 打斷(談話和工作等)
nickname, v., 給...起綽號
perform, v., 履行;執行;表演; 演奏
reduce, v., 減少;縮小;降低
reserve, v., 儲備;保存;保留
signal, v., 發信號;打信號
tumble, v., 跌倒;滾下
cattle, n., 牛;牲口;家畜
channel, n., 管道;頻道; 航道; 海峽
chop, n., 肋骨肉
cycle, n., 週期;循環; 自行車/摩托車
diet, n., 飲食;特種飲食
employment, n., 雇用;受雇
heel, n., 腳後跟;踵
kit, n., 成套工具;配套元件
poster, n., 招貼;海報;廣告(畫)
protection, n., 保護
pub, n., 酒吧
threat, n., 威脅;恐嚇
tickle, n., 呵癢;癢感;使人癢的東西
trail, n., 拖曳物;尾部; 蹤跡; 小徑
violence, n., 暴力行為
warmth, n., 溫暖;親切;熱情   `;
        
        // 初始化遊戲
        function initGame() {
            // 解析單字列表
            vocabulary = parseWordList(wordList);
            
            if (vocabulary.length === 0) {
                alert('單字庫載入失敗！');
                return;
            }
            
            // 重置遊戲狀態
            score = 0;
            scoreDisplay.textContent = score;
            usedInCurrentSession = [];
            
            // 切換到遊戲畫面
            setupScreen.style.display = 'none';
            gameScreen.style.display = 'block';
            gameOverScreen.style.display = 'none';
            
            // 開始遊戲
            gameActive = true;
            canAnswer = true;
            
            // 開始蝙蝠動畫
            startBatAnimation();
            
            nextQuestion();
        }
        
        // 開始蝙蝠動畫
        function startBatAnimation() {
            batInterval = setInterval(() => {
                createBat();
            }, 2000);
        }
        
        // 創建蝙蝠
        function createBat() {
            const bat = document.createElement('div');
            bat.className = 'bat';
            
            // 隨機位置和大小
            const size = Math.random() * 20 + 10;
            bat.style.width = `${size}px`;
            bat.style.height = `${size}px`;
            bat.style.left = `-${size}px`;
            bat.style.top = `${Math.random() * 80 + 10}%`;
            
            // 隨機動畫時間
            const duration = Math.random() * 5 + 5;
            
            // 添加到容器
            batsContainer.appendChild(bat);
            
            // 開始動畫
            setTimeout(() => {
                bat.style.animation = `batFly ${duration}s linear forwards`;
            }, 10);
            
            // 動畫結束後移除
            setTimeout(() => {
                bat.remove();
            }, duration * 1000);
        }
        
        // 停止蝙蝠動畫
        function stopBatAnimation() {
            clearInterval(batInterval);
            batsContainer.innerHTML = '';
        }
        
        // 解析單字列表
        function parseWordList(text) {
            const lines = text.split('\n');
            const words = [];
            
            for (const line of lines) {
                const trimmedLine = line.trim();
                if (!trimmedLine) continue;
                
                const parts = trimmedLine.split(',');
                if (parts.length < 3) continue;
                
                const word = parts[0].trim();
                const pos = parts[1].trim();
                const meanings = parts[2].split(';').map(m => m.trim()).filter(m => m);
                
                for (const meaning of meanings) {
                    words.push({
                        word: word,
                        pos: pos,
                        meaning: meaning
                    });
                }
            }
            
            return words;
        }
        
        // 下一題
        function nextQuestion() {
            if (!gameActive) return;
            
            // 清除之前的計時器
            if (timer) {
                clearInterval(timer);
                timer = null; // 重要：將計時器設為null
            }
            
            // 啟用所有選項
            canAnswer = true;
            pumpkinOptions.forEach(option => {
                option.classList.remove('disabled');
            });
            
            // 如果本局已用完所有單字，清空記錄以開始新一輪
            if (usedInCurrentSession.length >= vocabulary.length) {
                usedInCurrentSession = [];
            }
            
            // 找出尚未使用的索引
            const availableIndices = vocabulary
                .map((_, i) => i)
                .filter(i => !usedInCurrentSession.includes(i));
            
            // 安全防護
            if (availableIndices.length === 0) {
                usedInCurrentSession = [];
                nextQuestion();
                return;
            }
            
            // 隨機選擇一個未使用過的問題
            const randomIndex = availableIndices[Math.floor(Math.random() * availableIndices.length)];
            usedInCurrentSession.push(randomIndex);
            currentWord = vocabulary[randomIndex];
            
            // 添加淡入效果
            currentWordDisplay.classList.add('fade-out');
            currentPosDisplay.classList.add('fade-out');
            
            setTimeout(() => {
                // 顯示單字和詞性
                currentWordDisplay.textContent = currentWord.word;
                currentPosDisplay.textContent = currentWord.pos;
                
                // 準備選項
                prepareOptions();
                
                // 淡入效果
                currentWordDisplay.classList.remove('fade-out');
                currentPosDisplay.classList.remove('fade-out');
                currentWordDisplay.classList.add('fade-in');
                currentPosDisplay.classList.add('fade-in');
                
                // 重置計時器
                timeLeft = 8;
                timerBar.style.width = '100%';
                timerBar.classList.remove('timer-warning');
                
                // 開始倒計時
                timer = setInterval(() => {
                    timeLeft -= 0.1;
                    timerBar.style.width = `${(timeLeft / 8) * 100}%`;
                    
                    if (timeLeft <= 3 && !timerBar.classList.contains('timer-warning')) {
                        timerBar.classList.add('timer-warning');
                    }
                    
                    if (timeLeft <= 0) {
                        clearInterval(timer);
                        timer = null; // 重要：將計時器設為null
                        endGame(false);
                    }
                }, 100);
                
                setTimeout(() => {
                    currentWordDisplay.classList.remove('fade-in');
                    currentPosDisplay.classList.remove('fade-in');
                }, 300);
            }, 200);
        }
        
        // 準備選項
        function prepareOptions() {
            const correctAnswer = currentWord.meaning;
            const otherMeanings = vocabulary
                .filter(item => item.meaning !== correctAnswer)
                .map(item => item.meaning);
            
            const wrongAnswers = [];
            while (wrongAnswers.length < 3 && otherMeanings.length > 0) {
                const randomIndex = Math.floor(Math.random() * otherMeanings.length);
                const selectedMeaning = otherMeanings[randomIndex];
                if (!wrongAnswers.includes(selectedMeaning)) {
                    wrongAnswers.push(selectedMeaning);
                    otherMeanings.splice(randomIndex, 1);
                }
            }
            
            const allOptions = [correctAnswer, ...wrongAnswers];
            shuffleArray(allOptions);
            
            for (let i = 0; i < 4; i++) {
                if (i < allOptions.length) {
                    optionDisplays[i].textContent = allOptions[i];
                    optionDisplays[i].parentElement.dataset.meaning = allOptions[i];
                } else {
                    optionDisplays[i].textContent = '無選項';
                    optionDisplays[i].parentElement.dataset.meaning = '';
                }
            }
        }
        
        // 打亂陣列順序
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }
        
        // 檢查答案
        function checkAnswer(selectedOption) {
            if (!gameActive || !canAnswer) return;
            
            canAnswer = false;
            pumpkinOptions.forEach(option => {
                option.classList.add('disabled');
            });
            
            const selectedMeaning = selectedOption.dataset.meaning;
            const isCorrect = selectedMeaning === currentWord.meaning;
            
            if (isCorrect) {
                // 清除計時器
                if (timer) {
                    clearInterval(timer);
                    timer = null; // 重要：將計時器設為null
                }
                
                score += 5;
                scoreDisplay.textContent = score;
                showCorrectEffect(selectedOption);
                setTimeout(() => {
                    nextQuestion();
                }, 500);
            } else {
                // 清除計時器
                if (timer) {
                    clearInterval(timer);
                    timer = null; // 重要：將計時器設為null
                }
                endGame(false);
            }
        }
        
        // 顯示正確效果
        function showCorrectEffect(correctOption) {
            correctOption.style.transform = 'scale(1.1)';
            correctOption.style.filter = 'drop-shadow(0 0 15px #ff9f43)';
            createBatsEffect();
            setTimeout(() => {
                correctOption.style.transform = '';
                correctOption.style.filter = '';
            }, 500);
        }
        
        // 創建蝙蝠效果
        function createBatsEffect() {
            for (let i = 0; i < 5; i++) {
                setTimeout(() => {
                    createBat();
                }, i * 100);
            }
        }
        
        // 結束遊戲
        function endGame(isWin) {
            gameActive = false;
            canAnswer = false;
            
            // 確保計時器被清除
            if (timer) {
                clearInterval(timer);
                timer = null;
            }
            
            stopBatAnimation();
            
            finalScoreDisplay.textContent = score;
            resultMessage.textContent = isWin ? '恭喜你贏了!' : 'Game Over!';
            gameOverScreen.style.display = 'flex';
            
            if (!isWin) {
                gameScreen.style.animation = 'shake 0.5s';
                setTimeout(() => {
                    gameScreen.style.animation = '';
                }, 500);
            }
        }
        
        // 重新開始遊戲
        function restartGame() {
            gameOverScreen.style.display = 'none';
            setupScreen.style.display = 'block';
            gameScreen.style.display = 'none';
        }
        
        // 事件監聽器
        document.addEventListener('DOMContentLoaded', function() {
            startGameBtn.addEventListener('click', initGame);
            restartBtn.addEventListener('click', restartGame);
            
            document.querySelectorAll('.pumpkin-option').forEach(option => {
                option.addEventListener('click', () => {
                    checkAnswer(option);
                });
            });
        });
    </script>
</body>
</html>
