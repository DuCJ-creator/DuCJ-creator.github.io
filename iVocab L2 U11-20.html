<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>U11-20 å–®å­—æŒ‘æˆ°ç„¡æ¥µé™ - è¬è–ç¯€ç‰¹åˆ¥ç‰ˆ</title>
    <style>
        /* åŸºç¤æ¨£å¼é‡ç½® */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            font-family: 'Comic Sans MS', cursive, sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            background-size: cover;
            background-attachment: fixed;
            overflow-x: hidden;
            touch-action: manipulation;
        }

        .device-info {
            position: fixed;
            top: 10px;
            left: 10px;
            background: rgba(0,0,0,0.7);
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 12px;
            z-index: 1000;
        }
        
        .game-container {
            background-color: rgba(255, 255, 255, 0.9);
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
            padding: 20px;
            width: 95%;
            max-width: 800px;
            text-align: center;
            position: relative;
            border: 5px solid #f05454;
            overflow: hidden;
            margin: 10px;
        }
        
        h1 {
            color: #f05454;
            margin-bottom: 15px;
            font-size: 1.8rem;
            text-shadow: 2px 2px 0px #fff, 0 0 5px #ff9f43;
            line-height: 1.3;
        }
        
        .word-display {
            font-size: 2rem;
            margin: 15px 0;
            color: #f05454;
            font-weight: bold;
            text-shadow: 2px 2px 0px #fff;
            transition: opacity 0.3s ease;
            line-height: 1.2;
        }
        
        .pos-display {
            font-size: 1.2rem;
            color: #f05454;
            margin-bottom: 10px;
            font-style: italic;
            text-shadow: 1px 1px 0px #fff;
            transition: opacity 0.3s ease;
        }

        .countdown {
            font-size: 1.3rem;
            font-weight: bold;
            color: #f05454;
            margin-bottom: 8px;
            text-shadow: 1px 1px 0px #fff;
        }

        .countdown.pulse {
            animation: pulseText 0.5s;
        }

        @keyframes pulseText {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }
        
        .options-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            margin: 15px 0 10px;
            gap: 10px;
        }
        
        .pumpkin-option {
            width: 45%;
            max-width: 160px;
            height: 140px;
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            margin: 5px;
            filter: drop-shadow(0 5px 5px rgba(0,0,0,0.3));
            touch-action: manipulation;
        }
        
        .pumpkin-option:active {
            transform: translateY(-5px) scale(1.05);
        }
        
        .pumpkin-text {
            position: absolute;
            bottom: 15px;
            left: 0;
            right: 0;
            text-align: center;
            font-size: 0.9rem;
            color: #fff;
            font-weight: bold;
            padding: 8px;
            background-color: rgba(0,0,0,0.8);
            border-radius: 10px;
            margin: 0 10px;
            text-shadow: 1px 1px 0 #000;
            min-height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.5);
            line-height: 1.3;
            overflow: hidden;
            text-overflow: ellipsis;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
        }
        
        .timer-container {
            width: 100%;
            height: 15px;
            background-color: #f0f0f0;
            border-radius: 10px;
            margin: 10px 0 15px;
            overflow: hidden;
            border: 2px solid #f05454;
        }
        
        .timer-bar {
            height: 100%;
            width: 100%;
            background: linear-gradient(to right, #f05454, #ff9f43);
            transition: width 0.1s linear;
            border-radius: 8px;
        }

        .timer-warning {
            animation: pulse 0.5s infinite alternate;
        }
        
        @keyframes pulse {
            from { opacity: 1; }
            to { opacity: 0.5; }
        }
        
        .ghost {
            position: absolute;
            width: 60px;
            height: 60px;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path fill="%23f0f0f0" d="M40.1 467.1l-11.2 9c-3.2 2.5-7.1 3.9-11.1 3.9-8.3 0-15.8-6-15.8-16.1c0-5.5 2.5-10.5 6.9-14.1C40.5 439.8 76.6 384 76.6 256c0-168.3-17.7-208-76.6-208C0 48 0 48 0 32C0 14.3 14.3 0 32 0h320c17.7 0 32 14.3 32 32c0 16 0 16-76.6 0c-58.9 0-76.6 39.7-76.6 208c0 128 36.1 183.8 66.3 209.8c4.4 3.6 6.9 8.6 6.9 14.1c0 10.1-7.5 16.1-15.8 16.1c-4 0-7.9-1.4-11.1-3.9l-11.2-9c-6.9-5.5-17.1-5.5-24 0c-6.9 5.5-17.1 5.5-24 0l-11.2-9c-6.9-5.5-17.1-5.5-24 0c-6.9 5.5-17.1 5.5-24 0l-11.2-9c-6.9-5.5-17.1-5.5-24 0c-6.9 5.5-17.1 5.5-24 0l-11.2-9c-6.9-5.5-17.1-5.5-24 0c-6.9 5.5-17.1 5.5-24 0zM128 128c-17.7 0-32 14.3-32 32s14.3 32 32 32s32-14.3 32-32s-14.3-32-32-32zm128 0c-17.7 0-32 14.3-32 32s14.3 32 32 32s32-14.3 32-32s-14.3-32-32-32z"/></svg>');
            background-size: contain;
            background-repeat: no-repeat;
            bottom: 15px;
            left: 50%;
            transform: translateX(-50%);
            animation: float 2s infinite alternate ease-in-out;
            z-index: 10;
            filter: drop-shadow(0 0 10px rgba(255,255,255,0.5));
        }
        
        @keyframes float {
            0% { transform: translate(-50%, 0); }
            100% { transform: translate(-50%, -15px); }
        }
        
        .score-display {
            font-size: 1.2rem;
            color: #f05454;
            margin: 8px 0 10px;
            font-weight: bold;
            text-shadow: 1px 1px 0px #fff;
        }
        
        .game-over {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 100;
            flex-direction: column;
            color: white;
            font-size: 1.5rem;
            text-shadow: 2px 2px 0px #000;
            padding: 20px;
            text-align: center;
        }

        .game-over.active {
            display: flex;
        }
        
        .game-over h2 {
            font-size: 2.2rem;
            margin-bottom: 15px;
            color: #f05454;
        }
        
        .restart-btn, .start-btn {
            padding: 14px 28px;
            background-color: #f05454;
            color: white;
            border: none;
            border-radius: 50px;
            font-size: 1.2rem;
            cursor: pointer;
            margin-top: 20px;
            transition: all 0.3s;
            text-shadow: 1px 1px 0px #000;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            touch-action: manipulation;
            min-width: 180px;
        }
        
        .restart-btn:active, .start-btn:active {
            background-color: #ff9f43;
            transform: scale(0.98);
        }
        
        .bats {
            position: absolute;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 5;
        }
        
        .bat {
            position: absolute;
            width: 25px;
            height: 25px;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path fill="%23f05454" d="M320 160c28.7 0 54.9 10 75.4 26.6 5.1 4.2 11.3 5.3 17 3.1 18.8-7.2 39.7-10.6 60.9-10.6 8.3 0 16.8.7 25.1 2.1 5.9.9 11.6-2 14.3-7.3 9.5-19 15.3-40.6 15.3-63.9 0-61.9-50.1-112-112-112-16.7 0-32.8 3.7-47.4 10.5-4.5 2.1-9.8 1.3-13.8-1.9-11.1-8.9-24.6-14.6-39.2-14.6s-28.1 5.7-39.2 14.6c-4 3.2-9.3 4-13.8 1.9-14.6-6.8-30.7-10.5-47.4-10.5-61.9 0-112 50.1-112 112 0 23.3 5.8 44.9 15.3 63.9 2.7 5.3 8.4 8.2 14.3 7.3 8.3-1.4 16.8-2.1 25.1-2.1 21.2 0 42.1 3.4 60.9 10.6 5.7 2.2 11.9 1.1 17-3.1C265.1 170 291.3 160 320 160zm0-48c13.2 0 24 10.8 24 24s-10.8 24-24 24-24-10.8-24-24 10.8-24 24-24zm-144 56c-28.7 0-54.9 10-75.4 26.6-5.1 4.2-11.3 5.3-17 3.1-18.8-7.2-39.7-10.6-60.9-10.6-8.3 0-16.8.7-25.1 2.1-5.9.9-11.6-2-14.3-7.3C2.8 172.9 0 150.7 0 128 0 66.1 50.1 16 112 16c16.7 0 32.8 3.7 47.4 10.5 4.5 2.1 9.8 1.3 13.8-1.9 11.1-8.9 24.6-14.6 39.2-14.6s28.1 5.7 39.2 14.6c4 3.2 9.3 4 13.8 1.9 14.6-6.8 30.7-10.5 47.4-10.5 61.9 0 112 50.1 112 112 0 22.7-2.8 44.9-8.3 65.5-2.7 5.3-8.4 8.2-14.3 7.3-8.3-1.4-16.8-2.1-25.1-2.1-21.2 0-42.1 3.4-60.9 10.6-5.7 2.2-11.9 1.1-17-3.1-20.5-16.6-46.7-26.6-75.4-26.6zm-24 80c-13.2 0-24-10.8-24-24s10.8-24 24-24 24 10.8 24 24-10.8 24-24 24zm256 0c-13.2 0-24-10.8-24-24s10.8-24 24-24 24 10.8 24 24-10.8 24-24 24zm-224 32c-119 0-216 96.9-216 216 0 57.3 22.5 109.4 59 148 3.1 3.3 7.9 4.1 11.9 2 17.8-9.2 37.6-14 58.1-14 8.3 0 16.5.7 24.6 1.9 5.1.8 10-1.9 12-6.7 7.1-17.3 20.6-31.8 37.9-38.9 1.3-.5 2.7-.8 4-1.1V320c0-52.9 43.1-96 96-96s96 43.1 96 96v56.2c1.3.4 2.7.7 4 1.1 17.3 7.1 30.8 21.6 37.9 38.9 2 4.8 6.9 7.5 12 6.7 8.1-1.2 16.3-1.9 24.6-1.9 20.5 0 40.3 4.8 58.1 14 4 2.1 8.8 1.3 11.9-2 36.5-38.6 59-90.7 59-148 0-119.1-97-216-216-216z"/></svg>');
            background-size: contain;
            background-repeat: no-repeat;
            opacity: 0;
        }
        
        /* å››ç¨®ä¸åŒé¡è‰²çš„å—ç“œç‡ˆ */
        .pumpkin-1 { background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="%23f05454" d="M352 0c-27.8 0-53.3 8.6-74.5 23.1C256.5 8.6 231 0 203.2 0 91 0 0 91 0 203.2c0 132.4 125.8 200.5 203.4 308.8 11 15.4 28.4 25.6 48.4 25.6h8.4c20 0 37.4-10.2 48.4-25.6C386.2 403.7 512 335.6 512 203.2 512 91 421 0 352 0zm-96 480c-3.5 0-6.8-1.8-9.1-4.8-4.1-5.8-102.3-145.7-102.3-272 0-81.9 66.6-148.5 148.5-148.5S441 121.3 441 203.2c0 126.3-98.2 266.2-102.3 272-2.3 3-5.6 4.8-9.1 4.8h-83.2z"/><path fill="%23ff9f43" d="M203.4 308.8C125.8 200.5 0 132.4 0 203.2 0 91 91 0 203.2 0c27.8 0 53.3 8.6 74.5 23.1 21.2-14.5 46.7-23.1 74.5-23.1 69 0 160 91 160 203.2 0 132.4-125.8 200.5-203.4 308.8-11 15.4-28.4 25.6-48.4 25.6h-8.4c-20 0-37.4-10.2-48.4-25.6zM352 56c-16.5 0-32.3 3.3-46.8 9.2 5.3 5.1 10.4 10.4 15.2 16.1C338.3 70.8 345 68 352 68c74.9 0 136 61.1 136 136 0 28.9-9.3 56.3-25.4 78.9 5.8-16.5 9.4-34.2 9.4-52.6C472 121.3 405.4 56 352 56zM203.2 56c-16.5 0-32.3 3.3-46.8 9.2 5.3 5.1 10.4 10.4 15.2 16.1 19.9-10.3 42.4-16.1 66.4-16.1 53.4 0 99.5 30.7 120.9 75.4 10.1-16.4 16.2-35.1 16.2-55.4 0-16.5-3.3-32.3-9.2-46.8C293.5 59.3 268 56 240.2 56h-37z"/><circle fill="%23000" cx="160" cy="160" r="16"/><circle fill="%23000" cx="352" cy="160" r="16"/><path fill="%23000" d="M256 240c-35.3 0-64 28.7-64 64s28.7 64 64 64 64-28.7 64-64-28.7-64-64-64zm0 96c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"/></svg>'); }
        .pumpkin-2 { background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="%23ff9f43" d="M352 0c-27.8 0-53.3 8.6-74.5 23.1C256.5 8.6 231 0 203.2 0 91 0 0 91 0 203.2c0 132.4 125.8 200.5 203.4 308.8 11 15.4 28.4 25.6 48.4 25.6h8.4c20 0 37.4-10.2 48.4-25.6C386.2 403.7 512 335.6 512 203.2 512 91 421 0 352 0zm-96 480c-3.5 0-6.8-1.8-9.1-4.8-4.1-5.8-102.3-145.7-102.3-272 0-81.9 66.6-148.5 148.5-148.5S441 121.3 441 203.2c0 126.3-98.2 266.2-102.3 272-2.3 3-5.6 4.8-9.1 4.8h-83.2z"/><path fill="%23f05454" d="M203.4 308.8C125.8 200.5 0 132.4 0 203.2 0 91 91 0 203.2 0c27.8 0 53.3 8.6 74.5 23.1 21.2-14.5 46.7-23.1 74.5-23.1 69 0 160 91 160 203.2 0 132.4-125.8 200.5-203.4 308.8-11 15.4-28.4 25.6-48.4 25.6h-8.4c-20 0-37.4-10.2-48.4-25.6zM352 56c-16.5 0-32.3 3.3-46.8 9.2 5.3 5.1 10.4 10.4 15.2 16.1C338.3 70.8 345 68 352 68c74.9 0 136 61.1 136 136 0 28.9-9.3 56.3-25.4 78.9 5.8-16.5 9.4-34.2 9.4-52.6C472 121.3 405.4 56 352 56zM203.2 56c-16.5 0-32.3 3.3-46.8 9.2 5.3 5.1 10.4 10.4 15.2 16.1 19.9-10.3 42.4-16.1 66.4-16.1 53.4 0 99.5 30.7 120.9 75.4 10.1-16.4 16.2-35.1 16.2-55.4 0-16.5-3.3-32.3-9.2-46.8C293.5 59.3 268 56 240.2 56h-37z"/><circle fill="%23000" cx="160" cy="160" r="16"/><circle fill="%23000" cx="352" cy="160" r="16"/><path fill="%23000" d="M256 240c-35.3 0-64 28.7-64 64s28.7 64 64 64 64-28.7 64-64-28.7-64-64-64zm0 96c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"/></svg>'); }
        .pumpkin-3 { background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="%23e67e22" d="M352 0c-27.8 0-53.3 8.6-74.5 23.1C256.5 8.6 231 0 203.2 0 91 0 0 91 0 203.2c0 132.4 125.8 200.5 203.4 308.8 11 15.4 28.4 25.6 48.4 25.6h8.4c20 0 37.4-10.2 48.4-25.6C386.2 403.7 512 335.6 512 203.2 512 91 421 0 352 0zm-96 480c-3.5 0-6.8-1.8-9.1-4.8-4.1-5.8-102.3-145.7-102.3-272 0-81.9 66.6-148.5 148.5-148.5S441 121.3 441 203.2c0 126.3-98.2 266.2-102.3 272-2.3 3-5.6 4.8-9.1 4.8h-83.2z"/><path fill="%23d35400" d="M203.4 308.8C125.8 200.5 0 132.4 0 203.2 0 91 91 0 203.2 0c27.8 0 53.3 8.6 74.5 23.1 21.2-14.5 46.7-23.1 74.5-23.1 69 0 160 91 160 203.2 0 132.4-125.8 200.5-203.4 308.8-11 15.4-28.4 25.6-48.4 25.6h-8.4c-20 0-37.4-10.2-48.4-25.6zM352 56c-16.5 0-32.3 3.3-46.8 9.2 5.3 5.1 10.4 10.4 15.2 16.1C338.3 70.8 345 68 352 68c74.9 0 136 61.1 136 136 0 28.9-9.3 56.3-25.4 78.9 5.8-16.5 9.4-34.2 9.4-52.6C472 121.3 405.4 56 352 56zM203.2 56c-16.5 0-32.3 3.3-46.8 9.2 5.3 5.1 10.4 10.4 15.2 16.1 19.9-10.3 42.4-16.1 66.4-16.1 53.4 0 99.5 30.7 120.9 75.4 10.1-16.4 16.2-35.1 16.2-55.4 0-16.5-3.3-32.3-9.2-46.8C293.5 59.3 268 56 240.2 56h-37z"/><circle fill="%23000" cx="160" cy="160" r="16"/><circle fill="%23000" cx="352" cy="160" r="16"/><path fill="%23000" d="M256 240c-35.3 0-64 28.7-64 64s28.7 64 64 64 64-28.7 64-64-28.7-64-64-64zm0 96c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"/></svg>'); }
        .pumpkin-4 { background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="%23d35400" d="M352 0c-27.8 0-53.3 8.6-74.5 23.1C256.5 8.6 231 0 203.2 0 91 0 0 91 0 203.2c0 132.4 125.8 200.5 203.4 308.8 11 15.4 28.4 25.6 48.4 25.6h8.4c20 0 37.4-10.2 48.4-25.6C386.2 403.7 512 335.6 512 203.2 512 91 421 0 352 0zm-96 480c-3.5 0-6.8-1.8-9.1-4.8-4.1-5.8-102.3-145.7-102.3-272 0-81.9 66.6-148.5 148.5-148.5S441 121.3 441 203.2c0 126.3-98.2 266.2-102.3 272-2.3 3-5.6 4.8-9.1 4.8h-83.2z"/><path fill="%23e67e22" d="M203.4 308.8C125.8 200.5 0 132.4 0 203.2 0 91 91 0 203.2 0c27.8 0 53.3 8.6 74.5 23.1 21.2-14.5 46.7-23.1 74.5-23.1 69 0 160 91 160 203.2 0 132.4-125.8 200.5-203.4 308.8-11 15.4-28.4 25.6-48.4 25.6h-8.4c-20 0-37.4-10.2-48.4-25.6zM352 56c-16.5 0-32.3 3.3-46.8 9.2 5.3 5.1 10.4 10.4 15.2 16.1C338.3 70.8 345 68 352 68c74.9 0 136 61.1 136 136 0 28.9-9.3 56.3-25.4 78.9 5.8-16.5 9.4-34.2 9.4-52.6C472 121.3 405.4 56 352 56zM203.2 56c-16.5 0-32.3 3.3-46.8 9.2 5.3 5.1 10.4 10.4 15.2 16.1 19.9-10.3 42.4-16.1 66.4-16.1 53.4 0 99.5 30.7 120.9 75.4 10.1-16.4 16.2-35.1 16.2-55.4 0-16.5-3.3-32.3-9.2-46.8C293.5 59.3 268 56 240.2 56h-37z"/><circle fill="%23000" cx="160" cy="160" r="16"/><circle fill="%23000" cx="352" cy="160" r="16"/><path fill="%23000" d="M256 240c-35.3 0-64 28.7-64 64s28.7 64 64 64 64-28.7 64-64-28.7-64-64-64zm0 96c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"/></svg>'); }
        
        /* å—ç“œç‡ˆä¸Šçš„èŠ±ç´‹ */
        .pumpkin-option::before {
            content: "";
            position: absolute;
            width: 100%;
            height: 100%;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="%23000" d="M256 0c-16.5 0-32.3 3.3-46.8 9.2 5.3 5.1 10.4 10.4 15.2 16.1 19.9-10.3 42.4-16.1 66.4-16.1 53.4 0 99.5 30.7 120.9 75.4 10.1-16.4 16.2-35.1 16.2-55.4 0-16.5-3.3-32.3-9.2-46.8C293.5 59.3 268 56 240.2 56h-37z"/></svg>');
            background-size: 80%;
            background-repeat: no-repeat;
            background-position: center;
            opacity: 0.2;
        }
        
        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            50% { transform: translateX(5px); }
            75% { transform: translateX(-5px); }
            100% { transform: translateX(0); }
        }
        
        @keyframes batFly {
            0% { transform: translate(0, 0) rotate(0deg); opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { transform: translate(100vw, -100vh) rotate(360deg); opacity: 0; }
        }
        
        /* ç¦ç”¨ç‹€æ…‹çš„å—ç“œç‡ˆ */
        .pumpkin-option.disabled {
            pointer-events: none;
            opacity: 0.7;
            filter: grayscale(50%);
        }

        .pumpkin-option.correct {
            transform: scale(1.08);
            filter: drop-shadow(0 0 15px #ff9f43);
        }

        .pumpkin-option.wrong {
            animation: shake 0.3s;
            filter: drop-shadow(0 0 10px #ff0000);
        }
        
        /* é¡Œç›®åˆ‡æ›å‹•ç•« */
        .fade-out {
            opacity: 0;
            transform: translateY(-10px);
            transition: all 0.3s ease;
        }
        
        .fade-in {
            opacity: 1;
            transform: translateY(0);
            transition: all 0.3s ease;
        }
        
        .score-display span {
            padding: 2px 10px;
            border-radius: 20px;
            background-color: rgba(255,255,255,0.8);
        }

        /* éŠæˆ²æ™‚é–“é¸æ“‡ */
        .time-selector {
            margin-top: 15px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 6px;
            font-size: 0.95rem;
            color: #f05454;
        }

        .time-selector span {
            margin-bottom: 4px;
        }

        .time-btn {
            background-color: #ffe0d4;
            color: #333;
            border: none;
            padding: 6px 14px;
            margin: 0 4px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9rem;
            box-shadow: 0 3px 0 #f5b79a;
            font-family: 'Comic Sans MS', cursive;
        }

        .time-btn.active {
            background-color: #ffb08a;
            box-shadow: 0 3px 0 #f05454;
            color: #fff;
        }

        .time-btn:active {
            transform: translateY(2px);
            box-shadow: 0 1px 0 #f5b79a;
        }
        
        /* éŸ¿æ‡‰å¼è¨­è¨ˆ - å¹³æ¿ */
        @media (min-width: 768px) {
            .game-container {
                padding: 25px;
            }
            
            h1 {
                font-size: 2.2rem;
            }
            
            .word-display {
                font-size: 2.3rem;
            }
            
            .pos-display {
                font-size: 1.4rem;
            }

            .countdown {
                font-size: 1.5rem;
            }
            
            .pumpkin-option {
                width: 22%;
                height: 150px;
            }
            
            .pumpkin-text {
                font-size: 1rem;
            }
            
            .ghost {
                width: 70px;
                height: 70px;
            }
            
            .score-display {
                font-size: 1.4rem;
            }
            
            .restart-btn, .start-btn {
                font-size: 1.3rem;
                padding: 16px 32px;
            }
        }
        
        /* éŸ¿æ‡‰å¼è¨­è¨ˆ - é›»è…¦ï¼ˆå¤§å­—ç‰ˆï¼‰ */
        @media (min-width: 1024px) {
            .game-container {
                padding: 30px;
                max-width: 900px;
            }
            
            h1 {
                font-size: 2.8rem;
            }
            
            .word-display {
                font-size: 2.8rem;
                margin: 20px 0 10px;
            }
            
            .pos-display {
                font-size: 1.6rem;
                margin-bottom: 10px;
            }

            .countdown {
                font-size: 1.8rem;
            }
            
            .pumpkin-option {
                width: 22%;
                height: 170px;
                max-width: 200px;
            }
            
            .pumpkin-option:hover {
                transform: translateY(-10px) scale(1.1);
            }
            
            .pumpkin-text {
                font-size: 1.1rem;
            }
            
            .ghost {
                width: 80px;
                height: 80px;
            }
            
            .score-display {
                font-size: 1.6rem;
            }
            
            .restart-btn, .start-btn {
                font-size: 1.5rem;
                padding: 18px 36px;
            }
            
            .restart-btn:hover, .start-btn:hover {
                background-color: #ff9f43;
                transform: scale(1.05);
            }
        }
        
        /* éŸ¿æ‡‰å¼è¨­è¨ˆ - å°æ‰‹æ©Ÿ */
        @media (max-width: 480px) {
            .game-container {
                padding: 15px;
            }
            
            h1 {
                font-size: 1.5rem;
            }
            
            .word-display {
                font-size: 1.8rem;
            }
            
            .pos-display {
                font-size: 1.1rem;
            }

            .countdown {
                font-size: 1.2rem;
            }
            
            .pumpkin-option {
                width: 45%;
                height: 130px;
            }
            
            .pumpkin-text {
                font-size: 0.85rem;
                bottom: 12px;
            }
            
            .ghost {
                width: 50px;
                height: 50px;
            }
            
            .score-display {
                font-size: 1.1rem;
            }
            
            .restart-btn, .start-btn {
                font-size: 1.1rem;
                padding: 12px 24px;
                min-width: 160px;
            }

            .time-selector {
                font-size: 0.85rem;
            }

            .time-btn {
                padding: 4px 10px;
                font-size: 0.8rem;
            }
        }
        
        /* éŸ¿æ‡‰å¼è¨­è¨ˆ - è¶…å°æ‰‹æ©Ÿ */
        @media (max-width: 360px) {
            .pumpkin-option {
                width: 45%;
                height: 120px;
            }
            
            .pumpkin-text {
                font-size: 0.8rem;
            }
            
            .ghost {
                width: 45px;
                height: 45px;
            }
        }

        /* æ©«å‘æ™‚å¾®èª¿ */
        @media (orientation: landscape) and (max-height: 450px) {
            .game-container {
                padding: 10px;
            }

            h1 {
                font-size: 1.4rem;
            }

            .word-display {
                font-size: 1.6rem;
            }

            .pumpkin-option {
                height: 110px;
            }
        }

        /* è§¸æ§è¨­å‚™ï¼šæŒ‰éˆ•æ›´é«˜ */
        @media (pointer: coarse) {
            .restart-btn, .start-btn {
                min-height: 50px;
            }
        }
    </style>
</head>
<body>
    <div class="device-info" id="deviceInfo">æª¢æ¸¬è¨­å‚™ä¸­...</div>

    <div class="game-container">
        <h1>L2 U11-20 å–®å­—æŒ‘æˆ°ç„¡æ¥µé™ ğŸƒ</h1>
        <div class="score-display">Score: <span id="score">0</span></div>

        <!-- èµ·å§‹ç•«é¢ -->
        <div id="setup-screen">
            <p>æº–å‚™å¥½æŒ‘æˆ°ä½ çš„è¬è–ç¯€å–®å­—å†’éšªäº†å—ï¼Ÿ</p>
            <div class="time-selector">
                <span>é¸æ“‡éŠæˆ²æ™‚é–“ï¼š</span>
                <div>
                    <button class="time-btn active" data-time="180">3 åˆ†é˜</button>
                    <button class="time-btn" data-time="300">5 åˆ†é˜</button>
                    <button class="time-btn" data-time="600">10 åˆ†é˜</button>
                </div>
            </div>
            <button class="start-btn" id="start-game">Start Game</button>
        </div>

        <!-- éŠæˆ²ç•«é¢ -->
        <div id="game-screen" style="display: none;">
            <div class="word-display" id="current-word">å–®å­—</div>
            <div class="pos-display" id="current-pos">è©æ€§</div>
            <div class="countdown" id="countdown">3:00</div>
            <div class="timer-container">
                <div class="timer-bar" id="timer-bar"></div>
            </div>
            <div class="options-container">
                <div class="pumpkin-option pumpkin-1" data-option="1">
                    <div class="pumpkin-text" id="option-1">é¸é …1</div>
                </div>
                <div class="pumpkin-option pumpkin-2" data-option="2">
                    <div class="pumpkin-text" id="option-2">é¸é …2</div>
                </div>
                <div class="pumpkin-option pumpkin-3" data-option="3">
                    <div class="pumpkin-text" id="option-3">é¸é …3</div>
                </div>
                <div class="pumpkin-option pumpkin-4" data-option="4">
                    <div class="pumpkin-text" id="option-4">é¸é …4</div>
                </div>
            </div>
            <div class="ghost"></div>
            <div class="bats" id="bats-container"></div>
        </div>

        <!-- çµæŸç•«é¢ -->
        <div class="game-over" id="game-over">
            <h2 id="result-message">Game Over!</h2>
            <div>Final Score: <span id="final-score">0</span></div>
            <div>ç”¨æ™‚: <span id="time-used">0</span> ç§’</div>
            <button class="restart-btn" id="restart-btn">å†ç©ä¸€æ¬¡</button>
        </div>
    </div>

    <script>
        // ========= è¨­å‚™åµæ¸¬ =========
        function detectDevice() {
            const userAgent = navigator.userAgent.toLowerCase();
            const deviceInfo = document.getElementById('deviceInfo');
            let deviceType = 'desktop';
            let screenInfo = '';
            
            if (/mobile|android|iphone|ipad/.test(userAgent)) {
                if (/ipad|tablet/.test(userAgent) || (window.innerWidth >= 768 && window.innerWidth <= 1024)) {
                    deviceType = 'tablet';
                    screenInfo = 'å¹³æ¿è¨­å‚™';
                } else {
                    deviceType = 'mobile';
                    screenInfo = 'æ‰‹æ©Ÿè¨­å‚™';
                }
            } else {
                deviceType = 'desktop';
                screenInfo = 'æ¡Œé¢è¨­å‚™';
            }
            
            document.body.classList.add(deviceType + '-view');
            
            const screenSize = `è¢å¹•: ${window.innerWidth} Ã— ${window.innerHeight}`;
            const dpr = `åƒç´ æ¯”: ${window.devicePixelRatio}`;
            deviceInfo.textContent = `${screenInfo} | ${screenSize} | ${dpr}`;
            
            adjustForDevice(deviceType);
            return deviceType;
        }

        function adjustForDevice(deviceType) {
            const gameContainer = document.querySelector('.game-container');
            if (!gameContainer) return;
            switch (deviceType) {
                case 'desktop':
                    gameContainer.style.maxWidth = '900px';
                    break;
                case 'tablet':
                    gameContainer.style.maxWidth = '800px';
                    break;
                case 'mobile':
                    gameContainer.style.maxWidth = '100%';
                    break;
            }
        }

        // ========= éŠæˆ²è®Šæ•¸ =========
        let vocabulary = [];
        let currentWord = null;
        let score = 0;
        let totalGameTime = 180; // é è¨­ 3 åˆ†é˜
        let timeLeft = totalGameTime;
        let timer = null;
        let startTime = null;
        let gameActive = false;
        let gameOver = false;
        let batInterval = null;
        let canAnswer = false;
        let usedInCurrentSession = [];
        let correctStreak = 0;
        let wrongStreak = 0;
        let lastCountdownNumber = 0;

        // ========= DOMå…ƒç´  =========
        const setupScreen = document.getElementById('setup-screen');
        const gameScreen = document.getElementById('game-screen');
        const gameOverScreen = document.getElementById('game-over');
        const startGameBtn = document.getElementById('start-game');
        const restartBtn = document.getElementById('restart-btn');
        const currentWordDisplay = document.getElementById('current-word');
        const currentPosDisplay = document.getElementById('current-pos');
        const optionDisplays = [
            document.getElementById('option-1'),
            document.getElementById('option-2'),
            document.getElementById('option-3'),
            document.getElementById('option-4')
        ];
        const scoreDisplay = document.getElementById('score');
        const finalScoreDisplay = document.getElementById('final-score');
        const resultMessage = document.getElementById('result-message');
        const timerBar = document.getElementById('timer-bar');
        const batsContainer = document.getElementById('bats-container');
        const pumpkinOptions = document.querySelectorAll('.pumpkin-option');
        const countdownDisplay = document.getElementById('countdown');
        const timeUsedDisplay = document.getElementById('time-used');
        const timeButtons = document.querySelectorAll('.time-btn');

        // ========= å–®å­—åº« =========
        const wordList = `central,adj,ä¸­å¤®çš„
foggy,adj,æœ‰éœ§çš„
humid,adj,æ½®æ¿•çš„
bow,v,é èº¬; (ä½¿)å½æ›²
pattern,v,ä»¿é€ ; æ§‹æˆåœ–æ¡ˆ
pitch,v,æ­(å¸³ç¯·);ç´®(ç‡Ÿ);ç‚º...å®šèª¿; ç”¨åŠ›æ‰”
steel,v,é‹¼åŒ–;çµ¦...åŒ…ä¸Šé‹¼; ä½¿å …å¼·
extra,adv,é¡å¤–åœ°;å¦å¤–;ç‰¹åˆ¥åœ°
simply,adv,ç°¡å–®åœ°
aid,n,å¹«åŠ©;åŠ©æ‰‹;åŠ©è½å™¨
downtown,n adj,åŸå¸‚å•†æ¥­å€ (çš„)
flight,n,é£›è¡Œ
future,n,æœªä¾†
giant,n adj,å·¨äºº; å·¨å¤§çš„
hip,n,è‡€éƒ¨
influence,n,å½±éŸ¿
lettuce,n,é¡ä¼¼èµè‹£çš„ç”Ÿèœ
log,n,åŸæœ¨;æœ¨æ–™;å·¥ä½œè¨˜éŒ„ç°¿
magazine,n,é›œèªŒ
nod,n,é»é ­
pattern,n,åœ–æ¡ˆ;æ¨¡å¼
tank,n,æ§½;å¦å…‹
childlike,adj,å¤©çœŸçˆ›æ¼«çš„
expensive,adj,è²´çš„
joint,adj,æ¥é ­;é€£æ¥
powerful,adj,å¼·æœ‰åŠ›çš„
teenage,adj,åå¹¾æ­²çš„
western,adj,è¥¿æ–¹çš„
burn,v,ç‡’;ç‡™å‚·
drag,v,æ‹‰
function,v,èµ·ä½œç”¨
hide,v,èº²;éš±è—
measure,v,è¨ˆé‡
pound,v,æ•²æ‰“;(å¿ƒç­‰)åŠ‡è·³;è…³æ­¥æ²ˆé‡åœ°èµ°
prize,v,é‡è¦–
pronounce,v,ç™¼...éŸ³
reject,v,æ‹’çµ•
value,v,ä¼°åƒ¹; é‡è¦–
aloud,adv,å¤§è²åœ°
bakery,n,éºµåŒ…åº—
business,n,å•†æ¥­;äº‹
data,n,è³‡æ–™
dot,n,é»;å°åœ“é»
drum,n,é¼“
eraser,n,æ©¡çš®æ“¦
fault,n,ééŒ¯
habit,n,ç¿’æ…£
jeans,n,ç‰›ä»”è¤²
joint,n,æ¥é ­;é—œç¯€
opinion,n,æ„è¦‹
passenger,n,ä¹˜å®¢
wing,n,ç¿…è†€
deaf,adj,è¾çš„
future,adj,æœªä¾†çš„
latest,adj,æœ€æ–°çš„;æœ€è¿‘çš„;æœ€é²çš„
fence,v,ç”¨æŸµ(æˆ–ç±¬)åœèµ·ä¾†;é˜²è­·;ä¿è¡›
lose,v,è¼¸;å¤±å»
punish,v,è™•ç½°
anytime,adv,åœ¨ä»»ä½•æ™‚å€™
double,adv,é›™å€åœ°;åŠ å€åœ°;é›™é‡åœ°
none,adv,æ¯«ä¸
absence,n,ç¼ºå¸­
burst,n,çˆ†ç‚¸;ç ´è£‚;ç¼ºå£
cartoon,n,å¡é€š
clown,n,å°ä¸‘
coal,n,ç…¤
dictionary,n,å­—å…¸
discussion,n,è¨è«–
fee,n,è²»ç”¨
fever,n,ç™¼ç‡’
fit,n,é©åˆ;åˆèº«
focus,n,ç„¦é»
glue,n,è† ;è† æ°´
judge,n,æ³•å®˜
noodle,n,éºµ
notebook,n,ç­†è¨˜æœ¬
overpass,n,å¤©æ©‹
phrase,n,ç‰‡èª
platform,n,æœˆå°;å¹³å°
search,n,æœæŸ¥;èª¿æŸ¥
slip,n,æ»‘è·¤; ç–æ¼; ç´™æ¢
spider,n,èœ˜è››
strawberry,n,è‰è“
wild,n,è’é‡
complete,adj,å®Œæ•´çš„;å¾¹åº•çš„
dull,adj,æ™¦æš—çš„;ç„¡å…‰æ¾¤çš„; æ²‰æ‚¶çš„
favorite,adj,æœ€å–œæ„›çš„ (ç¾å¼æ‹¼å¯«)
greedy,adj,è²ªå¿ƒçš„
responsible,adj,è² è²¬ä»»çš„
sudden,adj,çªç„¶çš„
wet,adj,æ½®æº¼çš„
bake,v,çƒ˜;çƒ¤
drum,v,æ‰“é¼“;å’šå’šåœ°æ•²
figure,v,ä¼°è¨ˆ;æç¹ª; èªå®š; è¨ˆç®—; ...æ˜¯é‡è¦éƒ¨åˆ†
fix,v,ä¿®ç†
hammer,v,æ•²æ‰“
ignore,v,ä¸ç†ç¬
net,v,ç”¨ç¶²æ•;ä½¿æ·¨è³º
offer,v,æä¾›
pain,v,ä½¿ç…©æƒ±/ç–¼ç—›
project,v,è¨ˆåŠƒ;ä¼åŠƒ;çªå‡º; æŠ•å°„; é æ¸¬
shock,v,ä½¿éœ‡å‹•
thumb,v,ç”¨æ‹‡æŒ‡ç¿»å‹•;è¿…é€Ÿç¿»é–±;è±èµ·æ‹‡æŒ‡è¦æ±‚æ­è»Š
treat,v,å°å¾…;æ²»ç™‚; æ¬¾å¾…
however,adv,ç„¡è«–å¦‚ä½•
without,prep,æ²’æœ‰
captain,n,éšŠé•·;æ©Ÿé•·;è‰¦é•·
cash,n,ç¾æ¬¾
conflict,n,æŠµè§¸; è¡çª
director,n,è‘£äº‹;å±€é•·;ä¸»ä»»;å°æ¼”
entrance,n,å…¥å£
gentleman,n,ç´³å£«
lemon,n,æª¸æª¬
meter,n,å…¬å°º;è¨ˆé‡å™¨ (ç¾å¼æ‹¼å¯«)
palm,n,æ‰‹æŒ
plus,n,æ­£è™Ÿ; å„ªå‹¢
pump,n,å”§ç­’;æ‰“æ°£æ©Ÿ;æŠ½æ°´æ©Ÿ
solution,n,è§£ç­”;æº¶åŠ‘
spirit,n,ç²¾ç¥; æƒ…ç·’; å¿ƒå¢ƒ
sweep,n,æƒé™¤
travel,n,æ—…è¡Œ
turtle,n,çƒé¾œ
underground,n adj,åœ°é¢ä¸‹å±¤;åœ°ä¸‹çµ„ç¹”
dizzy,adj,æšˆçœ©çš„
alarm,v,å‘...å ±è­¦;ä½¿é©šæ…Œä¸å®‰
bind,v,æ†;ç¶
control,v,æ§åˆ¶
film,v,æŠŠ...æ‹æˆé›»å½±;ç”Ÿè–„è†œ
frighten,v,å®³æ€•;åƒé©š
gather,v,é›†åˆ
greet,v,å•å€™;è‡´æ•¬
paste,v,é»è²¼
regard,v,æŠŠ...çœ‹ä½œ;å°Šé‡
stage,v,ä¸Šæ¼”;ç±ŒåŠƒ;ç™¼å‹•
string,v,(ç”¨ç·š)ç´®ã€ æ›
support,v,æ”¯æŒ
bend,n,å½;æ›²;ä¿¯; æ‹å½
button,n,éˆ•æ‰£
catsup,n,æœé†¬;ç•ªèŒ„é†¬(åŒketchup)
century,n,ä¸€ä¸–ç´€
chocolate,n,å·§å…‹åŠ›
court,n,æ³•åº­;(ç¶²çƒç­‰çš„)å ´åœ°
environment,n,ç’°å¢ƒ
item,n,é …ç›®;å“ç›®
jacket,n,å¤¾å…‹;å¤–å¥—
kingdom,n,ç‹åœ‹
measurement,n,æ¸¬é‡æ³•;æ¸¬å®š;å°ºå¯¸
prize,n,çå“
silk,n,è ¶çµ²;ç¶¢å¸ƒ
dishonest,adj,ä¸èª å¯¦çš„
legal,adj,åˆæ³•çš„
northern,adj,åŒ—æ–¹çš„;å‘åŒ—æ–¹çš„
square,adj,æ­£æ–¹å½¢çš„; å…¬å¹³çš„; ä¸€è‡´çš„
cheat,v,æ¬ºé¨™;ä½œå¼Š
favor,v,æ”¯æŒ; è¼ƒå–œæ­¡; æœ‰åˆ©æ–¼ (ç¾å¼æ‹¼å¯«)
interview,v,é¢è«‡;æ¡è¨ª
pick,v,æ¡æ”¶;æ’¿èµ·;é¸
promise,v,ç­”æ‡‰
task,v,æ´¾çµ¦...ä»»å‹™;è¦...åšä¸€é …å·¥ä½œ
wild,adv,ç‹‚æš´åœ°;ç„¡æ§åˆ¶åœ°;èƒ¡äº‚åœ°
bet,n,æ‰“è³­
cancer,n,ç™Œç—‡
ceiling,n,å¤©èŠ±æ¿
handkerchief,n,æ‰‹å¸•
mate,n,åŒä¼´
producer,n,ç”Ÿç”¢è€…
slide,n,æ»‘æ¢¯;åœŸå´©
teenager,n,åå¹¾æ­²å­©å­
uniform,n,åˆ¶æœ
wound,n,å‚·å£
extra,adj,é¡å¤–çš„
hateful,adj,å¯æ¨çš„;å……æ»¿æ†æ¨çš„
necessary,adj,éœ€è¦çš„
plain,adj,ç°¡æ¨¸çš„;æ¸…æ¥šçš„
playful,adj,æ„›ç©è€çš„;é–‹ç©ç¬‘çš„
successful,adj,æˆåŠŸçš„
aim,v,ç„æº–
consider,v,è€ƒæ…®
produce,v,è£½é€ ;å‡ºç”¢
stretch,v,èˆ’å±•è‚¢é«”
plus,prep,åŠ (ä¸Š)
choice,n,é¸æ“‡
cough,n,å’³å—½
dawn,n,é»æ˜
drag,n,æ‹–æ›³; ä»¤äººå­ç…©çš„äºº/äº‹;ç´¯è´…;é˜»åŠ›
fox,n,ç‹ç‹¸
military,n,è»éšŠ
nail,n,é‡˜å­;æŒ‡ç”²
nest,n,å·¢
nobody,n prep,ç„¡åå°å­; æ²’æœ‰äºº
painting,n,æ²¹ç•«
possibility,n,å¯èƒ½æ€§
potato,n,é¦¬éˆ´è–¯
present,n,ç¦®ç‰©
tip,n,å°–ç«¯;å°è²»
towel,n,æ¯›å·¾
official,adj,å®˜æ–¹çš„
attack,v,é€²æ”»;è¥²æ“Š
attend,v,å‡ºå¸­
confirm,v,ç¢ºèª
dawn,v,ç ´æ›‰
pride,v,ä½¿å¾—æ„
settle,v,å®‰æ”¾;å®‰é “;è§£æ±º(å•é¡Œç­‰)
single,v,é¸å‡º
steal,v,å·ç«Š
stress,v,å¼·èª¿
tip,v,çµ¦å°è²»;ä½¿å‚¾æ–œ
tower,v,é«˜è³;ç¿±ç¿”; å‹é; é«˜æ–¼
type,v,æ‰“å­—
widen,v,åŠ å¯¬;æ“´å¤§
whenever,adv,ç„¡è«–ä»€éº¼æ™‚å€™
bench,n,é•·å‡³;é•·æ¤…
bowling,n,ä¿é½¡çƒæˆ²
cockroach,n,èŸ‘è‚
depth,n,æ·±åº¦
firewoman,n,å¥³æ¶ˆé˜²éšŠå“¡
growth,n,æˆé•·;ç™¼è‚²;å¢å¤§
highway,n,å…¬è·¯;å¹¹é“
hotel,n,æ—…é¤¨
importance,n,é‡è¦æ€§
ketchup,n,ç•ªèŒ„é†¬
lawyer,n,å¾‹å¸«
motorcycle,n,æ©Ÿè»Š
pack,n,ä¸€å°åŒ…
pleasure,n,æ„‰å¿«
pride,n,è‡ªè±ª
sailor,n,æ°´æ‰‹
soybean,n,å¤§è±†
spot,n,æ–‘é»;å ´æ‰€
stream,n,æºªæµ; æ°£æµ/æ¶²æµ/è»Šæµ
traffic,n,äº¤é€š
winner,n,è´å®¶
main,adj,æœ€ä¸»è¦çš„
expect,v,æœŸå¾…
focus,v,é›†ä¸­
handle,v,è™•ç†;æ¬å¼„
perfect,v,ä½¿å®Œç¾;åšå®Œ
pin,v,é‡˜ä½;å£“ä½;æŒ‰ä½;æŠŠ...æ­¸ç½ªæ–¼
propose,v,æè­°; æ±‚å©š
screen,v,ç¯©é¸;æ”¾æ˜ é›»å½±; åº‡è­·
shoot,v,æ³¨å°„;å°„æ“Š;æ‹æ”
somewhere,adv,åœ¨æŸè™•
cave,n,æ´ç©´
change,n,é›¶éŒ¢; è®ŠåŒ–
cloth,n,å¸ƒ;(æ£‰åˆæˆçº–ç¶­ç­‰)ç¹”ç‰©;è¡£æ–™
completion,n,å®Œæˆ
dial,n,åˆ»åº¦ç›¤;èª¿ç¯€å™¨;æ’¥è™Ÿç›¤
difference,n,å·®åˆ¥
express,n,å¿«è»Š;å¿«é;å¿«é‹
flat,n,å¹³å¦éƒ¨åˆ†; å…¬å¯“
heroine,n,å¥³è‹±é›„
hippopotamus,n,æ²³é¦¬ (=hippo)
host,n,ä¸»äºº
pin,n,å¤§é ­é‡;èƒ¸é‡
progress,n,é€²æ­¥
restaurant,n,é¤å»³
source,n,æºé ­
treasure,n,è²¡å¯¶
type,n,é¡å‹
curious,adj,å¥½å¥‡çš„
exact,adj,ç¢ºåˆ‡çš„
rude,adj,ç„¡ç¦®çš„
terrible,adj,å¯æ€•çš„
cash,v,å…Œç¾
explain,v,è§£é‡‹
increase,v,å¢åŠ 
mask,v,åœ¨(è‡‰ä¸Š)æˆ´é¢å…·;æ©é£¾
pot,v,æŠŠ...æ”¾åœ¨ç½(æˆ–é‹)è£¡;äº‚å°„
snack,v,åƒå¿«é¤;åƒé»å¿ƒ
wing,v,åœ¨...è£ç¿¼;é£›è¡Œ; è¿…é€Ÿé€å¾€
wound,v,å‚·å®³; ä½¿å—å‚·
affair,n,äº‹ä»¶;é¢¨æµéŸ»äº‹;å–œæ…¶æ´»å‹•
babysitter,n,ä¿å§†
boil,n,æ²¸é¨°;ç…®æ²¸;ç¿»æ»¾
calendar,n,æ—¥æ›†;æœˆæ›†;è¡Œäº‹æ›†
character,n,ç‰¹æ€§;è§’è‰²;(ä¸­æ–‡)å­—
customer,n,é¡§å®¢
drawer,n,æŠ½å±œ
enemy,n,æ•µäºº
flash,n,é–ƒå…‰
geography,n,åœ°ç†
pillow,n,æ•é ­
postcard,n,æ˜ä¿¡ç‰‡
support,n,æ”¯æŒ
treatment,n,å°å¾…;å¾…é‡;æ²»ç™‚æ³•
truck,n,å¡è»Š
waterfall,n,ç€‘å¸ƒ
whale,n,é¯¨é­š `;

        // ========= å·¥å…·å‡½æ•¸ =========
        function parseWordList(text) {
            const lines = text.split('\n');
            const words = [];
            
            for (const line of lines) {
                const trimmedLine = line.trim();
                if (!trimmedLine) continue;
                
                const parts = trimmedLine.split(',');
                if (parts.length < 3) continue;
                
                const word = parts[0].trim();
                const pos = parts[1].trim();
                const meanings = parts[2].split(';').map(m => m.trim()).filter(m => m);
                
                for (const meaning of meanings) {
                    words.push({ word, pos, meaning });
                }
            }
            return words;
        }

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function formatTime(seconds) {
            seconds = Math.max(0, seconds);
            const m = Math.floor(seconds / 60);
            const s = Math.ceil(seconds % 60);
            return `${m}:${s.toString().padStart(2, '0')}`;
        }

        // ========= è™è å‹•ç•« =========
        let batFlyStyleAdded = false;
        function createBat() {
            const bat = document.createElement('div');
            bat.className = 'bat';
            
            const size = Math.random() * 20 + 10;
            bat.style.width = `${size}px`;
            bat.style.height = `${size}px`;
            bat.style.left = `-${size}px`;
            bat.style.top = `${Math.random() * 80 + 10}%`;
            
            const duration = Math.random() * 5 + 5;
            batsContainer.appendChild(bat);
            
            setTimeout(() => {
                bat.style.animation = `batFly ${duration}s linear forwards`;
            }, 10);
            
            setTimeout(() => {
                bat.remove();
            }, duration * 1000);
        }

        function startBatAnimation() {
            stopBatAnimation();
            batInterval = setInterval(() => {
                createBat();
            }, 2000);
        }
        
        function stopBatAnimation() {
            clearInterval(batInterval);
            batsContainer.innerHTML = '';
        }

        // ========= éŠæˆ²æµç¨‹ =========
        function initGame() {
            vocabulary = parseWordList(wordList);

            if (vocabulary.length === 0) {
                alert('å–®å­—åº«è¼‰å…¥å¤±æ•—ï¼');
                return;
            }

            score = 0;
            scoreDisplay.textContent = score;
            usedInCurrentSession = [];
            correctStreak = 0;
            wrongStreak = 0;
            gameActive = false;
            gameOver = false;
            canAnswer = false;
            lastCountdownNumber = 0;

            if (timer) {
                clearInterval(timer);
                timer = null;
            }
            stopBatAnimation();

            // ä¾ç›®å‰æ™‚é–“æŒ‰éˆ•è¨­å®šæ™‚é–“èˆ‡é¡¯ç¤º
            const activeBtn = document.querySelector('.time-btn.active') || timeButtons[0];
            totalGameTime = parseInt(activeBtn.dataset.time, 10) || 180;
            timeLeft = totalGameTime;
            countdownDisplay.textContent = formatTime(timeLeft);
            timerBar.style.width = '100%';
            timerBar.classList.remove('timer-warning');

            setupScreen.style.display = 'block';
            gameScreen.style.display = 'none';
            gameOverScreen.classList.remove('active');
        }

        function startGame() {
            if (vocabulary.length === 0) {
                alert('å–®å­—åº«è¼‰å…¥å¤±æ•—ï¼');
                return;
            }

            const activeBtn = document.querySelector('.time-btn.active') || timeButtons[0];
            totalGameTime = parseInt(activeBtn.dataset.time, 10) || 180;
            timeLeft = totalGameTime;
            lastCountdownNumber = Math.ceil(timeLeft);

            score = 0;
            scoreDisplay.textContent = score;
            usedInCurrentSession = [];
            correctStreak = 0;
            wrongStreak = 0;
            gameActive = true;
            gameOver = false;
            canAnswer = true;

            setupScreen.style.display = 'none';
            gameScreen.style.display = 'block';
            gameOverScreen.classList.remove('active');

            countdownDisplay.textContent = formatTime(timeLeft);
            timerBar.style.width = '100%';
            timerBar.classList.remove('timer-warning');

            startTime = Date.now();
            if (timer) clearInterval(timer);
            timer = setInterval(updateTimer, 100);

            startBatAnimation();
            nextQuestion();
        }

        function updateTimer() {
            if (!gameActive) {
                clearInterval(timer);
                timer = null;
                return;
            }

            timeLeft -= 0.1;
            if (timeLeft < 0) timeLeft = 0;

            const percentage = (timeLeft / totalGameTime) * 100;
            timerBar.style.width = `${percentage}%`;
            countdownDisplay.textContent = formatTime(timeLeft);

            const currentNumber = Math.ceil(timeLeft);
            if (currentNumber !== lastCountdownNumber) {
                lastCountdownNumber = currentNumber;
                countdownDisplay.className = 'countdown pulse';
                setTimeout(() => {
                    if (!gameOver) countdownDisplay.className = 'countdown';
                }, 300);
            }

            if (percentage < 20) {
                timerBar.classList.add('timer-warning');
            } else {
                timerBar.classList.remove('timer-warning');
            }

            if (timeLeft <= 0) {
                endGame('time');
            }
        }

        function nextQuestion() {
            if (!gameActive || gameOver) return;

            canAnswer = true;
            pumpkinOptions.forEach(option => {
                option.classList.remove('disabled', 'correct', 'wrong');
            });

            if (usedInCurrentSession.length >= vocabulary.length) {
                usedInCurrentSession = [];
            }

            const availableIndices = vocabulary
                .map((_, i) => i)
                .filter(i => !usedInCurrentSession.includes(i));

            if (availableIndices.length === 0) {
                usedInCurrentSession = [];
                nextQuestion();
                return;
            }

            const randomIndex = availableIndices[Math.floor(Math.random() * availableIndices.length)];
            usedInCurrentSession.push(randomIndex);
            currentWord = vocabulary[randomIndex];

            currentWordDisplay.classList.add('fade-out');
            currentPosDisplay.classList.add('fade-out');

            setTimeout(() => {
                currentWordDisplay.textContent = currentWord.word;
                currentPosDisplay.textContent = currentWord.pos;

                prepareOptions();

                currentWordDisplay.classList.remove('fade-out');
                currentPosDisplay.classList.remove('fade-out');
                currentWordDisplay.classList.add('fade-in');
                currentPosDisplay.classList.add('fade-in');

                setTimeout(() => {
                    currentWordDisplay.classList.remove('fade-in');
                    currentPosDisplay.classList.remove('fade-in');
                }, 300);
            }, 200);
        }

        function prepareOptions() {
            if (!currentWord) return;

            const correctAnswer = currentWord.meaning;
            const otherMeanings = vocabulary
                .filter(item => item.meaning !== correctAnswer)
                .map(item => item.meaning);

            const wrongAnswers = [];
            while (wrongAnswers.length < 3 && otherMeanings.length > 0) {
                const randomIndex = Math.floor(Math.random() * otherMeanings.length);
                const selectedMeaning = otherMeanings[randomIndex];
                if (!wrongAnswers.includes(selectedMeaning)) {
                    wrongAnswers.push(selectedMeaning);
                    otherMeanings.splice(randomIndex, 1);
                }
            }

            const allOptions = [correctAnswer, ...wrongAnswers];
            shuffleArray(allOptions);

            for (let i = 0; i < 4; i++) {
                if (i < allOptions.length) {
                    optionDisplays[i].textContent = allOptions[i];
                    optionDisplays[i].parentElement.dataset.meaning = allOptions[i];
                } else {
                    optionDisplays[i].textContent = 'ç„¡é¸é …';
                    optionDisplays[i].parentElement.dataset.meaning = '';
                }
            }
        }

        function checkAnswer(selectedOption) {
            if (!gameActive || !canAnswer || gameOver) return;

            canAnswer = false;
            const selectedMeaning = selectedOption.dataset.meaning;
            const isCorrect = selectedMeaning === currentWord.meaning;

            pumpkinOptions.forEach(option => {
                option.classList.add('disabled');
                const meaning = option.dataset.meaning;
                if (meaning === currentWord.meaning) {
                    option.classList.add('correct');
                } else if (option === selectedOption && !isCorrect) {
                    option.classList.add('wrong');
                }
            });

            if (isCorrect) {
                correctStreak++;
                wrongStreak = 0;

                let addScore = 5;
                if (correctStreak === 1) addScore = 5;
                else if (correctStreak === 2) addScore = 10;
                else if (correctStreak === 3) addScore = 15;
                else addScore = 20;

                score += addScore;
                scoreDisplay.textContent = score;

                createBatsEffect();

                setTimeout(() => {
                    if (!gameOver) nextQuestion();
                }, 700);
            } else {
                wrongStreak++;
                correctStreak = 0;

                let penalty = 5;
                if (wrongStreak === 1) penalty = 5;
                else if (wrongStreak === 2) penalty = 10;
                else if (wrongStreak === 3) penalty = 15;
                else penalty = 20;

                score = Math.max(score - penalty, 0);
                scoreDisplay.textContent = score;

                gameScreen.style.animation = 'shake 0.4s';
                setTimeout(() => {
                    gameScreen.style.animation = '';
                }, 400);

                setTimeout(() => {
                    if (score <= 0) {
                        endGame('score');
                    } else if (!gameOver) {
                        pumpkinOptions.forEach(option => {
                            option.classList.remove('correct', 'wrong', 'disabled');
                        });
                        canAnswer = true;
                        nextQuestion();
                    }
                }, 800);
            }
        }

        function createBatsEffect() {
            for (let i = 0; i < 5; i++) {
                setTimeout(() => {
                    createBat();
                }, i * 100);
            }
        }

        function endGame(reason) {
            if (gameOver) return;
            gameOver = true;
            gameActive = false;
            canAnswer = false;

            if (timer) {
                clearInterval(timer);
                timer = null;
            }
            stopBatAnimation();

            finalScoreDisplay.textContent = score;

            let used;
            if (startTime) {
                used = Math.floor((Date.now() - startTime) / 1000);
            } else {
                used = Math.floor(totalGameTime - timeLeft);
            }
            if (used < 0 || !isFinite(used)) used = 0;
            timeUsedDisplay.textContent = used;

            if (reason === 'time') {
                resultMessage.textContent = 'æ™‚é–“åˆ°ï¼ğŸ‘»';
            } else if (reason === 'score') {
                resultMessage.textContent = 'åˆ†æ•¸æ­¸é›¶äº†ï¼ğŸ§Ÿâ€â™‚ï¸';
            } else {
                resultMessage.textContent = 'Game Over!';
            }

            gameOverScreen.classList.add('active');
        }

        function restartGame() {
            initGame();
        }

        // ========= äº‹ä»¶è™•ç† =========
        document.addEventListener('DOMContentLoaded', function () {
            detectDevice();
            initGame();

            startGameBtn.addEventListener('click', startGame);
            restartBtn.addEventListener('click', restartGame);

            pumpkinOptions.forEach(option => {
                option.addEventListener('click', () => {
                    checkAnswer(option);
                });
            });

            timeButtons.forEach(btn => {
                btn.addEventListener('click', () => {
                    timeButtons.forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');

                    totalGameTime = parseInt(btn.dataset.time, 10) || 180;
                    timeLeft = totalGameTime;
                    countdownDisplay.textContent = formatTime(timeLeft);
                    timerBar.style.width = '100%';
                    timerBar.classList.remove('timer-warning');
                });
            });
        });

        // é˜²æ­¢é›™æ“Šç¸®æ”¾
        let lastTouchEnd = 0;
        document.addEventListener('touchend', function(e) {
            const now = Date.now();
            if (now - lastTouchEnd <= 300) e.preventDefault();
            lastTouchEnd = now;
        }, { passive: false });

        window.addEventListener('resize', function () {
            setTimeout(detectDevice, 100);
        });
    </script>
</body>
</html>
